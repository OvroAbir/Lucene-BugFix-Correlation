[{"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12315273", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12315273", "_JiraIssueData__issue_key": "LUCENE-432", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "m1@snyder-haye.com", "_JiraUser__key": "m1@snyder-haye.com", "_JiraUser__display_name": "Martin Haye", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=m1%40snyder-haye.com"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "m1@snyder-haye.com", "_JiraUser__key": "m1@snyder-haye.com", "_JiraUser__display_name": "Martin Haye", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=m1%40snyder-haye.com"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2005-09-13T09:10:25.000+0000", "_JiraIssueData__issue_description": "Currently, those who utilize the \"advanced\" search API cannot sort results using\nthe handy FieldSortedHitQueue. I suggest making this class public to facilitate\nthis use, as I can't think of a reason not to.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "Make FieldSortedHitQueue public", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-09-13T09:11:23.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=16383)\nPatch to make FieldSortedHitQueue public\n\nPatch created against current trunk as of today.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "m1@snyder-haye.com", "_JiraUser__key": "m1@snyder-haye.com", "_JiraUser__display_name": "Martin Haye", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=m1%40snyder-haye.com"}, "_JiraIssueComment__comment_id": "12324417", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12315273/comment/12324417"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-09-22T12:01:37.000+0000", "_JiraIssueComment__comment_body": "I'd like to see this patch applied.\n\nRight now I have to work around this by having my own org.apache.lucene.search package with the following class:\n\npublic class PublicFieldSortedHitQueue extends FieldSortedHitQueue {\n  public PublicFieldSortedHitQueue (IndexReader reader, SortField[] fields, int size) throws IOException    {\n    super(reader, fields, size);\n  }\n}", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12330155", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12315273/comment/12330155"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-10-27T06:39:53.000+0000", "_JiraIssueComment__comment_body": "Does anyone have a good reason not to make FieldSortedHitQueue public?\nAre there changes to the class that people would like to see before it is made public?\n\nI've had to work around this issue myself, so I'm inclined to commit.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12356016", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12315273/comment/12356016"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-02-02T02:36:28.000+0000", "_JiraIssueComment__comment_body": "+1\n\nI'd lose the \"Now public to facilitate sorting with the expert query API\" comment.  We shouldn't give the history of the code in the javadoc.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_JiraIssueComment__comment_id": "12364830", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12315273/comment/12364830"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-02-03T02:03:18.000+0000", "_JiraIssueComment__comment_body": "I committed this.  Thanks!", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12364969", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12315273/comment/12364969"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12313081", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--FieldSortedHitQueue.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "m1@snyder-haye.com", "_JiraUser__key": "m1@snyder-haye.com", "_JiraUser__display_name": "Martin Haye", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=m1%40snyder-haye.com"}, "_JiraAttachment__attachment_size": 1069, "_JiraAttachment__attachment_created": "2005-09-13T09:11:23.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12313081/ASF.LICENSE.NOT.GRANTED--FieldSortedHitQueue.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12322305", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-13T14:15:28.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "36628", "_JiraIssueChangeLogItem__to_str": "12315273"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12352946", "_Jira_Issue_ChangeLog_History__created_time": "2006-02-03T02:03:19.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Lucene Developers", "_JiraIssueChangeLogItem__to_str": "Yonik Seeley"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Fixed"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Open", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13064348", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:14:58.034+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13089538", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T11:59:21.608+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13152928", "_Jira_Issue_ChangeLog_History__created_time": "2011-06-02T22:03:25.104+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "sarowe", "_JiraUser__key": "steve_rowe", "_JiraUser__display_name": "Steven Rowe", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=sarowe"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "CVS Nightly - Specify date in submission", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16380245", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:04:17.358+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16934257", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T19:59:03.325+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 0, "_JiraIssue__close_time": 12329574.0, "_JiraIssue__contributors_number": 3, "_JiraIssue__num_of_files_changed": 1, "_JiraIssue__num_of_lines_changed": 5}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314551", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314551", "_JiraIssueData__issue_key": "LUCENE-401", "_JiraIssueData__priority": "Minor", "_JiraIssueData__assignee": null, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rnewson@connected.com", "_JiraUser__key": "rnewson@connected.com", "_JiraUser__display_name": "Robert Newson", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rnewson%40connected.com"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rnewson@connected.com", "_JiraUser__key": "rnewson@connected.com", "_JiraUser__display_name": "Robert Newson", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rnewson%40connected.com"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2005-06-23T00:22:19.000+0000", "_JiraIssueData__issue_description": "I've modified the Makefile so that it compiles with GCJ-4.0.\n\nThis involved fixing the CORE_OBJ macro to match the generated jar file as well\nas excluding FieldCacheImpl from being used from its .java source (GCJ has\nproblems with anonymous inner classes, I guess).\n\nAlso, I changed the behaviour of FieldInfos.fieldInfo(int). It depended on\ncatching IndexOutOfBoundsException exception. I've modified it to test the\nbounds first, returning -1 in that case. This helps with gcj since we build with\n-fno-bounds-check.\n\nI compiled with;\n\nGCJ=gcj-4.0 GCJH=gcjh-4.0 GPLUSPLUS=g++-4.0 ant clean gcj\n\npatch to follow.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "[PATCH] fixes for gcj target.", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-06-23T00:23:04.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=15513)\nPatch for gcj Makefile and FieldInfos exception handling.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rnewson@connected.com", "_JiraUser__key": "rnewson@connected.com", "_JiraUser__display_name": "Robert Newson", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rnewson%40connected.com"}, "_JiraIssueComment__comment_id": "12322457", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314551/comment/12322457"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-06-23T00:25:17.000+0000", "_JiraIssueComment__comment_body": "(In reply to comment #1)\n> Created an attachment (id=15513) [edit]\n> Patch for gcj Makefile and FieldInfos exception handling.\n> \n\nOh, I'm running Debian with a 2.6.11 kernel. I have the gcc-4.0 packages from\nthe unstable distribution.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rnewson@connected.com", "_JiraUser__key": "rnewson@connected.com", "_JiraUser__display_name": "Robert Newson", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rnewson%40connected.com"}, "_JiraIssueComment__comment_id": "12322458", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314551/comment/12322458"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2011-01-25T15:12:07.509+0000", "_JiraIssueComment__comment_body": "Closing, because we no longer support GCJ.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "uschindler", "_JiraUser__key": "thetaphi", "_JiraUser__display_name": "Uwe Schindler", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=uschindler"}, "_JiraIssueComment__comment_id": "12986422", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314551/comment/12986422"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312650", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--gcj.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rnewson@connected.com", "_JiraUser__key": "rnewson@connected.com", "_JiraUser__display_name": "Robert Newson", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rnewson%40connected.com"}, "_JiraAttachment__attachment_size": 1991, "_JiraAttachment__attachment_created": "2005-06-23T00:23:04.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312650/ASF.LICENSE.NOT.GRANTED--gcj.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321159", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:29:45.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "35468", "_JiraIssueChangeLogItem__to_str": "12314551"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12557647", "_Jira_Issue_ChangeLog_History__created_time": "2007-12-31T13:53:00.514+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "michaelbusch", "_JiraUser__key": "michaelbusch", "_JiraUser__display_name": "Michael Busch", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "priority", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Major", "_JiraIssueChangeLogItem__to_str": "Minor"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13034357", "_Jira_Issue_ChangeLog_History__created_time": "2011-01-25T15:12:07.570+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "uschindler", "_JiraUser__key": "thetaphi", "_JiraUser__display_name": "Uwe Schindler", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=uschindler"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Lucene Developers", "_JiraIssueChangeLogItem__to_str": null}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Fixed"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Open", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13066223", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:23:43.354+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13091870", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T12:08:17.629+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13153053", "_Jira_Issue_ChangeLog_History__created_time": "2011-06-02T22:04:33.349+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "sarowe", "_JiraUser__key": "steve_rowe", "_JiraUser__display_name": "Steven Rowe", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=sarowe"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "unspecified", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16379837", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:04:07.203+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16939103", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T20:00:14.368+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 0, "_JiraIssue__close_time": 176482188.57, "_JiraIssue__contributors_number": 2, "_JiraIssue__num_of_files_changed": 2, "_JiraIssue__num_of_lines_changed": 17}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314542", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314542", "_JiraIssueData__issue_key": "LUCENE-392", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2005-05-24T16:30:37.000+0000", "_JiraIssueData__issue_description": "I am not sure if this is because Lucene historically needed to work with older\nJVM's but with modern JVM's, instanceof is much quicker. \n\nThe Field.stringValue(), .readerValue(), and .binaryValue() methods all use\nClassCastException checking.\n\nUsing the following test-bed class, you will see that instanceof is miles quicker:\n\npackage com.aconex.index;\n\npublic class ClassCastExceptionTest {\n\n    private static final long ITERATIONS = 100000;\n\n    /**\n     * @param args\n     */\n    public static void main(String[] args) {\n\n        runClassCastTest(1); // once for warm up\n        runClassCastTest(2);\n        \n        runInstanceOfCheck(1);\n        runInstanceOfCheck(2);\n\n    }\n    private static void runInstanceOfCheck(int run) {\n        long start = System.currentTimeMillis();\n\n        Object foo = new Foo();\n        for (int i = 0; i < ITERATIONS; i++) {\n            String test;\n            if(foo instanceof String) {\n                System.out.println(\"Is a string\"); // should never print\n            }\n        }\n        long end = System.currentTimeMillis();\n        long diff = end - start;\n        System.out.println(\"InstanceOf checking run #\" + run + \": \" + diff + \"ms\");\n        \n    }\n\n    private static void runClassCastTest(int run) {\n        long start = System.currentTimeMillis();\n\n        Object foo = new Foo();\n        for (int i = 0; i < ITERATIONS; i++) {\n            String test;\n            try {\n                test = (String)foo;\n            } catch (ClassCastException c) {\n                // ignore\n            }\n        }\n        long end = System.currentTimeMillis();\n        long diff = end - start;\n        System.out.println(\"ClassCast checking run #\" + run + \": \" + diff + \"ms\");\n    }\n\n    private static final class Foo {\n    }\n\n}\n\n\nResults\n=======\n\nRun #1\n\nClassCast checking run #1: 1660ms\nClassCast checking run #2: 1374ms\nInstanceOf checking run #1: 8ms\nInstanceOf checking run #2: 4ms\n\n\nRun #2\nClassCast checking run #1: 1280ms\nClassCast checking run #2: 1344ms\nInstanceOf checking run #1: 7ms\nInstanceOf checking run #2: 2ms\n\n\nRun #3\nClassCast checking run #1: 1347ms\nClassCast checking run #2: 1250ms\nInstanceOf checking run #1: 7ms\nInstanceOf checking run #2: 2ms\n\nThis could explain why Documents with more Fields scales worse, as in, for lots\nof Documents with lots of Fields, the effect is exacerbated.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "[PATCH] Some Field methods use Classcast check instead of instanceof which is slow", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-24T16:31:34.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=15142)\nPatch to change Field class to use instanceof check instead of ClassCast\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322406", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12322406"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-25T03:06:15.000+0000", "_JiraIssueComment__comment_body": "It's important to note than it's only slower if the exception is actually \nthrown. Just using the try/catch block doesn't isn't bad for performance. If \nthe exception is never thrown, the additional \"instanceof\" will actually make \nthings (slightly?) slower. \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "daniel.naber@t-online.de", "_JiraUser__key": "daniel.naber@t-online.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=daniel.naber%40t-online.de"}, "_JiraIssueComment__comment_id": "12322407", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12322407"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-25T03:32:55.000+0000", "_JiraIssueComment__comment_body": "You might want to double check that assumption on modern VMs.\nThe type check must be done anyway, and VMs optimize away the second type check [cast] (which is \nimmediately followed by the first one [instanceof]) since at this point the type is already known.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "whoschek@lbl.gov", "_JiraUser__key": "whoschek@lbl.gov", "_JiraUser__display_name": "hoschek", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=whoschek%40lbl.gov"}, "_JiraIssueComment__comment_id": "12322408", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12322408"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-25T05:47:42.000+0000", "_JiraIssueComment__comment_body": "Daniel, you are correct that the cost of the exception catching is only incurred\nif the exception is actually thrown.  I was a bit stunned to see this crop up in\nperformance analysis.  See Bug 34930 where some performance profiling highlights\nthis area as one of the higher CPU consumers, so it _must_ be getting called. \nnow over a large Document set being indexed, if it is invoked quite a bit, it\nends up causing a reasonable impact on the overall timeline for indexing.\n\nIsn't the proposed patch a better way to do the same thing even if it's NOT\ncalled that often? ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322409", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12322409"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-25T06:27:58.000+0000", "_JiraIssueComment__comment_body": "We just need to make sure to optimize for the common use case, not for some \nspecial case. If the exception was never thrown, try/catch was 30-40% faster \nbecause it doesn't require the additional instanceof (tested with Java 1.4). \n \nI suggest we first find out how often the exception is thrown on average. \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "daniel.naber@t-online.de", "_JiraUser__key": "daniel.naber@t-online.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=daniel.naber%40t-online.de"}, "_JiraIssueComment__comment_id": "12322410", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12322410"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-25T06:44:00.000+0000", "_JiraIssueComment__comment_body": "I don't know what you were measuring but that's not the the case in any environment I've seen since \nJDK 1.3, even with the client VM. To see for yourself try this, with and without cast() / cast2(). \n\n\n\tpublic static void main(String[] args) throws Exception {\n\t\tint iters = Integer.parseInt(args[0]); // e.g. 1000\n\t\tint runs = Integer.parseInt(args[1]);  // e.g. 3\n\t\tint sum = 0;\n\t\tObject[] arr = new Object[10000];\n\t\tObject obj = \"xx\";\n\t\tif (Boolean.valueOf(args[2]).booleanValue()) obj = new Integer(0);\n\t\tfor (int i=0; i < arr.length; i++) arr[i] = obj;\n\t\t\n\t\tfor (int run=0; run < runs; run++) {\n\t\t\tSystem.out.println(\"\\nrun=\" + run);\n\t\t\tlong start = System.currentTimeMillis();\n\t\t\tfor (int j=0; j < iters; j++) {\n\t\t\t\tfor (int i=0; i < arr.length; i++) {\n\t\t\t\t\tsum += cast2(arr[i]).charAt(0);\n//\t\t\t\t\tsum += cast(arr[i]).charAt(0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlong end = System.currentTimeMillis();\n\t\t\tSystem.out.println(\"secs = \" + ((end-start) / 1000.0f));\n\t\t}\n\t\tSystem.out.println(\"checksum=\" + sum);\n\t}\n\t\n\tprivate static String cast(Object x) {\n\t\tif (x instanceof String) return (String)x;\n\t\treturn \"yy\";\n\t}\n\t\n\tprivate static String cast2(Object x) {\n\t\ttry {return (String)x; } catch (ClassCastException e) { return \"yy\"; }\n\t}\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "whoschek@lbl.gov", "_JiraUser__key": "whoschek@lbl.gov", "_JiraUser__display_name": "hoschek", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=whoschek%40lbl.gov"}, "_JiraIssueComment__comment_id": "12322411", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12322411"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-25T08:08:47.000+0000", "_JiraIssueComment__comment_body": "The area of code that is affected by this is in\nDocumentWriter.invertDocument(Document):\n\n...\n          Reader reader;\t\t\t  // find or make Reader\n          if (field.readerValue() != null)\n            reader = field.readerValue();\n          else if (field.stringValue() != null)\n            reader = new StringReader(field.stringValue());\n          else\n            throw new IllegalArgumentException\n                    (\"field must have either String or Reader value\");\n\n\nIn my test scenario I do not use a reader, all my Fields are created as normal\nString values, so the first if() to determine if the reader comes back null will\nalways result in an ClassCastException.  \n\nThat's 1 ClassCastException for each Indexed & Tokenized field _per_ Document.\n\nI'm not sure of whether String/Reader is more prevelant out there in the wild,\nbut I would have thought String would have been common.  Sure for large\ndocuments like PDF's etc it's more likely a Reader will be used.\n\nAnyway, for the try/catch block, the JVM performs an implicit ClassCast check\nanyway, that's how it determines whether it should throw an exception or not, so\nthere is no way to avoid some form of an instanceof.\n\nModern JVM's are quicker with instanceof.  However this may not (probably not)\ntrue for older (1.2 or earlier?) VM's, although I don't have access to that\nanymore test that theory.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322412", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12322412"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-26T22:00:26.000+0000", "_JiraIssueComment__comment_body": "Paul: I also use mostly String instead of Readers... but testing the patch by \nadding 10000 small documents to a RAMDirectory I couldn't see any difference. \nEven running the same code multiple times gives varying results for me. I \nguess my desktop environment and the Pentium M just aren't appropriate for \nthese kind of tests. \n \nWolfganfg: I used the code pasted in the original report but modified so that \ninstanceof is always true and  a cast is done after that and so that the \nexception is never thrown. See above, my setup is probably not appropriate for \nmeasuring small differences. \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "daniel.naber@t-online.de", "_JiraUser__key": "daniel.naber@t-online.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=daniel.naber%40t-online.de"}, "_JiraIssueComment__comment_id": "12322413", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12322413"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-27T02:09:37.000+0000", "_JiraIssueComment__comment_body": "Daniel: If there's a lot other stuff going on that introduces measurement variance and perturbation, it \nmakes sense to isolate the cast issue into a small microbenchmark. I think the code I sent demonstrates \nbeyond doubt that the \"instanceOf + cast\" version is always faster no matter which branch is taken. It \ndoesn't matter which branch is more common, it's always faster. The \"catch ClassCastException\" is an \nidiom that may have worked well in JDK <= 1.2 but it is demonstrably counterproductive on more recent \nVMs.\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "whoschek@lbl.gov", "_JiraUser__key": "whoschek@lbl.gov", "_JiraUser__display_name": "hoschek", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=whoschek%40lbl.gov"}, "_JiraIssueComment__comment_id": "12322414", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12322414"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-27T05:41:12.000+0000", "_JiraIssueComment__comment_body": "Daniel, could you post your test class so I can try your same test on my end?\n\ncheers,\n\nPaul", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322415", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12322415"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-28T04:50:11.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=15188)\nsimple indexing performance test\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "daniel.naber@t-online.de", "_JiraUser__key": "daniel.naber@t-online.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=daniel.naber%40t-online.de"}, "_JiraIssueComment__comment_id": "12322416", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12322416"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-30T07:30:56.000+0000", "_JiraIssueComment__comment_body": "Thanks for you test case Daniel, I appreciate your time in analysing this\n(pardon the pun... maybe only a little... :) ).  \n\nI ran your test and got similar results, as in, with class cast or instanceof,\nthey were about the same, which I thought odd indeed...\n\nThen I spotted something.  You're test case uses Field.Index.NO for the\nnon-stringreader case.  This ends up bypassing the bit of code I mentioned in\nDocumentWriter (see the if() block on line 140 of DocumentWriter, for our test\nthe Field has to be an Indexed, tokenized field) .\n\nTry these lines instead:\n\n    doc.add(new Field(\"body\", \"laber\", Field.Store.YES, Field.Index.TOKENIZED));\n    doc.add(new Field(\"body2\", \"blubb\", Field.Store.YES, Field.Index.TOKENIZED));\n    doc.add(new Field(\"body3\", \"bla\", Field.Store.YES, Field.Index.TOKENIZED));\n\nI got about 10-30% slower results with class cast because using this example of\nTokenised text, the class cast does actually get thrown and caught.  Yes,\nresults are quite broad, but the instanceof test slowest result was always\nbetter than the faster classcast results.\n\nModern VM's exception creation is miles better than it used to be, but older\nVM's were pretty awful.  I wonder what the difference is with, say, JDK 1.3.\n\nAt the end of the day, this is only a minor performance improvement, but it can\nadd up when doing a LOT of documents with a lot of fields, hence I thought this\nwould be a worth while improvement.\n\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322417", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12322417"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-30T07:34:41.000+0000", "_JiraIssueComment__comment_body": "I thought I would add one more comment.  Perhaps the current implementation\ndoesn't suffer from class cast problem because most people don't actually\ntokenize Strings? Perhaps they always use Readers, which ends up being 'lucky'\nin that it's always checked for first, and therefore never suffers from the\nclass cast exception?\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322418", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12322418"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-30T07:40:43.000+0000", "_JiraIssueComment__comment_body": "I think the key observation for this issue (backed up by benchmarks and profiling) is that instanceOf \nfollowed by cast is always faster, no matter which branch ends up being taken. It doesn't matter which use \ncases might be more common than others, because it's always faster no matter what.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "whoschek@lbl.gov", "_JiraUser__key": "whoschek@lbl.gov", "_JiraUser__display_name": "hoschek", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=whoschek%40lbl.gov"}, "_JiraIssueComment__comment_id": "12322419", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12322419"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-06-04T02:10:17.000+0000", "_JiraIssueComment__comment_body": "I think that catching the Exception here is bad style: Exceptions should not be\nused for control flow in ordinary circumstances.  It should also be faster, but\nI'm not sure whether this is a significant or a premature optimization. \nRegardless, I vote to accept this patch on the basis of style alone.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12322420", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12322420"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-07-18T13:15:34.000+0000", "_JiraIssueComment__comment_body": "As another style comment, the else clause is unnecessary;\n\nif (fieldsData instanceof String) {\n  return (String)fieldsData;\n}\nreturn null;\n\nEclipse highlights the current patches 'else { return null;}' with a warning.\n\nI was also wondering why Field.java is not indented...", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rnewson@connected.com", "_JiraUser__key": "rnewson@connected.com", "_JiraUser__display_name": "Robert Newson", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rnewson%40connected.com"}, "_JiraIssueComment__comment_id": "12322421", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12322421"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-11-10T12:33:03.000+0000", "_JiraIssueComment__comment_body": "instanceof is faster for me (faster than testing getClass()==otherClass too), and it's better style.\nfix applied.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12357187", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314542/comment/12357187"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312628", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--lucene.instanceof.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraAttachment__attachment_size": 1661, "_JiraAttachment__attachment_created": "2005-05-24T16:31:34.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312628/ASF.LICENSE.NOT.GRANTED--lucene.instanceof.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312629", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--PerformanceTest.java", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "daniel.naber@t-online.de", "_JiraUser__key": "daniel.naber@t-online.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=daniel.naber%40t-online.de"}, "_JiraAttachment__attachment_size": 1260, "_JiraAttachment__attachment_created": "2005-05-28T04:50:11.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312629/ASF.LICENSE.NOT.GRANTED--PerformanceTest.java", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321150", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:29:35.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "35037", "_JiraIssueChangeLogItem__to_str": "12314542"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12345722", "_Jira_Issue_ChangeLog_History__created_time": "2005-11-10T12:33:03.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "1.9"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Lucene Developers", "_JiraIssueChangeLogItem__to_str": "Yonik Seeley"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Fixed"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Open", "_JiraIssueChangeLogItem__to_str": "Resolved"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12402121", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-27T01:33:01.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13066659", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:25:04.715+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13091280", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T12:06:15.626+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13153014", "_Jira_Issue_ChangeLog_History__created_time": "2011-06-02T22:03:48.488+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "sarowe", "_JiraUser__key": "steve_rowe", "_JiraUser__display_name": "Steven Rowe", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=sarowe"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "CVS Nightly - Specify date in submission", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16379692", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:04:03.581+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16939052", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T20:00:13.600+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 14673746.0, "_JiraIssue__close_time": 17067598.0, "_JiraIssue__contributors_number": 6, "_JiraIssue__num_of_files_changed": 1, "_JiraIssue__num_of_lines_changed": 6}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314538", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314538", "_JiraIssueData__issue_key": "LUCENE-388", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2005-05-16T16:18:21.000+0000", "_JiraIssueData__issue_description": "Note: I believe this to be the same situation with 1.4.3 as with SVN HEAD.\n\nAnalysis using hprof utility shows that during index creation with many\ndocuments highlights that the CPU spends a large portion of it's time in\nIndexWriter.maybeMergeSegments(), which seems to be a 'waste' compared with\nother valuable CPU intensive operations such as tokenization etc.\n\nUsing the following test snippet to retrieve some rows from the db and create an\nindex:\n\n        Analyzer a = new StandardAnalyzer();\n        writer = new IndexWriter(indexDir, a, true);\n        writer.setMergeFactor(1000);\n        writer.setMaxBufferedDocs(10000);\n        writer.setUseCompoundFile(false);\n        connection = DriverManager.getConnection(\n                \"jdbc:inetdae7:tower.aconex.com?database=<somedb>\", \"secret\",\n                \"squirrel\");\n        String sql = \"select userid, userfirstname, userlastname, email from userx\";\n        LOG.info(\"sql=\" + sql);\n        Statement statement = connection.createStatement();\n        statement.setFetchSize(5000);\n        LOG.info(\"Executing sql\");\n        ResultSet rs = statement.executeQuery(sql);\n        LOG.info(\"ResultSet retrieved\");\n        int row = 0;\n\n        LOG.info(\"Indexing users\");\n        long begin = System.currentTimeMillis();\n        while (rs.next()) {\n            int userid = rs.getInt(1);\n            String firstname = rs.getString(2);\n            String lastname = rs.getString(3);\n            String email = rs.getString(4);\n            String fullName = firstname + \" \" + lastname;\n            Document doc = new Document();\n            doc.add(Field.Keyword(\"userid\", userid+\"\"));\n            doc.add(Field.Keyword(\"firstname\", firstname.toLowerCase()));\n            doc.add(Field.Keyword(\"lastname\", lastname.toLowerCase()));\n            doc.add(Field.Text(\"name\", fullName.toLowerCase()));\n            doc.add(Field.Keyword(\"email\", email.toLowerCase()));\n            writer.addDocument(doc);\n            row++;\n            if((row % 100)==0){\n                LOG.info(row + \" indexed\");\n            }\n        }\n        double end = System.currentTimeMillis();\n        double diff = (end-begin)/1000;\n        double rate = row/diff;\n        LOG.info(\"rate:\" +rate);\n\nOn my 1.5GHz PowerBook with 1.5Gb RAM and a 5400 RPM drive, my CPU is maxed out,\nand I end up getting a rate of indexing between 490-515 documents/second run\nover 10 times in succession.  \n\nBy applying a simple patch to IndexWriter (see attached shortly), which defers\nthe calling of maybeMergeSegments() so that it is only called every 2000\ntimes(an arbitrary figure), I appear to get a new rate of between 945-970\ndocuments/second.  Using Luke to look inside each index created between these 2\nthere does not appear to be any difference.  Same number of Documents, same\nnumber of Terms.\n\nI'm not suggesting one should apply this patch, I'm just highlighting the\ndifference in performance that this sort of change gives you.  \n\nWe are about to use Lucene to index 4 million construction document records, and\nso speeding up the indexing process is in our best interest! :)  If one\nconsiders the amount of CPU time spent in maybeMergeSegments over the initial\nindex creation of 4 million documents, I think one could see how it would be\nideal to try to speed this area up (at least move the bottleneck to IO). \n\nI woul appreciate anyone taking a moment to comment on this.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "[PATCH] IndexWriter.maybeMergeSegments() takes lots of CPU resources", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-16T16:19:32.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=15042)\nHPROF log of test run pre-patch\n\nAdded HPROF log showing high CPU usage inside IndexWriter.maybeMergeSegments()\nmethod", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322373", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322373"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-16T16:20:26.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=15043)\nDemonstration Patch to defer the call to IndexWriter.maybeMergeSegments() for\nevery 2000 times.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322374", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322374"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-16T19:22:41.000+0000", "_JiraIssueComment__comment_body": "Isn't the effect the same as setting mergeFactor to 2000, i.e. indexing gets  \nfaster but more RAM is needed?  \n  ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "daniel.naber@t-online.de", "_JiraUser__key": "daniel.naber@t-online.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=daniel.naber%40t-online.de"}, "_JiraIssueComment__comment_id": "12322375", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322375"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-17T01:11:27.000+0000", "_JiraIssueComment__comment_body": "(In reply to comment #3)\n> Isn't the effect the same as setting mergeFactor to 2000, i.e. indexing gets  \n> faster but more RAM is needed?  \n\nOn every add, it looks like the entire segment list is walked looking to see of\nenough docs (minMergeDocs) can be collected together to do a merge.  With a\nlarge minMergeDocs, this can get expensive.  Perhaps a count should be kept of\nthe number of docs in memory, and when it exceeds minMergeDocs, then call the\nmerge logic.\n\nOf course keeping track of the count would require modifications to many\nIndexWriter methods. It looks like the performance gains may well be worth it\nthough.\n\nBTW, I don't think a mergefactor of 1000 is typical (way too many\nfiledescriptors in use, and a big hit to searchers).  A high minMergeDocs (now\nmaxBufferedDocs) *is* typical and useful though.\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12322376", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322376"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-17T02:17:00.000+0000", "_JiraIssueComment__comment_body": "Your benchmark might run faster if you set maxBufferedDocs smaller.  Also, it\ndoesn't look like you're including the cost of closing the IndexWriter in your\nbenchmark statistics.  You should, as, with such a large buffer, you've delayed\nmuch of the work to that point.\n\nThe bottleneck you're hitting is that maybeMergeDocs sums the size of the\nbuffered indexes each time to decide whether to merge.  When you have thousands\nbuffered, this dominates.\n\nTo optimize this case (small docs, large maxBufferedDocs) we could keep count of\nthe number of documents buffered by adding a bufferedDocCount field. \naddDocument could increment this, mergeSegments could decrement it, and\nmaybeMergeSegments could check it with something like:\n\nif (targetMergeDocs == minMergeDocs)  {\n  mergeDocs = bufferedDocCount;\n} else {\n  while (--minSegment >= 0) {\n  ...\n  }\n}\n\nDoes that make sense?", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12322377", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322377"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-17T07:53:10.000+0000", "_JiraIssueComment__comment_body": ">> Your benchmark might run faster if you set maxBufferedDocs smaller.  Also, it\n>> doesn't look like you're including the cost of closing the IndexWriter in your\n>> benchmark statistics.  You should, as, with such a large buffer, you've delayed\n>> much of the work to that point.\n>> \n\nYes, by not factoring in the optmize()/close() call into the rate calculation,\nthere is still 'work to be done' at the end, but that would only be the tail end\nof the remaining docs stored in memory, right?  When indexing millions of\nrecords, this is probably not going to be a large percentage of the overall\ntime, as it would only, at most, the last maxBufferedDocs to be tidied up.  Or\nhave I confused myself?  I'm still quite new to Lucene and it's inner workings.  \n\n>> The bottleneck you're hitting is that maybeMergeDocs sums the size of the\n>> buffered indexes each time to decide whether to merge.  When you have thousands\n>> buffered, this dominates.\n\nYes, when maxBufferedDocs is relatively high (which is useful, I thought, if you\nhave the memory to throw at the application and one is trying to stay off IO as\nmuch as possible, that's what I've understood anyway) the loop ends up something\nlike this, where N is maxBufferedDocs\n\nn + (n-1)+(n-2) + ....(n-n)\n\n(I'm no math wiz, sorry)\nYou can notice this when indexing and outputing logging information, you see the\n'rate' slow down slightly as the number of docs is added to the in memory\nbuffer, then once the automatic merge is performed, the rate speeds up, then\nprogressively slows down again.\n\n>> \n>> To optimize this case (small docs, large maxBufferedDocs) we could keep count of\n>> the number of documents buffered by adding a bufferedDocCount field. \n>> addDocument could increment this, mergeSegments could decrement it, and\n>> maybeMergeSegments could check it with something like:\n>> \n>> if (targetMergeDocs == minMergeDocs)  {\n>>   mergeDocs = bufferedDocCount;\n>> } else {\n>>   while (--minSegment >= 0) {\n>>   ...\n>>   }\n>> }\n>> \n>> Does that make sense?\n\nErr, to be honest I'm not quite sure what you mean by \"small docs\" in the above\nfirst statement.  I'm also a little confused on the:\n\n>> if (targetMergeDocs == minMergeDocs)  {\n\nand how it relates to the bufferedDocCount you mention.  \n\nIn my hack/patch I'm effectively keeping track of the number of documents added\nas you suggest, so I believe we're pretty close to the same thing, but I blame\nonly having one coffee on trying to understand it.  :)  I think I like where you\ngoing though, it smells right.\n\nSomething I thought about last night is that the current code works fine for all\ncases, however the 'clean index being rebuilt' seems to get the raw end of the\nstick.  When an index is being incrementally or batch updated, IndexWriter\nprobably does need to scan the Segments to see if they need merging to obey the\nconfiguration settings.  However a fresh index is a special case, and seems like\nit could be optimized (this may be what you meant by 'small docs' ?).  \n\nIn really large scale indexes/indices(?) the number of documents being\nincrementally/batch updated is going to be totally minor compared to the cost of\nbuilding the full index for the first time.  For a true High Availability\nsolution, one will always need to factor in the cost to rebuild the index from\nscratch should it come to that.  Making the initial index as fast as possible\ngives much smaller down time.  \n\nFor crawling applications that use Lucene, this optimization will probably not\neven get noticed, because of the latency in retrieving the source material to\nmake up the document.  Only when the source material can be accessed fast will\nthis optimization be important.\n\nRemoving this CPU bottleneck has even more benefits when you consider those\nsolutions using Lucene to parallel index documents.  This optimization means\nthat you get a multiplication of benefit the more CPU's being utilized,\nparticularly if the architecture is a producer/consumer operation with a Buffer\nin between. (obviously IO starts to get in the way more).  With an optimization\nthe CPU can be better utilized performing tokenization etc.\n\ncheers,\n\nPaul", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322378", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322378"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-17T11:19:56.000+0000", "_JiraIssueComment__comment_body": "Doug, after more testing, you are correct that tweaking the maxBuffered from\n10,000 to 5000 gives slightly better performance.\n\nHowever I believe this is because with maxBufferedDocs==5000, this loop counter\nis reset more frequently, and so suffers less of the CPU drain.  \n\nI ran more tests using the hacked version using both 5000 and 10000, and the\nhacked version still runs better.  I'll attach an Excel sheet with the results,\nbut I only had time to run it over 5 samples each run, which is not exactly\nstatistically significant, but hopefully still correct.\n\nAs you can see, deferring this loop enables larger maxBuffered to gain ahead of\nsmaller maxBufferedDocs.\n\nAs always with these tests there are transient factors that affect things\n(getting DB results for one thing).", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322379", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322379"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-17T11:21:30.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=15053)\nExcel file containg results over small samples between Hacked and Non-hacked\ncode using different maxBufferedDocs settings\n\nAttached Excel file with some results", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322380", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322380"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-24T12:59:58.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=15137)\nPatch that hopefully is what Doug means\n\nDoug,\n\nI could not resolve in my mind exactly what you meant in your example code\nsnippet, but here's a patch that I believe accomplishes the same thing.  It's\nmerely a renaming of the variable, and using the 'mergeSegement decrements'\nconcept that you mention which I think is a good idea.\n\nThis patch still doesn't speed up the actual detecting of what segments on the\nstack to merge when it does go into that loop.\tI need to re-baseline the\nperformance measurements with this patch to see where the CPU is now spending\nmost of it's time, as it it may now be somewhere else entirely.\n\nNOTE: all current unit tests still pass with this patch.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322381", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322381"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-24T14:43:05.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=15139)\nHPROF output of the same test with the patch applied\n\nThis HPROF shows the CPU savings of the patch.\n\nIn summary, the original was this:\n\n   1 24.14% 24.14%     859 300342\norg.apache.lucene.index.IndexWriter.maybeMergeSegments\n   2  4.83% 28.97%     172 300306 java.lang.Throwable.fillInStackTrace\n   3  4.07% 33.04%     145 300336 org.apache.lucene.index.SegmentInfos.info\n   4  2.50% 35.54%\t89 300505\norg.apache.lucene.store.RAMInputStream.readInternal\n   5  2.33% 37.88%\t83 300299 java.util.Vector.addElement\n   6  2.16% 40.04%\t77 300334 org.apache.lucene.document.Field.readerValue\n   7  2.14% 42.17%\t76 300272 java.net.SocketInputStream.socketRead0\n   8  1.40% 43.58%\t50 300598 org.apache.lucene.util.PriorityQueue.downHeap\n\n   9  1.15% 44.73%\t41 300617 org.apache.lucene.util.PriorityQueue.downHeap\n\n  10  1.01% 45.74%\t36 300581 java.io.RandomAccessFile.writeBytes\n.....\n\nAnd after the patch is applied it becomes:\n\n   1  5.45%  5.45%     130 300287 java.lang.Throwable.fillInStackTrace\n   2  5.20% 10.65%     124 300277 java.net.SocketInputStream.socketRead0\n   3  3.86% 14.51%\t92 300515\norg.apache.lucene.store.RAMInputStream.readInternal\n   4  3.27% 17.79%\t78 300332 java.util.Vector.addElement\n   5  2.35% 20.13%\t56 300548 java.io.RandomAccessFile.writeBytes\n   6  2.22% 22.36%\t53 300305 org.apache.lucene.document.Field.readerValue\n   7  1.85% 24.20%\t44 300595 org.apache.lucene.util.PriorityQueue.downHeap\n\n   8  1.72% 25.92%\t41 300580 org.apache.lucene.util.PriorityQueue.downHeap\n\n   9  1.51% 27.43%\t36 300645 java.net.SocketInputStream.socketRead0\n  10  1.43% 28.86%\t34 300284\norg.apache.lucene.store.BufferedIndexOutput.<init>\n  11  1.43% 30.29%\t34 300562 java.lang.Object.clone\n  12  1.17% 31.46%\t28 300346 java.io.StringReader.read\n  13  1.01% 32.47%\t24 300363\norg.apache.lucene.index.DocumentWriter.writeNorms\n\n(Note: The Socket reading element is the JDBC driver retrieving the results).\n\ncheers,\n\nPaul\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322382", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322382"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-24T14:54:53.000+0000", "_JiraIssueComment__comment_body": "Where do the java.lang.Throwable.fillInStackTrace come from?", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mario@ops.co.at", "_JiraUser__key": "mario@ops.co.at", "_JiraUser__display_name": "Mario Ivankovits", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mario%40ops.co.at"}, "_JiraIssueComment__comment_id": "12322383", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322383"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-24T15:14:23.000+0000", "_JiraIssueComment__comment_body": "Most likely the IOExceptions stem from FastCharStream of StandardAnalyzer, at least that's my experience. \nSee the header of your hprof file to check if that's the case.\n\nJavacc has a gotcha in that it \"likes\" IOExceptions as part of the normal control flow on stream termination.\nI have performance patches for this that make FastCharStream 2-10 times faster for small inputs (it \ndoesn't matter on large inputs), but I never bothered submitted them since they were not crucial for me, \nand seeing that most submissions to lucene-dev go into a black hole anyway without any response, \nneither negative or positive, simply ignored... Hint :-)", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "whoschek@lbl.gov", "_JiraUser__key": "whoschek@lbl.gov", "_JiraUser__display_name": "hoschek", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=whoschek%40lbl.gov"}, "_JiraIssueComment__comment_id": "12322384", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322384"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-24T16:02:50.000+0000", "_JiraIssueComment__comment_body": "I expanded the depth of the HPFOF test (will attach shortly) but in summary,\nthis is where it comes from:\n\nTRACE 300351:\n        java.lang.Throwable.fillInStackTrace(Throwable.java:Unknown line)\n        java.lang.Throwable.<init>(Throwable.java:196)\n        java.lang.Exception.<init>(Exception.java:41)\n        java.lang.RuntimeException.<init>(RuntimeException.java:43)\n        java.lang.ClassCastException.<init>(ClassCastException.java:39)\n        org.apache.lucene.document.Field.readerValue(Field.java:262)\n       \norg.apache.lucene.index.DocumentWriter.invertDocument(DocumentWriter.java:152)\n        org.apache.lucene.index.DocumentWriter.addDocument(DocumentWriter.java:93)\n\nVery strang I must say, I will have to look into that in more detail.  Anyone\ncare to comment?  ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322385", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322385"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-24T16:07:09.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=15141)\nSame HPFOF trace, patch applied, but with deeper stack trace\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322386", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322386"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-24T16:34:07.000+0000", "_JiraIssueComment__comment_body": "See Bug 35037 for related info", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322387", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322387"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-25T10:22:55.000+0000", "_JiraIssueComment__comment_body": "(In reply to comment #12)\n> Most likely the IOExceptions stem from FastCharStream of StandardAnalyzer, at\nleast that's my experience. \n> See the header of your hprof file to check if that's the case.\n> \n> Javacc has a gotcha in that it \"likes\" IOExceptions as part of the normal\ncontrol flow on stream termination.\n> I have performance patches for this that make FastCharStream 2-10 times faster\nfor small inputs (it \n> doesn't matter on large inputs), but I never bothered submitted them since\nthey were not crucial for me, \n> and seeing that most submissions to lucene-dev go into a black hole anyway\nwithout any response, \n> neither negative or positive, simply ignored... Hint :-)\n\nHey, could you send me the patch for this?  I'd like to test it out. I've\nverified the FastCharStream class does throw IOException when EOF, which of\ncourse occurs very frequently when indexing small Fields.  I can't see a quick\nand easy solution to indicate EOF without the exception, so I'm keen to see your\nwork and test it out with my scenarios.\n\ncheers,\n\nPaul Smith\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12322388", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322388"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-25T13:40:54.000+0000", "_JiraIssueComment__comment_body": "Yep, throwing and catching exception in the critical path is always a performance gotcha, common case \nor not. See any VM implementation performance papers such as in the IBM Systems journal some years \nago, and others. \n\nNo idea why the javacc folks didn't come up with an API that does not involve exceptions for *normal* \ncontrol flow. Well, javacc has probably been unmaintained dead code for some time now. [Even Xerces \nhas such gotchas deep inside it's low level native API - I chatted with this some time ago with a Sun \nengineer].\n\nAnyway, you can preallocate the IOException in FastCharStream in  a private static final var, and then \nthrow the same exception object again and again on EOS. That gives some factor 2x the cheap way \nbecause the stack trace does not have to be generated and filled repeatadly (Same for the QueryParser \ncopy of FastCharStream).\n\nThe other additional 5x comes from getting rid of the exception completely - catching exceptions is \nexpensive. This is done via dirty patching the javacc generated code to not require EOS exceptions at \nall. Instead you can return 0xFFFF as an EOS marker, or some other unused Unicode value. Look at the \njavacc generated code and see where it catches the EOS exception. That's where you'd need to fiddle \naround, making sure true abnormal exceptions are still handled properly. It's really an akward \nmaintainance nightmare because it interferes with generated code, so I don't really recommend this. \n\nStill, StandardAnalyzer eats CPU (and buffer memory) like there's no tomorrow. Instead, I'd recommend \ngiving PatternAnalyzer (from the \"memory\" SVN contrib area) a try. The functionality is almost the same \nas StandardAnalyzer, but it can be many times faster, especially when using it with a String rather than \na Reader, and you don't have to wait indefinitely for lucene to get fixed.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "whoschek@lbl.gov", "_JiraUser__key": "whoschek@lbl.gov", "_JiraUser__display_name": "hoschek", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=whoschek%40lbl.gov"}, "_JiraIssueComment__comment_id": "12322389", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12322389"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-13T08:17:54.000+0000", "_JiraIssueComment__comment_body": "This last patch looks good to me, and I remember looking at this issue when Paul brought it up.  If I recall correctly, I saw the same wasted time in maybeMergeSegments().\n\nAll tests pass, so I'm committing this, only 15 months after it was reported :).  Thanks Paul!", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis", "_JiraUser__key": "otis", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis"}, "_JiraIssueComment__comment_id": "12427743", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12427743"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-13T23:49:01.000+0000", "_JiraIssueComment__comment_body": "Something is wrong with this patch (as it has been applied) as it increases memory usage. Indexing files with the IndexFiles demo worked before using writer.setMaxBufferedDocs(50) and a tight JVM memory setting (-Xmx2M), now it fails with an OutOfMemoryError.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "lucenebugs@danielnaber.de", "_JiraUser__key": "lucenebugs@danielnaber.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=lucenebugs%40danielnaber.de"}, "_JiraIssueComment__comment_id": "12427787", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12427787"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-14T03:46:35.000+0000", "_JiraIssueComment__comment_body": "One problem I see:\nIf you continuously add batches of documents of size less than maxBufferedDocs, maybeMergeSegments will never trigger a merge.  On a close(), it looks like there is some merging logic in flushRamSegments, but it doesn't do full multi-level merging like maybeMergeSegments does.\n\nI think I know how to fix it, but perhaps this should be reverted in the meantime?", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12427794", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12427794"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-14T04:14:32.000+0000", "_JiraIssueComment__comment_body": "Another problem I see even for single-sessions is that bufferedDocCount is not maintained correctly... all merges are subtracted, not just those of the buffered docs.  This will lead to fewer and fewer merges than expected over time.\n\nI definitely vote to revert this.  There isn't an easy fix to this patch - a different approach is required.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12427796", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12427796"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-14T06:29:55.000+0000", "_JiraIssueComment__comment_body": "geez, yep definitely don't put this in, my patch was only a 'suggestion' to highlight how it fixes the root cause of the problem. iIt is interesting that originally, all the test cases still pass, yet the problems Yonik highlights is real.  Might warrant some extra test cases to cover exactly those situation, even if this problem is not addressed.\n\nBe great if this could be fixed completely though, but I haven't got any headspace left to continue research on this one.. sorry :(", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12427818", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12427818"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-14T06:58:33.000+0000", "_JiraIssueComment__comment_body": "Ah, too bad. :(  Reverted.  I do recall seeing maybeMergeSegments being called a lot, although I don't recall how much actual time was spent in there.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis", "_JiraUser__key": "otis", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis"}, "_JiraIssueComment__comment_id": "12427821", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12427821"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-14T16:28:45.000+0000", "_JiraIssueComment__comment_body": "How does this patch look?\n\nIt's designed to exactly match the previous merging behavior, and it's conservative (an exact count is not maintained at all times).", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12427932", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12427932"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-14T21:15:43.000+0000", "_JiraIssueComment__comment_body": "Hi Yonik, I just tested the patch: sorry, but the problem is the same as before: I get an OutOfMemoryError using settings that without the patch. That doesn't mean that the patch is wrong of course, but as we're after performance improvements it wouldn't make sense to compare it to the old version which uses less memory.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "lucenebugs@danielnaber.de", "_JiraUser__key": "lucenebugs@danielnaber.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=lucenebugs%40danielnaber.de"}, "_JiraIssueComment__comment_id": "12427967", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12427967"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-14T21:25:42.000+0000", "_JiraIssueComment__comment_body": "> the problem is the same as before: I get an OutOfMemoryError using settings that without the patch\n\nThat's worrisome though... the increase in code and data is minimal, and my patch should not trigger any different merging behavior.  Unless the previous version was passing the low-mem test by a few bytes, something is still wrong.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12427969", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12427969"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-14T22:08:07.000+0000", "_JiraIssueComment__comment_body": "This is where some tracing logging code would be useful.  Maybe a YourKit memory snapshot to see what's going on.. ?  I can't see Yonik's patch should influence the memory profile. It's just delaying the check for merging until an appropriate time, and should not be removing opportunities to merge segments.  I can't see why checking less often uses more memory.\n\nObviously something strange is happening.  ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraIssueComment__comment_id": "12427975", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12427975"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-14T22:19:55.000+0000", "_JiraIssueComment__comment_body": "Well, the patch changes what the hotspot is, so the hotspot compiler could be trying to compile different code...\n\nDaniel, what is the exact test you are running?  what JVM and other settings?\nPerhaps trying both versions with -Xbatch or -Xint would remove the differences?\n\nPerhaps we need a method to determine if index \"invariants\" have been met...", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12427976", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12427976"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-14T23:05:37.000+0000", "_JiraIssueComment__comment_body": "I just see that this OOM is not exactly reproducible. I would have expected that it always happens when it has happened once when indexing the same data with the same settings (though not necessarily at the same time). But that doesn't seem to be the case. I use Java 1.4.2, -Xmx2M, writer.setMaxBufferedDocs(50) and I am indexing 2200 files with the IndexFiles class from the Lucene demo package. Also, I let the code run in Eclipse, maybe this has negative side effects.\n\nSo your code is probably okay, although I suggest you set up a similar test case just to be sure.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "lucenebugs@danielnaber.de", "_JiraUser__key": "lucenebugs@danielnaber.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=lucenebugs%40danielnaber.de"}, "_JiraIssueComment__comment_id": "12427981", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12427981"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-14T23:14:52.000+0000", "_JiraIssueComment__comment_body": "In Eclipse you can set the run to use its own JVM. Otherwise it runs in Eclipse's JVM and it has negative memory side effects.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "dmsmith555", "_JiraUser__key": "dmsmith555", "_JiraUser__display_name": "DM Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=dmsmith555"}, "_JiraIssueComment__comment_id": "12427984", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12427984"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-15T04:02:16.000+0000", "_JiraIssueComment__comment_body": "Something is wrong with my patch... the behavior still differs from the original.\nI wrote a testInvariants() method, and merges are not always done when they need to be.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12428033", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12428033"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-15T05:11:24.000+0000", "_JiraIssueComment__comment_body": "Got it!\n\nAttatching new version with a minor change... I forgot to take into account deleted documents.  After a merge, instead of setting the count to minMergeDocs, we set it to 0, forcing a recount on the next add.  The reason is that deleted docs could have been squeezed out during the merge ,leaving a smaller segment that might be used in another merge shortly.\n\nExample of original behavior (minMergeDocs=10):\n   // segment sizes = 55,8,1\n  add  doc\n   // segment sizes = 55,8,1,1\n  maybe merge\n  // segment sizes = 55,9     (not 10 because of a previously deleted doc)\n  add doc\n   // segment sizes = 55,9,1\n  maybe merge\n   // segment sizes = 55,10\n\nNow, the original behavior isn't necessarily desirable,  but we are taking baby steps... first \"do no harm\".  A separate patch can address merging behavior in the presence of deleted documents.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12428038", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12428038"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-16T22:07:04.000+0000", "_JiraIssueComment__comment_body": "It seems that the excessive cpu usage is mainly for (re)scanning those single-doc segments at the top of the \"stack\". \n\nThe following simple patch (small modification to previous one) only keeps track of the number of single doc segments, and when iterating for merge candidate segments, takes all those single doc segments in one step. \n\nAll tests pass with this patch, running a bit faster (3 seconds - can be just noise). A \"tight mem setting\" (2048 cacm files with -Xmx3m and setMaxBufferedDocs(50) ) that fails with previous patch passes with this one. I checked the trace for which segments were merged - same merge decisions as before this change for these 2048 filess.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "doronc", "_JiraUser__key": "doronc", "_JiraUser__display_name": "Doron Cohen", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=doronc"}, "_JiraIssueComment__comment_id": "12428522", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12428522"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-16T22:33:04.000+0000", "_JiraIssueComment__comment_body": "I was literally a minute away from committing my version when Doron sumbitted his  ;-)\nActually, I think I like Doron's \"singleDocSegmentsCount\" better.... it's easier to understand at a glance.\n\nI was testing the performance for mine... not as much of a speeup as I would have liked...\n5 to 6% better with maxBufferedDocs=1000, and a trivial single field document.\nYou need to go to maxBufferedDocs=10000 to see a good speedup, and that's probably not advisable for most real indicies (and the maxBufferedDocs=1000 used much less memory and was slightly faster anyway).\n\nHere is the code I added to IndexWriter to test my version (add testInvariants() after add() call and after flushRamSegments() in close(), then do \"ant test\")\n\n  private synchronized void testInvariants() {\n    // index segments should decrease in size\n    int maxSegLevel = 0;\n    for (int i=segmentInfos.size()-1; i>=0; i--) {\n      SegmentInfo si = segmentInfos.info(i);\n      int segLevel = (si.docCount)/minMergeDocs;\n      if (segLevel < maxSegLevel) {\n\n        throw new RuntimeException(\"Segment #\" + i + \" is too small. \" + segInfo());\n      }\n      maxSegLevel = Math.max(maxSegLevel,segLevel);\n    }\n\n    // check if merges needed\n    long targetMergeDocs = minMergeDocs;\n    int minSegment = segmentInfos.size();\n\n    while (targetMergeDocs <= maxMergeDocs && minSegment>=0) {\n      int mergeDocs = 0;\n      while (--minSegment >= 0) {\n        SegmentInfo si = segmentInfos.info(minSegment);\n        if (si.docCount >= targetMergeDocs) break;\n        mergeDocs += si.docCount;\n      }\n\n      if (mergeDocs >= targetMergeDocs) {\n        throw new RuntimeException(\"Merge needed at level \"+targetMergeDocs + \" :\"+segInfo());\n      }\n\n      targetMergeDocs *= mergeFactor;\t\t  // increase target size\n    }\n  }\n\n  private String segInfo() {\n    StringBuffer sb = new StringBuffer(\"minMergeDocs=\"+minMergeDocs+\"docsLeftBeforeMerge=\"+docsLeftBeforeMerge+\" segsizes:\");\n    for (int i=0; i<segmentInfos.size(); i++) {\n      sb.append(segmentInfos.info(i).docCount);\n      sb.append(\",\");\n    }\n    return sb.toString();\n  }\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12428527", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12428527"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-17T02:54:42.000+0000", "_JiraIssueComment__comment_body": "I've committed Doron's version after review and further testing with my testInvariants() (also committed, but commented out).  Thanks Doron & Paul!", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12428560", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12428560"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-18T09:21:28.000+0000", "_JiraIssueComment__comment_body": "well....  there is a problem in the current patch after all... the counter is not decremented when a merge is triggerred by a call to optimize. It is only decremented when a merge is called from maybeMergeSegments(). Therefore the counter decrement should move to mergeSegments(int,int). I am testing this fix now and will add a new patch for this soon.\nDoron", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "doronc", "_JiraUser__key": "doronc", "_JiraUser__display_name": "Doron Cohen", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=doronc"}, "_JiraIssueComment__comment_id": "12428953", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12428953"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-18T10:03:14.000+0000", "_JiraIssueComment__comment_body": "The attached doron_2_IndexWriter.patch is fixing the updating of singleDocSegmentsCount to take place in mergeSegments(minSegment, end) so that it would apply also when optimize() is called. The update of the counter now considers the range of the merge (so the counter is not necessarily updated to 0).\n\nThe bug in previous implementation was occasionally using TestIndexModifier.testIndexWithThreads() to fail with ArrayIndexOutOfBoundsException on the segments array.\n\nI ran this test several times with this fix and now it consistently passes. \"ant test\" passes as well.\n\nI hope we're done with this bug...\n\nDoron", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "doronc", "_JiraUser__key": "doronc", "_JiraUser__display_name": "Doron Cohen", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=doronc"}, "_JiraIssueComment__comment_id": "12428964", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12428964"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-18T13:34:35.000+0000", "_JiraIssueComment__comment_body": "Thanks Doron, I caught that too and I was just going to set the count to 0 in mergeSegments (mergeSegments is always called with end == size() currently I think).  Your fix is better though - gives more flexibility.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12429012", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12429012"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-18T14:27:33.000+0000", "_JiraIssueComment__comment_body": "We could also make the following change to flushRamSegments, right?\n\n  private final void flushRamSegments() throws IOException {\n    int minSegment = segmentInfos.size() - singleDocSegmentsCount;\n    int docCount = singleDocSegmentsCount;", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12429027", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12429027"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-18T17:42:18.000+0000", "_JiraIssueComment__comment_body": "Right... actually it should be like this:\n\n   int minSegment = segmentInfos.size() - singleDocSegmentsCount - 1; \n\nBut since flushRamSegments() is only called by close() and optimize(), no real performance gain is expected here. \n\nSo I'm not sure what my preference is between - \n(a) do not to change here, because \"why change a working code to be perhaps a bit more complex for no performance gain\". \n(b) change here too, also to be consistent with how this counter is used in maybeMergeSegments().\n\nAnyway I tested this change and it works - so I am attaching also this version - doron_2b_IndexWriter.patch - in case there is a favor for (b).\n\n- Doron\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "doronc", "_JiraUser__key": "doronc", "_JiraUser__display_name": "Doron Cohen", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=doronc"}, "_JiraIssueComment__comment_id": "12429069", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12429069"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-20T07:02:41.000+0000", "_JiraIssueComment__comment_body": "Paul, would you like to re-open this issue for (re)solving it with one of the two recent patches (2 or 2b)  - I think that once an issue is resolved it can be re-opened (or closed) by the developer who opened it. (I assume commiters can also re-open, but I'm not sure - well, at least I can't.)\nThanks, Doron", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "doronc", "_JiraUser__key": "doronc", "_JiraUser__display_name": "Doron Cohen", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=doronc"}, "_JiraIssueComment__comment_id": "12429248", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12429248"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-20T13:47:32.000+0000", "_JiraIssueComment__comment_body": "No need to re-open Doron, I committed doron_2_IndexWriter.patch at the same time as my first reply (shortly after you posted it).", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12429262", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12429262"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-21T20:40:29.000+0000", "_JiraIssueComment__comment_body": "Oh - sorry for the 'noise'  - got used to systems where a commit must be attached to an issue/defect - should have checked the commits list or the code itself - I'm learning all the time...", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "doronc", "_JiraUser__key": "doronc", "_JiraUser__display_name": "Doron Cohen", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=doronc"}, "_JiraIssueComment__comment_id": "12429522", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12429522"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-21T20:46:33.000+0000", "_JiraIssueComment__comment_body": "No problem... I probably should have put \"LUCENE-388\" in the commit log (it allows JIRA to link up the related commits automatically)", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12429525", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314538/comment/12429525"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312619", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--IndexWriter.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraAttachment__attachment_size": 818, "_JiraAttachment__attachment_created": "2005-05-16T16:20:26.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312619/ASF.LICENSE.NOT.GRANTED--IndexWriter.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312623", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--log.optimized.deep.txt", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraAttachment__attachment_size": 465336, "_JiraAttachment__attachment_created": "2005-05-24T16:07:09.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312623/ASF.LICENSE.NOT.GRANTED--log.optimized.deep.txt", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312622", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--log.optimized.txt", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraAttachment__attachment_size": 187734, "_JiraAttachment__attachment_created": "2005-05-24T14:43:05.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312622/ASF.LICENSE.NOT.GRANTED--log.optimized.txt", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312618", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--log-compound.txt", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraAttachment__attachment_size": 139362, "_JiraAttachment__attachment_created": "2005-05-16T16:19:32.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312618/ASF.LICENSE.NOT.GRANTED--log-compound.txt", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312621", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--lucene.34930.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraAttachment__attachment_size": 1868, "_JiraAttachment__attachment_created": "2005-05-24T12:59:58.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312621/ASF.LICENSE.NOT.GRANTED--lucene.34930.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312620", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--Lucene Performance Test - with & without hack.xls", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "psmith@apache.org", "_JiraUser__key": "psmith@apache.org", "_JiraUser__display_name": "Paul Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=psmith%40apache.org"}, "_JiraAttachment__attachment_size": 36352, "_JiraAttachment__attachment_created": "2005-05-17T11:21:30.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312620/ASF.LICENSE.NOT.GRANTED--Lucene+Performance+Test+-+with+%26+without+hack.xls", "_JiraAttachment__attachment_mime_type": "application/ms-excel"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12339078", "_JiraAttachment__attachment_filename": "doron_2_IndexWriter.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "doronc", "_JiraUser__key": "doronc", "_JiraUser__display_name": "Doron Cohen", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=doronc"}, "_JiraAttachment__attachment_size": 975, "_JiraAttachment__attachment_created": "2006-08-18T10:03:14.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12339078/doron_2_IndexWriter.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12339116", "_JiraAttachment__attachment_filename": "doron_2b_IndexWriter.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "doronc", "_JiraUser__key": "doronc", "_JiraUser__display_name": "Doron Cohen", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=doronc"}, "_JiraAttachment__attachment_size": 1441, "_JiraAttachment__attachment_created": "2006-08-18T17:42:18.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12339116/doron_2b_IndexWriter.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12338992", "_JiraAttachment__attachment_filename": "doron_IndexWriter.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "doronc", "_JiraUser__key": "doronc", "_JiraUser__display_name": "Doron Cohen", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=doronc"}, "_JiraAttachment__attachment_size": 1712, "_JiraAttachment__attachment_created": "2006-08-16T22:07:04.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12338992/doron_IndexWriter.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12338857", "_JiraAttachment__attachment_filename": "yonik_indexwriter.diff", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraAttachment__attachment_size": 2581, "_JiraAttachment__attachment_created": "2006-08-15T05:11:24.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12338857/yonik_indexwriter.diff", "_JiraAttachment__attachment_mime_type": "application/octet-stream"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12338820", "_JiraAttachment__attachment_filename": "yonik_indexwriter.diff", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraAttachment__attachment_size": 2592, "_JiraAttachment__attachment_created": "2006-08-14T16:28:45.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12338820/yonik_indexwriter.diff", "_JiraAttachment__attachment_mime_type": "application/octet-stream"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321146", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:29:30.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "34930", "_JiraIssueChangeLogItem__to_str": "12314538"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12421817", "_Jira_Issue_ChangeLog_History__created_time": "2006-08-13T08:17:54.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis", "_JiraUser__key": "otis", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Lucene Developers", "_JiraIssueChangeLogItem__to_str": null}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Fixed"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Open", "_JiraIssueChangeLogItem__to_str": "Resolved"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12421858", "_Jira_Issue_ChangeLog_History__created_time": "2006-08-13T23:49:01.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "lucenebugs@danielnaber.de", "_JiraUser__key": "lucenebugs@danielnaber.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=lucenebugs%40danielnaber.de"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Fixed", "_JiraIssueChangeLogItem__to_str": null}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Reopened"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12421979", "_Jira_Issue_ChangeLog_History__created_time": "2006-08-14T14:42:29.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Yonik Seeley"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12421993", "_Jira_Issue_ChangeLog_History__created_time": "2006-08-14T16:28:45.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "yonik_indexwriter.diff"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12422102", "_Jira_Issue_ChangeLog_History__created_time": "2006-08-15T05:11:24.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "yonik_indexwriter.diff"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12422538", "_Jira_Issue_ChangeLog_History__created_time": "2006-08-16T22:07:04.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "doronc", "_JiraUser__key": "doronc", "_JiraUser__display_name": "Doron Cohen", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=doronc"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "doron_IndexWriter.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12422575", "_Jira_Issue_ChangeLog_History__created_time": "2006-08-17T02:54:42.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "2.0.1"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Fixed"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Reopened", "_JiraIssueChangeLogItem__to_str": "Resolved"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12422962", "_Jira_Issue_ChangeLog_History__created_time": "2006-08-18T10:03:14.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "doronc", "_JiraUser__key": "doronc", "_JiraUser__display_name": "Doron Cohen", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=doronc"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "doron_2_IndexWriter.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12423055", "_Jira_Issue_ChangeLog_History__created_time": "2006-08-18T17:42:18.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "doronc", "_JiraUser__key": "doronc", "_JiraUser__display_name": "Doron Cohen", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=doronc"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "doron_2b_IndexWriter.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13066662", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:25:05.174+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13092099", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T12:09:03.095+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13152994", "_Jira_Issue_ChangeLog_History__created_time": "2011-06-02T22:03:42.837+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "sarowe", "_JiraUser__key": "steve_rowe", "_JiraUser__display_name": "Steven Rowe", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=sarowe"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "CVS Nightly - Specify date in submission", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13736448", "_Jira_Issue_ChangeLog_History__created_time": "2013-05-10T10:44:20.612+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "uschindler", "_JiraUser__key": "thetaphi", "_JiraUser__display_name": "Uwe Schindler", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=uschindler"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16379387", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:03:54.863+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16938606", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T20:00:06.809+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 39522981.0, "_JiraIssue__close_time": 212399378.612, "_JiraIssue__contributors_number": 10, "_JiraIssue__num_of_files_changed": 1, "_JiraIssue__num_of_lines_changed": 15}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314522", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314522", "_JiraIssueData__issue_key": "LUCENE-372", "_JiraIssueData__priority": "Minor", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "michaelbusch", "_JiraUser__key": "michaelbusch", "_JiraUser__display_name": "Michael Busch", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "patrick.hochstenbach@ugent.be", "_JiraUser__key": "patrick.hochstenbach@ugent.be", "_JiraUser__display_name": "Patrick Hochstenbach", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=patrick.hochstenbach%40ugent.be"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "patrick.hochstenbach@ugent.be", "_JiraUser__key": "patrick.hochstenbach@ugent.be", "_JiraUser__display_name": "Patrick Hochstenbach", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=patrick.hochstenbach%40ugent.be"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2005-04-14T17:02:52.000+0000", "_JiraIssueData__issue_description": "The query processor truncates a query when right parentheses are unmatched.\nE.g.:\n\n secret AND illegal) AND access:confidential\n\nwill not result in a ParseException instead will run as:\n\n secret AND illegal", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "Unmatched right parentheses truncates query", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-10-28T06:22:53.000+0000", "_JiraIssueComment__comment_body": "The reason for this is that the parse() method does not ensure that the entire input string has been consumed. Query() will simply return if it encounters an unexpected token, relying on its caller to consume that token. If the query is nested, the call will throw an exception. But at the top-level, the caller is parse(), and it does not make sure that <EOF> is reached. \n\nA simple fix is to introdice a new nonterminal TopLevelQuery ::= Query <EOF>, and parse() calls TopLevelQuery. I have a patch for this, will post it together with a few new unit test cases for this. \n\nAndreas.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "neunand", "_JiraUser__key": "neunand", "_JiraUser__display_name": "Andreas Neumann", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=neunand"}, "_JiraIssueComment__comment_id": "12445343", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314522/comment/12445343"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-10-28T07:17:21.000+0000", "_JiraIssueComment__comment_body": "This patch contains 5 files (I was not sure whether to include the JavaCC-generated files, ended up including them):\n- QueryParser.jJ: introduced a new nonterminal TopLevelQuery\n- QueryParser.java: generated from QueryParser.jj by javaCC\n- QueryParserTokenManager.java: generated from QueryParser.jj by javaCC\n- TestQueryParser.java: rewrote testException and added a few more tests.\n- TestMultiFieldQueryParser.java: fixed testSimple() because it was passing in unbalanced quotation marks. That caused a failure with the new QueryParser. \n\n- Andreas.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "neunand", "_JiraUser__key": "neunand", "_JiraUser__display_name": "Andreas Neumann", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=neunand"}, "_JiraIssueComment__comment_id": "12445348", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314522/comment/12445348"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-11-01T17:38:58.000+0000", "_JiraIssueComment__comment_body": "Somehow the patch got some extra line feeds in some of the javacc created files. This version takes those out.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "steven_parkes", "_JiraUser__key": "steven_parkes", "_JiraUser__display_name": "Steven Parkes", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=steven_parkes"}, "_JiraIssueComment__comment_id": "12446313", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314522/comment/12446313"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-11-01T17:40:15.000+0000", "_JiraIssueComment__comment_body": "I like it. There are some extra tests that demonstrate where parse exceptions are going to be thrown, which is nice.\n\nIt would be nice if we could, perhaps, be more liberal in what we accept. For example, I've always thought it would be nice if we could add in missing terminators, e.g., quotes, parentheses., in the spirit of \"being liberal in what you accept.\" But I don't see that being too feasible with an automatically generated parser.\n\nI do think completely ignoring terms, which this patch fixes, is the wrong way to be liberal.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "steven_parkes", "_JiraUser__key": "steven_parkes", "_JiraUser__display_name": "Steven Parkes", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=steven_parkes"}, "_JiraIssueComment__comment_id": "12446314", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314522/comment/12446314"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-03-08T04:24:14.522+0000", "_JiraIssueComment__comment_body": "I just committed this. Thanks, Andreas!", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "michaelbusch", "_JiraUser__key": "michaelbusch", "_JiraUser__display_name": "Michael Busch", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch"}, "_JiraIssueComment__comment_id": "12479213", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314522/comment/12479213"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12343828", "_JiraAttachment__attachment_filename": "Lucene-372.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "neunand", "_JiraUser__key": "neunand", "_JiraUser__display_name": "Andreas Neumann", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=neunand"}, "_JiraAttachment__attachment_size": 5254, "_JiraAttachment__attachment_created": "2006-10-28T07:17:21.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12343828/Lucene-372.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12344120", "_JiraAttachment__attachment_filename": "LUCENE-372.patch.txt", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "steven_parkes", "_JiraUser__key": "steven_parkes", "_JiraUser__display_name": "Steven Parkes", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=steven_parkes"}, "_JiraAttachment__attachment_size": 4084, "_JiraAttachment__attachment_created": "2006-11-01T17:38:58.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12344120/LUCENE-372.patch.txt", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321130", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:29:15.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "34447", "_JiraIssueChangeLogItem__to_str": "12314522"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12438934", "_Jira_Issue_ChangeLog_History__created_time": "2006-10-28T07:17:21.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "neunand", "_JiraUser__key": "neunand", "_JiraUser__display_name": "Andreas Neumann", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=neunand"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Lucene-372.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12439873", "_Jira_Issue_ChangeLog_History__created_time": "2006-11-01T17:38:58.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "steven_parkes", "_JiraUser__key": "steven_parkes", "_JiraUser__display_name": "Steven Parkes", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=steven_parkes"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "LUCENE-372.patch.txt"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12439875", "_Jira_Issue_ChangeLog_History__created_time": "2006-11-01T17:40:16.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "steven_parkes", "_JiraUser__key": "steven_parkes", "_JiraUser__display_name": "Steven Parkes", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=steven_parkes"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Id", "_JiraIssueChangeLogItem__field_type": "custom", "_JiraIssueChangeLogItem__from_str": "34447", "_JiraIssueChangeLogItem__to_str": ""}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "2.1"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Lucene Fields", "_JiraIssueChangeLogItem__field_type": "custom", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "[Patch Available]"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "2.0.0"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "2.0.1"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "2.1"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "1.9"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Lucene Developers", "_JiraIssueChangeLogItem__to_str": null}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "priority", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Major", "_JiraIssueChangeLogItem__to_str": "Minor"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12470536", "_Jira_Issue_ChangeLog_History__created_time": "2007-02-23T20:08:44.521+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "michaelbusch", "_JiraUser__key": "michaelbusch", "_JiraUser__display_name": "Michael Busch", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Michael Busch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12470821", "_Jira_Issue_ChangeLog_History__created_time": "2007-02-25T22:38:16.354+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "michaelbusch", "_JiraUser__key": "michaelbusch", "_JiraUser__display_name": "Michael Busch", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Open", "_JiraIssueChangeLogItem__to_str": "In Progress"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12471258", "_Jira_Issue_ChangeLog_History__created_time": "2007-02-27T16:55:20.725+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "2.1", "_JiraIssueChangeLogItem__to_str": null}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "2.2"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12474562", "_Jira_Issue_ChangeLog_History__created_time": "2007-03-08T04:24:14.530+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "michaelbusch", "_JiraUser__key": "michaelbusch", "_JiraUser__display_name": "Michael Busch", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Fixed"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "In Progress", "_JiraIssueChangeLogItem__to_str": "Resolved"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12505081", "_Jira_Issue_ChangeLog_History__created_time": "2007-06-19T08:14:48.951+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "michaelbusch", "_JiraUser__key": "michaelbusch", "_JiraUser__display_name": "Michael Busch", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13066686", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:25:08.797+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13092119", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T12:09:06.788+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16380238", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:04:17.119+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16934252", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T19:59:03.266+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 59829682.53, "_JiraIssue__close_time": 8913034.421, "_JiraIssue__contributors_number": 4, "_JiraIssue__num_of_files_changed": 5, "_JiraIssue__num_of_lines_changed": 53}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314515", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314515", "_JiraIssueData__issue_key": "LUCENE-365", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2005-03-27T07:24:14.000+0000", "_JiraIssueData__issue_description": "A recent profile of the new BooleanScorer2 showed that \nquite a bit of CPU time is spent in the advanceAfterCurrent method \nof DisjunctionScorer, and in the PriorityQueue of scorers that \nis used there. \n \nThis patch reduces the internal overhead of DisjunctionScorer \nto about 70% of the current one (ie. 30% saving in cpu time). \nIt also reduces the number of calls to the subscorers, but \nthat was not measured. \n \nTo get this, it was necessary to specialize the PriorityQueue \nfor a Scorer and to add move some code fragments from DisjunctionScorer \nto this specialized queue.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "[PATCH] Performance improvement to DisjunctionSumScorer", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-03-27T07:26:53.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14570)\nA priority queue specialised for use in DisjunctionSumScorer\n\nThis is in the org.apache.lucene.util package. It might\nbe better in the search package, but that is a matter of taste.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12322252", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12322252"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-03-27T07:28:50.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14571)\nDisjunctionSumScorer.java adapted to use a new queue of scorers\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12322253", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12322253"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-03-27T07:33:16.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14572)\nTestDisjunctionPerf1.java, some measurements on disjunctions of scorers\n\nThis is probably not needed in the trunk. It was used to measure\nthe differences in CPU time spent in BooleanScorer with and without\nskipTo and in DisjunctionScorer.\nIt also contains the results of some of the measurements done, and\nsome conclusions, all as comments.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12322254", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12322254"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-03-27T07:36:23.000+0000", "_JiraIssueComment__comment_body": "The priority queue is named ScorerDocQueue.java \n \nTestDisjunctionPerf1.java depends on the BooleanScorer.java posted \nin bug 33019 for correctly (hopefully) sorting the documents \nto allow skipTo(). \n \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12322255", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12322255"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-03-30T07:37:11.000+0000", "_JiraIssueComment__comment_body": "The profile that started this was generously provided by http://www.it.com . \n \nRegards, \nPaul Elschot (not otherwise related to www.it.com) \n \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12322256", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12322256"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-05-22T20:20:50.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=15117)\nAnother alternative to BooleanScorer using a Btree\n\nAs posted today on java-dev by Karl Wright.\n\nThe performance of the unbalanced btree could be compared\nto the specialised priority queue.\n\nThe code can also be simplified to the disjunction case,\nwhich boils down to adapting from 1.4.3 to the trunk.\n\nRegards,\nPaul Elschot\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12322257", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12322257"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-04-06T10:26:09.000+0000", "_JiraIssueComment__comment_body": "Nice Paul!\n\nI was just doing some performance work in the last week and noticed that DisjunctionSumScorer was taking up a fair amount of time (the queries consisted of a very large number of disjunctions).  I had planned on making a specialized heap for Scorers once I reviewed the code (until I ran across this bug).\n\nI'm personally only committing bug fixes for Lucene 2.0, but after that, I'll commit this.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12373454", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12373454"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-04-06T15:01:23.000+0000", "_JiraIssueComment__comment_body": "For the normal case with only one required subscorer this patch is ok., but for the case with\nmore required subscorers, a better implementation is possible.\n\nThis would use an array for the required number of subscorers just like ConjunctionScorer,\nand a scorer queue for the remaining ones.\nThis has the additional advantage that calling score() on the subscorers can be delayed until there\nare enough matching subscorers.\n\nAs LUCENE-413 seems to be fixed, and BooleanScorer2 can easily distinguish the cases of one or\nmore required subscorers,  (there are quite a few cases already there...) I think ScorerDocQueue\ncan go ahead whenever practical.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12373488", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12373488"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-04-06T15:28:48.000+0000", "_JiraIssueComment__comment_body": "For top level disjunctions, the original BooleanScorer could well be the best performing one.\nTo have this it would be necessary to implement score(HitCollector, maxDocNr) in\nDisjunctionSumScorer.\n(Yet another case for BooleanScorer2 ...)\n\n\n\n\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12373489", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12373489"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-05-16T03:12:40.000+0000", "_JiraIssueComment__comment_body": "See LUCENE-333 for other available implementations of disjunction.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12402404", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12402404"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-10-17T20:25:46.000+0000", "_JiraIssueComment__comment_body": "Paul, would it be possible to get a version with a license granted to the ASF?\nAlso, a single patch file would be preferred (I believe there have been changes, such as LUCENE-413)", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12443056", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12443056"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-10-17T20:48:54.000+0000", "_JiraIssueComment__comment_body": "The ASF licence is in the sources, this is from before jira.\nI'll add a patch with the ASF licence soon.\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12443062", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12443062"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-10-17T21:23:28.000+0000", "_JiraIssueComment__comment_body": "> The ASF licence is in the sources\n\nYeah, I was just trying to be safe.\nIt seems like there might be a small distinction between granting a license to the ASF, and including an ASF license in the header.  Does anyone know if it matters?", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12443077", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12443077"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-10-17T22:23:05.000+0000", "_JiraIssueComment__comment_body": "This patch obsoletes DisjunctionSumScorer and ScorerDocQueue as attached earlier.\nAll tests pass here.\n\nTestDisjunctionPerf1 and BooleanScorerBtree are for performance testing only.\nBooleanScorerBtree could be faster then this version of DisjunctionSumScorer\nfor a relatively small number of subscorers.\nI did not include these in the patch because TestDisjunctionPerf1 depends on\nolder versions of BooleanScorer with local names.\n\nRegards,\nPaul Elschot", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12443100", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12443100"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-10-18T00:56:14.000+0000", "_JiraIssueComment__comment_body": "Thanks Paul,\nThis patch seemed to revert the following:\nhttp://issues.apache.org/jira/secure/attachment/12324730/DisjunctionSumScorerPatch5.txt\n\nI assume it's unintentional so I've added back that part and committed.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12443135", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12443135"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-10-18T07:30:49.000+0000", "_JiraIssueComment__comment_body": "That was indeed not intentional, thanks for adding it back.\n\nTo my surprise the svn update applied cleanly on\nDisjunctionSumScorer.java here, and these tests still pass here:\n\nant -Dtestcase=\"TestBool*\" test\nant -Dtestcase=\"TestDis*\" test\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12443194", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12443194"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-02-27T18:10:32.592+0000", "_JiraIssueComment__comment_body": "Closing all issues that were resolved for 2.1.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12476254", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314515/comment/12476254"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312549", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--BooleanScorerBtree.java", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraAttachment__attachment_size": 12653, "_JiraAttachment__attachment_created": "2005-05-22T20:20:50.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312549/ASF.LICENSE.NOT.GRANTED--BooleanScorerBtree.java", "_JiraAttachment__attachment_mime_type": "text/x-java"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312547", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorer.java", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraAttachment__attachment_size": 8243, "_JiraAttachment__attachment_created": "2005-03-27T07:28:50.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312547/ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorer.java", "_JiraAttachment__attachment_mime_type": "text/x-java"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312546", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--ScorerDocQueue.java", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraAttachment__attachment_size": 6153, "_JiraAttachment__attachment_created": "2005-03-27T07:26:53.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312546/ASF.LICENSE.NOT.GRANTED--ScorerDocQueue.java", "_JiraAttachment__attachment_mime_type": "text/x-java"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312548", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--TestDisjunctionPerf1.java", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraAttachment__attachment_size": 8161, "_JiraAttachment__attachment_created": "2005-03-27T07:33:16.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312548/ASF.LICENSE.NOT.GRANTED--TestDisjunctionPerf1.java", "_JiraAttachment__attachment_mime_type": "text/x-java"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12343113", "_JiraAttachment__attachment_filename": "DisjunctionSumScorer20061017.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraAttachment__attachment_size": 16627, "_JiraAttachment__attachment_created": "2006-10-17T22:23:05.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12343113/DisjunctionSumScorer20061017.patch", "_JiraAttachment__attachment_mime_type": "text/x-patch"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321123", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:28:51.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "34193", "_JiraIssueChangeLogItem__to_str": "12314515"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12436638", "_Jira_Issue_ChangeLog_History__created_time": "2006-10-17T22:23:05.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "DisjunctionSumScorer20061017.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12436663", "_Jira_Issue_ChangeLog_History__created_time": "2006-10-18T00:56:42.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "2.1"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Lucene Developers", "_JiraIssueChangeLogItem__to_str": "Yonik Seeley"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Fixed"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Open", "_JiraIssueChangeLogItem__to_str": "Resolved"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12471287", "_Jira_Issue_ChangeLog_History__created_time": "2007-02-27T18:10:32.594+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13066690", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:25:09.365+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13092121", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T12:09:07.503+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13152910", "_Jira_Issue_ChangeLog_History__created_time": "2011-06-02T22:03:20.861+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "sarowe", "_JiraUser__key": "steve_rowe", "_JiraUser__display_name": "Steven Rowe", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=sarowe"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "CVS Nightly - Specify date in submission", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16380119", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:04:14.050+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16934169", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T19:59:01.972+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 49224748.0, "_JiraIssue__close_time": 11466830.594, "_JiraIssue__contributors_number": 3, "_JiraIssue__num_of_files_changed": 2, "_JiraIssue__num_of_lines_changed": 363}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314510", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314510", "_JiraIssueData__issue_key": "LUCENE-360", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "java-dev@lucene.apache.org", "_JiraUser__key": "java-dev@lucene.apache.org", "_JiraUser__display_name": "Lucene Developers", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=java-dev%40lucene.apache.org"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hari.mailinglists@gmail.com", "_JiraUser__key": "hari.mailinglists@gmail.com", "_JiraUser__display_name": "Hari Kodungallur", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hari.mailinglists%40gmail.com"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hari.mailinglists@gmail.com", "_JiraUser__key": "hari.mailinglists@gmail.com", "_JiraUser__display_name": "Hari Kodungallur", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hari.mailinglists%40gmail.com"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2005-03-12T09:43:02.000+0000", "_JiraIssueData__issue_description": "The Lucence test fails with the following error: (latest revision from SVN)\n\ncompile-test:\n   [mkdir] Created dir: /opt/lucene/lucene/build/classes/test\n   [javac] Compiling 79 source files to /opt/lucene/lucene/build/classes/test\n   [javac]\n/opt/lucene/lucene/src/test/org/apache/lucene/index/TermInfosTest.java:89:\ncannot resolve symbol\n   [javac] symbol  : constructor TermInfosWriter\n(org.apache.lucene.store.Directory,java.lang.String,org.apache.lucene.index.FieldInfos)\n   [javac] location: class org.apache.lucene.index.TermInfosWriter\n   [javac]     TermInfosWriter writer = new TermInfosWriter(store,\n\"words\", fis);\n\nI see that TermInfosWriter was changed two days back to add another\nargument (interval) to its constructor.\n\nMailing lists for Lucene do not seem to be responding (sending emails to\nsubscribe bounces back and also I do not see any mails after March 2nd being\narchived in either the user or dev lists). So I am using the bug database to\ninform the test failure and submit a simple patch that uses the value of 128\n(the default in the TermInfosWriter class) as interval in the test case.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "Test compilation error", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-03-12T09:44:32.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14469)\nPatch to fix the compile error in the TermInfosTest\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hari.mailinglists@gmail.com", "_JiraUser__key": "hari.mailinglists@gmail.com", "_JiraUser__display_name": "Hari Kodungallur", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hari.mailinglists%40gmail.com"}, "_JiraIssueComment__comment_id": "12322232", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314510/comment/12322232"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-03-12T11:44:54.000+0000", "_JiraIssueComment__comment_body": "Fixed.  I used IndexWriter.DEFAULT_TERM_INDEX_INTERVAL instead.  Thanks for the\nreport and patch.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueComment__comment_id": "12322233", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314510/comment/12322233"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312538", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--TermInfosTest.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hari.mailinglists@gmail.com", "_JiraUser__key": "hari.mailinglists@gmail.com", "_JiraUser__display_name": "Hari Kodungallur", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hari.mailinglists%40gmail.com"}, "_JiraAttachment__attachment_size": 624, "_JiraAttachment__attachment_created": "2005-03-12T09:44:32.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312538/ASF.LICENSE.NOT.GRANTED--TermInfosTest.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321118", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:28:48.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "33974", "_JiraIssueChangeLogItem__to_str": "12314510"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12402419", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-27T01:38:59.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13066677", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:25:07.484+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13092111", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T12:09:05.172+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13153001", "_Jira_Issue_ChangeLog_History__created_time": "2011-06-02T22:03:44.551+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "sarowe", "_JiraUser__key": "steve_rowe", "_JiraUser__display_name": "Steven Rowe", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=sarowe"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "CVS Nightly - Specify date in submission", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16380087", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:04:13.397+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16934144", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T19:59:01.593+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 0, "_JiraIssue__close_time": 38073357.0, "_JiraIssue__contributors_number": 3, "_JiraIssue__num_of_files_changed": 1, "_JiraIssue__num_of_lines_changed": 2}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314509", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314509", "_JiraIssueData__issue_key": "LUCENE-359", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "java-dev@lucene.apache.org", "_JiraUser__key": "java-dev@lucene.apache.org", "_JiraUser__display_name": "Lucene Developers", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=java-dev%40lucene.apache.org"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": null, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2005-03-08T07:17:21.000+0000", "_JiraIssueData__issue_description": "It should be possible for folks to set the index interval used when writing indexes.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "[PATCH] add term index interval accessors", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-03-08T07:19:12.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14421)\npatch to add accessors for term index interval\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12322230", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314509/comment/12322230"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-03-10T03:58:37.000+0000", "_JiraIssueComment__comment_body": "This patch has been applied.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12322231", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314509/comment/12322231"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312537", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--term-index-interval.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "", "_JiraUser__key": "", "_JiraUser__display_name": "", "_JiraUser__user_url": ""}, "_JiraAttachment__attachment_size": 8860, "_JiraAttachment__attachment_created": "2005-03-08T07:19:12.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312537/ASF.LICENSE.NOT.GRANTED--term-index-interval.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321117", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:28:46.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "33884", "_JiraIssueChangeLogItem__to_str": "12314509"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12402418", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-27T01:38:58.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12404140", "_Jira_Issue_ChangeLog_History__created_time": "2006-06-06T06:24:38.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "reporter", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Doug Cutting - obsolete", "_JiraIssueChangeLogItem__to_str": "Doug Cutting"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13064325", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:14:46.586+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13089521", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T11:59:18.292+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13153031", "_Jira_Issue_ChangeLog_History__created_time": "2011-06-02T22:04:25.168+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "sarowe", "_JiraUser__key": "steve_rowe", "_JiraUser__display_name": "Steven Rowe", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=sarowe"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "unspecified", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16380999", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:04:38.729+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16934474", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T19:59:06.431+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 0, "_JiraIssue__close_time": 38427697.0, "_JiraIssue__contributors_number": 4, "_JiraIssue__num_of_files_changed": 5, "_JiraIssue__num_of_lines_changed": 87}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314502", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314502", "_JiraIssueData__issue_key": "LUCENE-352", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hossman", "_JiraUser__key": "hossman", "_JiraUser__display_name": "Chris M. Hostetter", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hossman"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "miles@runtime-collective.com", "_JiraUser__key": "miles@runtime-collective.com", "_JiraUser__display_name": "Miles Barr", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=miles%40runtime-collective.com"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "miles@runtime-collective.com", "_JiraUser__key": "miles@runtime-collective.com", "_JiraUser__display_name": "Miles Barr", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=miles%40runtime-collective.com"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2005-02-24T18:52:11.000+0000", "_JiraIssueData__issue_description": "Overview description: \nI'm using the span query classes in Lucene to generate higher scores for \nsearch results where the search terms are closer together. In certain \nsituations I want to exclude terms from the span. When I attempt to exclude \nmore than one term I get an error. \n \nThe example query I'm using is:  \n \n'brighton AND tourism' -pier -contents \n \nI construct the query objects and the toString() version is: \n \nspanNot(spanNear([contents:brighton contents:tourism], 10, false), \nspanOr([contents:pier, contents:road])) \n  \n \nSteps to reproduce: \n1. Construct a SpanNearQuery (must have at least one term, but at least two \nmakes more sense) \n2. Construct a SpanOrQuery containing two or more terms \n3. Construct a SpanNotQuery to include the first query object and exclude the \nsecond (SpanOrQuery) \n4. Execute the search \n \n \nActual Results: \nA null pointer exception is thrown while generating the scores within the \nsearch. \n \nStack trace:  \njava.lang.NullPointerException   \n        at   \norg.apache.lucene.search.spans.SpanOrQuery$1.doc(SpanOrQuery.java:174)   \n        at   \norg.apache.lucene.search.spans.SpanNotQuery$1.next(SpanNotQuery.java:75)   \n        at org.apache.lucene.search.spans.SpanScorer.next(SpanScorer.java:50)   \n        at org.apache.lucene.search.Scorer.score(Scorer.java:37)   \n        at   \norg.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:92)   \n        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)   \n        at org.apache.lucene.search.Hits.<init>(Hits.java:43)   \n        at org.apache.lucene.search.Searcher.search(Searcher.java:33)   \n        at org.apache.lucene.search.Searcher.search(Searcher.java:27)   \n        at   \ncom.runtimecollective.search.LuceneSearch.search(LuceneSearch.java:362)   \n \n \nExpected Resuts: \nIt executes the search and results where the first search terms (near query) \nare close together but without the second terms (or query) appearing.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "[PATCH] NullPointerException when using nested SpanOrQuery in SpanNotQuery", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-25T01:23:29.000+0000", "_JiraIssueComment__comment_body": "The bug could be in SpanNotQuery.java, line 67, \nwhich sets moreExclude to true. \n \nCould you try with: \n \n        private boolean moreExclude = excludeSpans.next(); \n \ninstead? \n \nRegards, \nPaul Elschot \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12322207", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314502/comment/12322207"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-25T01:35:31.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14356)\nChange suggested by Paul Elschot\n\nChanging moreExlude from 'true' to 'excludeSpans.next()' did the trick.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "miles@runtime-collective.com", "_JiraUser__key": "miles@runtime-collective.com", "_JiraUser__display_name": "Miles Barr", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=miles%40runtime-collective.com"}, "_JiraIssueComment__comment_id": "12322208", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314502/comment/12322208"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-25T01:36:05.000+0000", "_JiraIssueComment__comment_body": "That should be 'moreExclude'. ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "miles@runtime-collective.com", "_JiraUser__key": "miles@runtime-collective.com", "_JiraUser__display_name": "Miles Barr", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=miles%40runtime-collective.com"}, "_JiraIssueComment__comment_id": "12322209", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314502/comment/12322209"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-25T02:17:35.000+0000", "_JiraIssueComment__comment_body": "(In reply to comment #2) \n> Created an attachment (id=14356) [edit] \n> Change suggested by Paul Elschot \n>  \n> Changing moreExlude from 'true' to 'excludeSpans.next()' did the trick. \n \nThat's good news. Thanks for the patch. \n \nWould it be possible for you to add a few test cases \nfor this? \n \norg.apache.lucune.search.spans.TestSpans in the src/test \ndirectory has some test examples. \n \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12322210", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314502/comment/12322210"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-25T02:49:36.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14357)\nAdditional test cases for when using a SpanOrQuery as the exclude option\n\nHere's a patch file for\n\ntest/src/org/apache/lucene/search/spans/TestBasics.java\n\nI added two test cases:\n\n1. When there's only one SpanQuery in the SpanOrQuery\n2. When there's more than one SpanQuery in the SpanOrQuery\n\nThere's also a commented out test for when you have an empty SpanOrQuery but\nthat currently throws an exception (complains that fields don't have the same\nname) when you try to run it. \n\nI only used regular SpanTermQuery objects within the SpanOrQuery. I assume the\nregular SpanOrQuery tests verify the SpanOrQuery works correctly with the\ndifferent span classes.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "miles@runtime-collective.com", "_JiraUser__key": "miles@runtime-collective.com", "_JiraUser__display_name": "Miles Barr", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=miles%40runtime-collective.com"}, "_JiraIssueComment__comment_id": "12322211", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314502/comment/12322211"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-25T03:15:16.000+0000", "_JiraIssueComment__comment_body": "Miles, \n \nThe commented test case in the patch to TestBasics passes an empty \nSpanOrQuery to a SpanNotQuery. That is probably not intended. \n \nRegards, \nPaul Elschot \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12322212", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314502/comment/12322212"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-25T03:19:20.000+0000", "_JiraIssueComment__comment_body": "(In reply to comment #6) \n> Miles,  \n>   \n> The commented test case in the patch to TestBasics passes an empty  \n> SpanOrQuery to a SpanNotQuery. That is probably not intended. \n \nI just reread the previous post, and it is intended. \nHowever, I don't get the point of passing an empty SpanOrQuery. \n \n>   \n> Regards,  \n> Paul Elschot  \n>   \n \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12322213", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314502/comment/12322213"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-25T18:30:13.000+0000", "_JiraIssueComment__comment_body": "My reasoning was that a poorly written parser might construct it with an empty \nSpanOrQuery and it should probably produce the same results as just the \ninclude query. But it would be incorrect to do so, so you'd expect an error.  \n \nIf you don't want to change the behaviour then just throw out the commented \ntest case. ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "miles@runtime-collective.com", "_JiraUser__key": "miles@runtime-collective.com", "_JiraUser__display_name": "Miles Barr", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=miles%40runtime-collective.com"}, "_JiraIssueComment__comment_id": "12322214", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314502/comment/12322214"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-03-25T03:34:45.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14558)\nPatch to TestBasics.java with the additional test cases except the discussed\none.\n\nI think this settles the discussion,\nRegards,\nPaul Elschot", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12322215", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314502/comment/12322215"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-07-20T04:17:46.000+0000", "_JiraIssueComment__comment_body": "The patch of 24 Feb 2005 has not yet been applied. \nThis bug might be reopened because of that, but that would be overdoing it. \n \nThe extra test code in the patch of 24 March 2005 seems ok to me. \n \nRegards, \nPaul Elschot \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12322216", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314502/comment/12322216"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-05-05T20:41:02.000+0000", "_JiraIssueComment__comment_body": "The fix in patch.txt is not in the trunk, and there was some recent discussion on\nwhat might be the same bug, so I'm reopening this.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12378033", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314502/comment/12378033"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-05-16T08:09:33.000+0000", "_JiraIssueComment__comment_body": "consolidated patch containing...\n\n* additional test methods in TestBasicsPatch2.txt\n* additional test methods from LUCENE-560\n* one line change to from patch.txt that makes these tests pass\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hossman", "_JiraUser__key": "hossman", "_JiraUser__display_name": "Chris M. Hostetter", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hossman"}, "_JiraIssueComment__comment_id": "12402469", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314502/comment/12402469"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-05-16T08:11:08.000+0000", "_JiraIssueComment__comment_body": "I think this bug is actualy simple enough that I can honestly say I understand it ... so unless anyone obejcts i'll commit \"LUCENE-352-consolidated-SpanNot-NPE.patch\" in a few days.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hossman", "_JiraUser__key": "hossman", "_JiraUser__display_name": "Chris M. Hostetter", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hossman"}, "_JiraIssueComment__comment_id": "12402470", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314502/comment/12402470"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-05-16T08:39:43.000+0000", "_JiraIssueComment__comment_body": "+1\nlooks fine.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12402474", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314502/comment/12402474"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-05-18T14:40:55.000+0000", "_JiraIssueComment__comment_body": "commited patch", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hossman", "_JiraUser__key": "hossman", "_JiraUser__display_name": "Chris M. Hostetter", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hossman"}, "_JiraIssueComment__comment_id": "12412303", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314502/comment/12412303"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312530", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--patch.txt", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "miles@runtime-collective.com", "_JiraUser__key": "miles@runtime-collective.com", "_JiraUser__display_name": "Miles Barr", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=miles%40runtime-collective.com"}, "_JiraAttachment__attachment_size": 484, "_JiraAttachment__attachment_created": "2005-02-25T01:35:31.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312530/ASF.LICENSE.NOT.GRANTED--patch.txt", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312531", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--TestBasics.java.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "miles@runtime-collective.com", "_JiraUser__key": "miles@runtime-collective.com", "_JiraUser__display_name": "Miles Barr", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=miles%40runtime-collective.com"}, "_JiraAttachment__attachment_size": 2765, "_JiraAttachment__attachment_created": "2005-02-25T02:49:36.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312531/ASF.LICENSE.NOT.GRANTED--TestBasics.java.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312532", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--TestBasicsPatch2.txt", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraAttachment__attachment_size": 2111, "_JiraAttachment__attachment_created": "2005-03-25T03:34:45.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312532/ASF.LICENSE.NOT.GRANTED--TestBasicsPatch2.txt", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12331945", "_JiraAttachment__attachment_filename": "LUCENE-352-consolidated-SpanNot-NPE.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hossman", "_JiraUser__key": "hossman", "_JiraUser__display_name": "Chris M. Hostetter", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hossman"}, "_JiraAttachment__attachment_size": 4564, "_JiraAttachment__attachment_created": "2006-05-16T08:09:33.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12331945/LUCENE-352-consolidated-SpanNot-NPE.patch", "_JiraAttachment__attachment_mime_type": "text/x-patch"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321110", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:28:40.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "33725", "_JiraIssueChangeLogItem__to_str": "12314502"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12378038", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-05T20:41:03.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Lucene Developers", "_JiraIssueChangeLogItem__to_str": null}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Fixed", "_JiraIssueChangeLogItem__to_str": null}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Reopened"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12392563", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-16T07:58:45.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hossman", "_JiraUser__key": "hossman", "_JiraUser__display_name": "Chris M. Hostetter", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hossman"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Link", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "This issue is duplicated by LUCENE-560"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12392566", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-16T08:09:34.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hossman", "_JiraUser__key": "hossman", "_JiraUser__display_name": "Chris M. Hostetter", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hossman"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "LUCENE-352-consolidated-SpanNot-NPE.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12392567", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-16T08:11:08.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hossman", "_JiraUser__key": "hossman", "_JiraUser__display_name": "Chris M. Hostetter", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hossman"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Hoss Man"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12401082", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-18T14:40:32.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hossman", "_JiraUser__key": "hossman", "_JiraUser__display_name": "Chris M. Hostetter", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hossman"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Id", "_JiraIssueChangeLogItem__field_type": "custom", "_JiraIssueChangeLogItem__from_str": "33725", "_JiraIssueChangeLogItem__to_str": ""}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "2.0"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12401084", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-18T14:40:55.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hossman", "_JiraUser__key": "hossman", "_JiraUser__display_name": "Chris M. Hostetter", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hossman"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Fixed"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Reopened", "_JiraIssueChangeLogItem__to_str": "Resolved"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12402118", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-27T01:32:59.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13066679", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:25:07.767+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13091284", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T12:06:17.138+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16378318", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:03:24.560+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16937799", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T19:59:55.607+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 38692124.0, "_JiraIssue__close_time": 730324.0, "_JiraIssue__contributors_number": 4, "_JiraIssue__num_of_files_changed": 2, "_JiraIssue__num_of_lines_changed": 76}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314496", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314496", "_JiraIssueData__issue_key": "LUCENE-346", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "java-dev@lucene.apache.org", "_JiraUser__key": "java-dev@lucene.apache.org", "_JiraUser__display_name": "Lucene Developers", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=java-dev%40lucene.apache.org"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": null, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2005-02-10T02:31:28.000+0000", "_JiraIssueData__issue_description": "Here's a patch that disables Similiarty.coord() in the scoring of most\nautomatically generated boolean queries.  The coord() score factor is\nappropriate when clauses are independently specified by a user, but is usually\nnot appropriate when clauses are generated automatically, e.g., by a fuzzy,\nwildcard or range query.  Matches on such automatically generated queries are\ncurrently penalized for not matching all terms.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "[PATCH] disable coord for generated BooleanQueries", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-10T02:32:49.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14232)\npatch to disable coord scoring in most generated boolean queries\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12322194", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314496/comment/12322194"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-10T02:39:44.000+0000", "_JiraIssueComment__comment_body": "Note that this does not yet fix MultiFieldQueryParser.  That should probably be\nmodified to generate something like, for the query \"t1 t2\" over fields f1, and\nf2, a query like:\n\n  (f1:t1 f2:t1) (f1:t2 f2:t2)\n\nin this case the innner queries should have coord disabled while the outer query\nshould not.  I think the best approach for MultiFieldQueryParser is to\nre-implement it as a subclass of QueryParser which overrides query creation\nmethods.  But that's a separate patch...", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12322195", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314496/comment/12322195"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-10T03:55:13.000+0000", "_JiraIssueComment__comment_body": "\"(f1:t1 f2:t1) (f1:t2 f2:t2)\" -- that's what MFQP in SVN does already, unless \nyou use the deprecated calls. Or am I missing something? \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "daniel.naber@t-online.de", "_JiraUser__key": "daniel.naber@t-online.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=daniel.naber%40t-online.de"}, "_JiraIssueComment__comment_id": "12322196", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314496/comment/12322196"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-10T06:39:42.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14236)\nnew version of patch\n\nYou're right.  I guess I was looking at the deprecated parse() method.\tSorry.\n\nI've updated the patch to include MFQP.\n\nShould we commit something like this?", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12322197", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314496/comment/12322197"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-03-21T01:28:29.000+0000", "_JiraIssueComment__comment_body": "The BooleanScorer2 can be simplified heavily when there is \nno coordination needed. Basically all makeCountingSumScorer.. \nmethods could be renamed to makeSumScorer.. and the \nprivate Coordinator class is unnecessary in that case. \nI'll start working on a non coordinating version, perhaps \nas a superclass of BooleanScorer2. \nMeanwhile the 'flat' coord method in Similarity will do fine. \n \nRegards, \nPaul Elschot \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12322198", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314496/comment/12322198"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-07-17T04:40:50.000+0000", "_JiraIssueComment__comment_body": "Seems this has been applied, so I'm closing this bug report.  \n  ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "lucenebugs@danielnaber.de", "_JiraUser__key": "lucenebugs@danielnaber.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=lucenebugs%40danielnaber.de"}, "_JiraIssueComment__comment_id": "12322199", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314496/comment/12322199"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312526", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--boolean-coord.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "", "_JiraUser__key": "", "_JiraUser__display_name": "", "_JiraUser__user_url": ""}, "_JiraAttachment__attachment_size": 13481, "_JiraAttachment__attachment_created": "2005-02-10T06:39:42.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312526/ASF.LICENSE.NOT.GRANTED--boolean-coord.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312525", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--boolean-coord.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "", "_JiraUser__key": "", "_JiraUser__display_name": "", "_JiraUser__user_url": ""}, "_JiraAttachment__attachment_size": 9498, "_JiraAttachment__attachment_created": "2005-02-10T02:32:49.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312525/ASF.LICENSE.NOT.GRANTED--boolean-coord.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321104", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:28:37.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "33472", "_JiraIssueChangeLogItem__to_str": "12314496"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12402408", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-27T01:38:53.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12404142", "_Jira_Issue_ChangeLog_History__created_time": "2006-06-06T06:24:38.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "reporter", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Doug Cutting - obsolete", "_JiraIssueChangeLogItem__to_str": "Doug Cutting"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13064320", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:14:45.781+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13089514", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T11:59:16.931+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13153092", "_Jira_Issue_ChangeLog_History__created_time": "2011-06-02T22:04:42.908+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "sarowe", "_JiraUser__key": "steve_rowe", "_JiraUser__display_name": "Steven Rowe", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=sarowe"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "unspecified", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16375849", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:02:11.947+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16936018", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T19:59:30.094+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 0, "_JiraIssue__close_time": 40691245.0, "_JiraIssue__contributors_number": 7, "_JiraIssue__num_of_files_changed": 12, "_JiraIssue__num_of_lines_changed": 164}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314487", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314487", "_JiraIssueData__issue_key": "LUCENE-337", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "java-dev@lucene.apache.org", "_JiraUser__key": "java-dev@lucene.apache.org", "_JiraUser__display_name": "Lucene Developers", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=java-dev%40lucene.apache.org"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rhett@detailedbalance.net", "_JiraUser__key": "rhett@detailedbalance.net", "_JiraUser__display_name": "Rhett Sutphin", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rhett%40detailedbalance.net"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rhett@detailedbalance.net", "_JiraUser__key": "rhett@detailedbalance.net", "_JiraUser__display_name": "Rhett Sutphin", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rhett%40detailedbalance.net"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2005-01-19T07:22:34.000+0000", "_JiraIssueData__issue_description": "A BooleanQuery including a PhrasePrefixQuery can cause an exception to be thrown\nfrom BooleanScorer#skipTo when the search is executed:  \n\njava.lang.UnsupportedOperationException\n\tat org.apache.lucene.search.BooleanScorer.skipTo(BooleanScorer.java:189)\n\tat org.apache.lucene.search.ConjunctionScorer.doNext(ConjunctionScorer.java:53)\n\tat org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:48)\n\tat org.apache.lucene.search.Scorer.score(Scorer.java:37)\n\tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:92)\n\tat org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)\n\tat org.apache.lucene.search.Hits.<init>(Hits.java:43)\n\tat org.apache.lucene.search.Searcher.search(Searcher.java:33)\n\tat org.apache.lucene.search.Searcher.search(Searcher.java:27)\n        ... (non-lucene code)\n\nThe problem appears to be that PhrasePrefixQuery optimizes itself into a\nBooleanQuery when it contains only one term.  However, it does this in the\ncreateWeight() method of its scorer instead of in the rewrite method of the\nquery itself.  Thus it bypasses the boolean typecheck when BooleanQuery is\ndeciding whether to use ConjunctionScorer or BooleanScorer, eventually resulting\nin the UOE.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "Combination of BooleanQuery and PhrasePrefixQuery can provoke UnsupportedOperationException", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-19T07:31:39.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14044)\nPatch to optimize in rewrite instead of createWeight\n\nThis patch moves the optimization from createWeight to rewrite.  This patch is\nagainst the current CVS even though my initial bug report was against the 1.4.3\nrelease.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rhett@detailedbalance.net", "_JiraUser__key": "rhett@detailedbalance.net", "_JiraUser__display_name": "Rhett Sutphin", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rhett%40detailedbalance.net"}, "_JiraIssueComment__comment_id": "12322156", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314487/comment/12322156"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-19T08:05:48.000+0000", "_JiraIssueComment__comment_body": "Thank you -- could you also attach a test case or a code snippet that triggers \nthe problem? \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "daniel.naber@t-online.de", "_JiraUser__key": "daniel.naber@t-online.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=daniel.naber%40t-online.de"}, "_JiraIssueComment__comment_id": "12322157", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314487/comment/12322157"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-19T08:58:03.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14045)\nA testcase that demonstrates the bug\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rhett@detailedbalance.net", "_JiraUser__key": "rhett@detailedbalance.net", "_JiraUser__display_name": "Rhett Sutphin", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rhett%40detailedbalance.net"}, "_JiraIssueComment__comment_id": "12322158", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314487/comment/12322158"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-19T09:00:34.000+0000", "_JiraIssueComment__comment_body": "Here's the stacktrace I get when running that test without the fix in place:\n\njava.lang.UnsupportedOperationException\n\tat org.apache.lucene.search.BooleanScorer.skipTo(BooleanScorer.java:189)\n\tat org.apache.lucene.search.ConjunctionScorer.doNext(ConjunctionScorer.java:53)\n\tat org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:48)\n\tat org.apache.lucene.search.Scorer.score(Scorer.java:37)\n\tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:92)\n\tat org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)\n\tat org.apache.lucene.search.Hits.<init>(Hits.java:43)\n\tat org.apache.lucene.search.Searcher.search(Searcher.java:33)\n\tat org.apache.lucene.search.Searcher.search(Searcher.java:27)\n\tat\norg.apache.lucene.search.TestBooleanQueryContainingPhrasePrefixQueries.testBooleanQueryContainingSingleTermPrefixQuery(TestBooleanQueryContainingPhrasePrefixQueries.java:57)\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rhett@detailedbalance.net", "_JiraUser__key": "rhett@detailedbalance.net", "_JiraUser__display_name": "Rhett Sutphin", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rhett%40detailedbalance.net"}, "_JiraIssueComment__comment_id": "12322159", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314487/comment/12322159"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-20T08:35:48.000+0000", "_JiraIssueComment__comment_body": "Thanks, I committed your patch and the testcase to our CVS.  ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "daniel.naber@t-online.de", "_JiraUser__key": "daniel.naber@t-online.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=daniel.naber%40t-online.de"}, "_JiraIssueComment__comment_id": "12322160", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314487/comment/12322160"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312508", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--33161.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rhett@detailedbalance.net", "_JiraUser__key": "rhett@detailedbalance.net", "_JiraUser__display_name": "Rhett Sutphin", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rhett%40detailedbalance.net"}, "_JiraAttachment__attachment_size": 1518, "_JiraAttachment__attachment_created": "2005-01-19T07:31:39.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312508/ASF.LICENSE.NOT.GRANTED--33161.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312509", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--TestBooleanQueryContainingPhrasePrefixQueries.java", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rhett@detailedbalance.net", "_JiraUser__key": "rhett@detailedbalance.net", "_JiraUser__display_name": "Rhett Sutphin", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rhett%40detailedbalance.net"}, "_JiraAttachment__attachment_size": 2525, "_JiraAttachment__attachment_created": "2005-01-19T08:58:03.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312509/ASF.LICENSE.NOT.GRANTED--TestBooleanQueryContainingPhrasePrefixQueries.java", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321095", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:28:22.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "33161", "_JiraIssueChangeLogItem__to_str": "12314487"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12402402", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-27T01:38:50.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13064306", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:14:43.061+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13089501", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T11:59:14.795+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16374941", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:01:43.861+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16935428", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T19:59:21.221+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 0, "_JiraIssue__close_time": 42574576.0, "_JiraIssue__contributors_number": 3, "_JiraIssue__num_of_files_changed": 1, "_JiraIssue__num_of_lines_changed": 25}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314479", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314479", "_JiraIssueData__issue_key": "LUCENE-329", "_JiraIssueData__priority": "Minor", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markharw00d@yahoo.co.uk", "_JiraUser__key": "markharw00d@yahoo.co.uk", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markharw00d%40yahoo.co.uk"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markharw00d@yahoo.co.uk", "_JiraUser__key": "markharw00d@yahoo.co.uk", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markharw00d%40yahoo.co.uk"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2005-01-05T06:34:19.000+0000", "_JiraIssueData__issue_description": "Queries which automatically produce multiple terms (wildcard, range, prefix, \nfuzzy etc)currently suffer from two problems:\n\n1) Scores for matching documents are significantly smaller than term queries \nbecause of the volume of terms introduced (A match on query Foo~ is 0.1 \nwhereas a match on query Foo is 1).\n2) The rarer forms of expanded terms are favoured over those of more common \nforms because of the IDF. When using Fuzzy queries for example, rare mis-\nspellings typically appear in results before the more common correct spellings.\n\n\nI will attach a patch that corrects the issues identified above by \n1) Overriding Similarity.coord to counteract the downplaying of scores \nintroduced by expanding terms.\n2) Taking the IDF factor of the most common form of expanded terms as the \nbasis of scoring all other expanded terms.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "Fuzzy query scoring issues", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-05T06:39:35.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=13887)\nFix for issues identified in this bug\n\nFix for the fuzzy scoring issues. Introduced new subclasses for BooleanQuery\nand TermQuery - ExpandedTermsQuery and ExpandedTermQuery respectively.\n\"Fuzzy\" queries (range, multiterm and fuzzy) now use these subclasses to make\nuse of their new Similarity implementations.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markharw00d@yahoo.co.uk", "_JiraUser__key": "markharw00d@yahoo.co.uk", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markharw00d%40yahoo.co.uk"}, "_JiraIssueComment__comment_id": "12322124", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12322124"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-09-23T04:45:14.000+0000", "_JiraIssueComment__comment_body": "This has been partially addressed. \n\nIssue 1, the coord factor has been rectified with the introduction of new constructor BooleanQuery(boolean disableCoord).\n\nIssue 2 (idf ranking) has not been addressed. ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraIssueComment__comment_id": "12330222", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12330222"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-10-05T15:41:49.000+0000", "_JiraIssueComment__comment_body": "Why isn't the patch implemented? My users are finding the current result of fuzzy searched not correct (as stated in the sample provided by Mark)\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mdissel", "_JiraUser__key": "mdissel", "_JiraUser__display_name": "Marco Dissel", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mdissel"}, "_JiraIssueComment__comment_id": "12440168", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12440168"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-10-05T18:50:30.000+0000", "_JiraIssueComment__comment_body": "I'm not very familiar with this issue, but a quick review of the patch and the existing comments lead me to believe that commiting it as is wouldn't be the cleanest way to deal with this problem:\n\n1) As Mark mentioned, a \"disableCoord\" option has been added to BooleanQuery which makes the ExpandedTermsQuery class in this patch unneccessary.  furthermore, the ExpandedTermsQuery class is (in my opinion) broken because it ignores any user specific Similarity completely (instead of just ignoring the coord factor)\n\n2) This patch does not include any test cases.\n\n\nFurthermore, this patch (assuming it does what it says it does) would fundementally alter the scoring of a FuzzyQuery -- the new scoring may seem like the right thing to do for you and for Mark, but without a larger concensus I'm a little worried that perhaps there are just as many FuzzyQuery users out there who are happy with the current behavior and would consider this change a bug.  So any \"fix\" for this should either be configurable, or have an overwelming amount of support that the change is the \"right\" thing to do.\n\n(The main issue seems to be that terms with low idf have a larger impact, and that results in rare mis-spellings getting higher scores -- but assuming \"clean data\" with no mis-spellings, scoring \"rare\" terms higher seems like the ideal behavior, correct?)\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hossman", "_JiraUser__key": "hossman", "_JiraUser__display_name": "Chris M. Hostetter", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hossman"}, "_JiraIssueComment__comment_id": "12440213", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12440213"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-10-05T19:10:12.000+0000", "_JiraIssueComment__comment_body": ">> but assuming \"clean data\" with no mis-spellings, scoring \"rare\" terms higher seems like the ideal behavior\n\nExact matched of a term should have a higher ranking then fuzzy matched terms.. at least that's the expected behaviour in my situation although i think it seems the most common behaviour.. We could also make this optionally, so that we don't affect the current scoring algorithm..\n\nps. i'm using the Lucene.NET port, so by changing/extending this behaviour in Java we (or George) can implement this at the .NET version as well.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mdissel", "_JiraUser__key": "mdissel", "_JiraUser__display_name": "Marco Dissel", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mdissel"}, "_JiraIssueComment__comment_id": "12440219", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12440219"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2008-11-13T02:37:50.505+0000", "_JiraIssueComment__comment_body": "Any consensus on this? We have the disableCoord and now the option to use a constant score mode for all the mult-term queries. Is that enough? What do you think Mark H? Does this patch still make sense?", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markrmiller@gmail.com", "_JiraUser__key": "markrmiller@gmail.com", "_JiraUser__display_name": "Mark Miller", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com"}, "_JiraIssueComment__comment_id": "12647168", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12647168"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2008-11-13T03:51:56.372+0000", "_JiraIssueComment__comment_body": "I've been using DisjunctionMaxQuery for term expansion. It seems to be a much more natural fit for this kind of problem. BooleanQuery never worked for me even with disableCoord.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "alexeylef", "_JiraUser__key": "alexeylef", "_JiraUser__display_name": "Alexey Lef", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=alexeylef"}, "_JiraIssueComment__comment_id": "12647175", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12647175"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2008-11-13T09:54:36.966+0000", "_JiraIssueComment__comment_body": "This patch goes back a while.\nContrib's FuzzyLikeThisQuery contains my current \"best practice\" for fuzzy matching but the logic is mixed in with code that also does \"LikeThis\" optimisations ie working out which input terms are the best to search on rather than using all input terms. This could usefully be lifted out and used elsewhere.\n\nThe fuzzy scoring logic takes the IDF of the input term and uses that as the IDF for scoring all expanded variants. If the input term does not exist then all variants are rewarded with their averaged IDF. Coord is disabled.\n\nUsing some form of IDF is typically desirable to balance a fuzzy query with other (potentially non fuzzy) clauses in the overall user query. Within a fuzzy query (or wildcard or other auto-expanding queries) however I see no reason to differentiate between the auto-expanded terms with different IDF values. In my view these auto-expand queries should generally use the same IDF for all variants and only reward them differently based on edit distance or what other distance metric is meaningful to that form of expansion (e.g. age range query on age 40 +/- 10 years could reward based on closeness to input term 40).\n\nCheers\nMark", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraIssueComment__comment_id": "12647243", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12647243"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-02-15T14:42:02.174+0000", "_JiraIssueComment__comment_body": "in my opinion this is now fixable in a very nice way.\n\nwe can make an alternative rewrite method for fuzzy that does just like TopTermsRewrite, except it creates a BooleanQuery of ConstantScore queries instead. this way the score will be equal to the boost.\n\nthen users could choose which one they want to use.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraIssueComment__comment_id": "12833812", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12833812"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-02-15T14:54:37.702+0000", "_JiraIssueComment__comment_body": "The problem with ignoring IDF completely is that it doesn't help balance partial matches where there is >1 fuzzy element in the query e.g.in a query  for John~ Patitucci~ I'm probably more interested in a partial match on the rarer surname than a partial match on the common forename. Obliterating IDF completely as a factor would lose this feature (available in FuzzyLikeThisQuery)\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraIssueComment__comment_id": "12833822", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12833822"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-02-15T15:00:11.319+0000", "_JiraIssueComment__comment_body": "bq. The problem with ignoring IDF completely is that it doesn't help balance partial matches where there is >1 fuzzy element in the query e.g.in a query for John~ Patitucci~ I'm probably more interested in a partial match on the rarer surname than a partial match on the common forename. Obliterating IDF completely as a factor would lose this feature (available in FuzzyLikeThisQuery)\n\nMark, it wouldn't lose any features. we simply provide another option, just like we do for other MultiTermQuery rewrites for other queries, so users can choose what they want to use. its just an additional choice.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraIssueComment__comment_id": "12833828", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12833828"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-02-15T15:01:37.096+0000", "_JiraIssueComment__comment_body": "here is a rough patch", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraIssueComment__comment_id": "12833829", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12833829"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-02-15T15:19:21.819+0000", "_JiraIssueComment__comment_body": "bq. I'm probably more interested in a partial match on the rarer surname than a partial match on the common forename. Obliterating IDF completely as a factor would lose this feature (available in FuzzyLikeThisQuery)\n\noh I see, this issue is really different from LUCENE-124 (they arent technically duplicates). I can move my patch there. You can still create a 'smarter' method here, it won't get in the way as now FuzzyQuery does not have a hardcoded rewrite method.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraIssueComment__comment_id": "12833835", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12833835"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-02-15T15:24:23.080+0000", "_JiraIssueComment__comment_body": "My \"best-practice\" suggestion isn't as simple as offering a choice between preserving IDF for all terms or not.\n\nInstead, it is a proposal that we should use the *input* term's IDF for scoring all variants of the same root term (or taking an average of variants where the root term does not exist).\n\nThis I feel preserves the benefits of keeping IDF as a factor (as in my John~ Patitucci~ balancing example) but also eliminating the side effects we see where a rare mis-spelling beats exact matches.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraIssueComment__comment_id": "12833840", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12833840"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-02-15T15:27:50.889+0000", "_JiraIssueComment__comment_body": "bq. My \"best-practice\" suggestion isn't as simple as offering a choice between preserving IDF for all terms or not. \n\nMark, right, my mistake. I will move this patch to LUCENE-124 so there is a simple alternative, you can proceed here with a smarter method... sorry i got confused amongst the different issues :)", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraIssueComment__comment_id": "12833841", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12833841"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-02-15T15:54:39.230+0000", "_JiraIssueComment__comment_body": "{quote}\nquery for John~ Patitucci~ I'm probably more interested in a partial match on the rarer surname than a partial match on the common forename. \n{quote}\n\n\nas a matter of fact, we have not only one frequency  to consider, rather two Term frequencies!\n\nconsider simpler case\nQuery term: \"Johan\" //would be High frequency term\ngives:\nFuzzy Expanded term1 \"Johana\" // High frequency\nFuzzy Expanded term2 \"Joahn\" // Low Freq\n\nI guess you would like to score the second term higher, meaning Lower frequency (higher IDF)... So far so good. \n\nNow turn it upside down and search for LF typo \"Joahn\"... in that case you would preffer HF Term \"Johan\" from expanded list to score higher...\n\nPoint being, this situation here is just not \"complete\" without taking both frequencies into consideration (Query Term and Expanded term). In my experience, some simple nonlinear hints based on these two freqs bring some easy precision points (HF-LF Pairs are much more likely to be typos that two HF-HF...  ). \n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "eksdev", "_JiraUser__key": "eksdev", "_JiraUser__display_name": "Eks Dev", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=eksdev"}, "_JiraIssueComment__comment_id": "12833860", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12833860"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-02-15T16:27:14.953+0000", "_JiraIssueComment__comment_body": "bq. consider simpler case\n\nOK - but we need to remember that it is important to achieve balance _across_ different fuzzy queries as well as terms _within_ the same fuzzy query.\nLet's stick to the terms within a single fuzzy query for now:\n\nbq. I guess you would like to score the second term higher, meaning Lower frequency\n\nNo, variant's frequency is not a deciding factor - only edit distance. \"Johana\" is similarity 0.6 while \"Joahn\" is 0.2 so I would favour result one  (although the this difference seems a little off in this case)\nThe basic assumption is that user's input is valid and not a typo (deriving spelling suggestions etc are a different topic and one we shouldnt try cover here). \nFuzzy matching can drag in all sorts of unqualified variants with massively different frequencies. Because we cannot control these discrepancies we should reward all these alternatives using the known factors we have to hand - the IDF of the user's supposedly valid input and the similarity measure of each variant compared to the input.\nWe could get fancy about probability of variants given the other input terms in the query but that feels like its straying into spell checker territory and ngrams etc.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraIssueComment__comment_id": "12833876", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12833876"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2011-01-27T10:30:18.644+0000", "_JiraIssueComment__comment_body": "Recent 3.x versions contain a new FuzzyQuery rewrite method (MultiTermQuery.TopTermsBoostOnlyBooleanQueryRewrite)  that uses a BooleanQuery with clauses of ConstantScoreQuery(TermQuery) usig the fuzzy boost. So term's idf is not used at all.\n\nThis should solve this problem.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "uschindler", "_JiraUser__key": "thetaphi", "_JiraUser__display_name": "Uwe Schindler", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=uschindler"}, "_JiraIssueComment__comment_id": "12987483", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12987483"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2011-01-27T14:38:44.176+0000", "_JiraIssueComment__comment_body": "bq.So term's idf is not used at all. This should solve this problem\n\nA sub-optimal  for the reasons I outlined earlier:\n\nbq. The problem with ignoring IDF completely is that it doesn't help balance partial matches where there is >1 fuzzy element in the query e.g.in a query for John~ Patitucci~ I'm probably more interested in a partial match on the rarer surname than a partial match on the common forename. Obliterating IDF completely as a factor would lose this feature (available in FuzzyLikeThisQuery)", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraIssueComment__comment_id": "12987585", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12987585"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2011-01-27T15:21:48.562+0000", "_JiraIssueComment__comment_body": "I agree with your complaints, but this issue was more about MTQ queries at all and strange scoring. So FuzzyQuery behaves now more as one would expect. We already have different variants of this query like FuzzyLikeThis that also solve this issue.\n\nThis is why I closed the issue.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "uschindler", "_JiraUser__key": "thetaphi", "_JiraUser__display_name": "Uwe Schindler", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=uschindler"}, "_JiraIssueComment__comment_id": "12987598", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12987598"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2011-01-27T15:22:20.062+0000", "_JiraIssueComment__comment_body": "Mark, I tend to agree, but at the same time I think you can safely implement\na RewriteMethod to do whatever you want? (e.g. apply the logic of FuzzyLikeThis)\n\nDoing something special with IDF is really specific to certain Similarities, for example\nyour Similarity might not use the traditional IDF at all, but something involving\ntotalTermFreq and sumOfTotalTermFreq (like language modelling).\n\nSo I am concerned about doing tricky things with the scoring system by default \nfor this query... we provide the simple options in core (Scoring, BoostOnly, etc) though.\n\nAn idea would be to factor the logic out of FuzzyLikeThisQuery into a FuzzyLikeThisRewriteMethod,\nso you could just call .setRewriteMethod on your fuzzy query and use it.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraIssueComment__comment_id": "12987600", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12987600"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2011-01-27T17:02:21.252+0000", "_JiraIssueComment__comment_body": "bq.  I think you can safely implement a RewriteMethod to do whatever you want?\n\nYep, I've got workarounds using FuzzyLikeThis that work for me but have long had a general unease about the \"out of the box\" experience for others.\n\nHowever things are certainly better than they were when this issue was first raised and the main concerns have been addressed.\n\nbq. So FuzzyQuery behaves now more as one would expect\n\nIs it worth explicitly stating those expectations? Mine would be based on these principles:\n1) IDF is commonly accepted as useful when ranking partial matches of queries with multiple optional clauses\n2) IDF doesn't stop being useful if one of those clauses just  happens to be a term flagged as \"fuzzy\".\n\nSo given a query:    rareWord~ OR commonWord~ \nI would expect an exact match on \"rareWord\" to rank higher than an exact match on \"commonWord\".\nI don't think the current implementation respects this.\n\n\n\n\n\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraIssueComment__comment_id": "12987650", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/12987650"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2011-03-30T15:50:29.178+0000", "_JiraIssueComment__comment_body": "Bulk close for 3.1", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gsingers", "_JiraUser__key": "gsingers", "_JiraUser__display_name": "Grant Ingersoll", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gsingers"}, "_JiraIssueComment__comment_id": "13013497", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/13013497"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2012-03-09T13:35:10.305+0000", "_JiraIssueComment__comment_body": "Why has this been closed ?", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ijabz", "_JiraUser__key": "ijabz", "_JiraUser__display_name": "Paul taylor", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ijabz"}, "_JiraIssueComment__comment_id": "13226066", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/13226066"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2015-05-05T12:39:27.455+0000", "_JiraIssueComment__comment_body": "New patch addressing this long-standing bug.\nAddresses the all-or-nothing choices of today where the default is a (poor) use of all IDF factors or a sub-optimal alternative of using a rewrite method with no IDF.\nThe patch includes:\n1) A new default FuzzyQuery rewrite method that balances IDF better\n2) Unit tests for single and multi-query behaviours\n\nAdditionally, this document offers more analysis based on quality tests on a slightly larger set of data not included here: https://docs.google.com/document/d/1KXhbUpD5GFyzNqfk3nocODOo7Upgpd5tmUQp4-OPwiM/edit#heading=h.2e8gdmdqf2m5\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraIssueComment__comment_id": "14528373", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/14528373"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2015-05-07T20:11:43.420+0000", "_JiraIssueComment__comment_body": "I like the patch. Maybe we should blend the total term freq just like we blend the doc freq so that it works too with a similarity that uses the ttf instead of the df?\n\nAlso it is the 2nd query (the other one is FuzzyLikeThis) where we need to hack a bit TermContext in order to decouple the computation of statistics from the registration of the term states. I'm wondering if we should improve TermContext to make it easier, eg.\n\n{code}\nIndex: lucene/core/src/java/org/apache/lucene/index/TermContext.java\n===================================================================\n--- lucene/core/src/java/org/apache/lucene/index/TermContext.java\t(revision 1678141)\n+++ lucene/core/src/java/org/apache/lucene/index/TermContext.java\t(working copy)\n@@ -117,16 +117,31 @@\n    * should be derived from a {@link IndexReaderContext}'s leaf ord.\n    */\n   public void register(TermState state, final int ord, final int docFreq, final long totalTermFreq) {\n+    register(state, ord);\n+    accumulateStatistics(docFreq, totalTermFreq);\n+  }\n+\n+  /**\n+   * Expert: Registers and associates a {@link TermState} with an leaf ordinal. The\n+   * leaf ordinal should be derived from a {@link IndexReaderContext}'s leaf ord.\n+   * On the contrary to {@link #register(TermState, int, int, long)} this method\n+   * does NOT update term statistics.\n+   */\n+  public void register(TermState state, final int ord) {\n     assert state != null : \"state must not be null\";\n     assert ord >= 0 && ord < states.length;\n     assert states[ord] == null : \"state for ord: \" + ord\n         + \" already registered\";\n+    states[ord] = state;\n+  }\n+\n+  /** Expert: Accumulate term statistics. */\n+  public void accumulateStatistics(final int docFreq, final long totalTermFreq) {\n     this.docFreq += docFreq;\n     if (this.totalTermFreq >= 0 && totalTermFreq >= 0)\n       this.totalTermFreq += totalTermFreq;\n     else\n       this.totalTermFreq = -1;\n-    states[ord] = state;\n   }\n \n   /**\n{code}", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jpountz", "_JiraUser__key": "jpountz", "_JiraUser__display_name": "Adrien Grand", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jpountz"}, "_JiraIssueComment__comment_id": "14533301", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/14533301"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2015-05-12T10:33:34.715+0000", "_JiraIssueComment__comment_body": "Switched to the TermContext.accumulateStatistics() method Adrien suggested for tweaking stats.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraIssueComment__comment_id": "14539629", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/14539629"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2015-05-12T15:43:55.550+0000", "_JiraIssueComment__comment_body": "It's not correct to do {{maxTtf = Math.max(ttf, maxTtf)}} because the ttf can sometimes be -1, so it would rather need to be something like {{maxTtf = ttf == -1 || maxTtf == -1 ? -1 : Math.max(ttf, maxTtf)}}.\n\nAlso I liked it better in the previous patch how you built a new TermContext instance instead of modifying the current one in place. Maybe you could add it back?", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jpountz", "_JiraUser__key": "jpountz", "_JiraUser__display_name": "Adrien Grand", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jpountz"}, "_JiraIssueComment__comment_id": "14540069", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/14540069"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2015-05-19T10:21:03.409+0000", "_JiraIssueComment__comment_body": "Updated following review comments (thanks, Adrien).\nAll tests passing on trunk.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraIssueComment__comment_id": "14550191", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/14550191"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2015-05-19T11:13:05.906+0000", "_JiraIssueComment__comment_body": "Last edits to remove unnecessary Math.max() tests. Added assertion around maxTTf expectations", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraIssueComment__comment_id": "14550242", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/14550242"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2015-05-19T11:52:08.926+0000", "_JiraIssueComment__comment_body": "Cut-and-paste error in last patch set df=0 and effects were undetected by unit tests.\nEnhanced unit test to detect error then fixed", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraIssueComment__comment_id": "14550291", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/14550291"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2015-05-19T12:12:54.701+0000", "_JiraIssueComment__comment_body": "+1 to this patch!", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jpountz", "_JiraUser__key": "jpountz", "_JiraUser__display_name": "Adrien Grand", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jpountz"}, "_JiraIssueComment__comment_id": "14550334", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/14550334"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2015-05-19T12:48:52.980+0000", "_JiraIssueComment__comment_body": "Thanks, I'll commit tomorrow if there's no objections.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraIssueComment__comment_id": "14550376", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/14550376"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2015-05-19T12:49:00.652+0000", "_JiraIssueComment__comment_body": "+1 to this patch. I like this approach and it seems scoring-system agnostic, which was my major issue with IDF-specific stuff. When committing, maybe rename adjustDF() since actually it adjusts all term-level stats?", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraIssueComment__comment_id": "14550377", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/14550377"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2015-05-20T11:08:34.326+0000", "_JiraIssueComment__comment_body": "Commit 1680522 from mharwood@apache.org in branch 'dev/trunk'\n[ https://svn.apache.org/r1680522 ]\n\nLUCENE-329: Fix FuzzyQuery defaults to rank exact matches highest", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jira-bot", "_JiraUser__key": "jira-bot", "_JiraUser__display_name": "ASF subversion and git services", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jira-bot"}, "_JiraIssueComment__comment_id": "14552134", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/14552134"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2015-05-20T12:51:24.563+0000", "_JiraIssueComment__comment_body": "Commit 1680548 from mharwood@apache.org in branch 'dev/branches/branch_5x'\n[ https://svn.apache.org/r1680548 ]\n\nLUCENE-329: Fix FuzzyQuery defaults to rank exact matches highest", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jira-bot", "_JiraUser__key": "jira-bot", "_JiraUser__display_name": "ASF subversion and git services", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jira-bot"}, "_JiraIssueComment__comment_id": "14552260", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/14552260"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2015-05-20T12:54:01.185+0000", "_JiraIssueComment__comment_body": "Committed to 5.x branch and trunk", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraIssueComment__comment_id": "14552265", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/14552265"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2015-08-26T13:06:04.176+0000", "_JiraIssueComment__comment_body": "Bulk close for 5.3.0 release", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "shalin", "_JiraUser__key": "shalinmangar", "_JiraUser__display_name": "Shalin Shekhar Mangar", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=shalin"}, "_JiraIssueComment__comment_id": "14713204", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314479/comment/14713204"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312489", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--patch.txt", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markharw00d@yahoo.co.uk", "_JiraUser__key": "markharw00d@yahoo.co.uk", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markharw00d%40yahoo.co.uk"}, "_JiraAttachment__attachment_size": 11164, "_JiraAttachment__attachment_created": "2005-01-05T06:39:35.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312489/ASF.LICENSE.NOT.GRANTED--patch.txt", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12733790", "_JiraAttachment__attachment_filename": "LUCENE-329.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraAttachment__attachment_size": 13189, "_JiraAttachment__attachment_created": "2015-05-19T11:52:08.914+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12733790/LUCENE-329.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12733772", "_JiraAttachment__attachment_filename": "LUCENE-329.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraAttachment__attachment_size": 13316, "_JiraAttachment__attachment_created": "2015-05-19T10:21:03.388+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12733772/LUCENE-329.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12732210", "_JiraAttachment__attachment_filename": "LUCENE-329.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraAttachment__attachment_size": 11982, "_JiraAttachment__attachment_created": "2015-05-12T10:33:34.704+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12732210/LUCENE-329.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12730488", "_JiraAttachment__attachment_filename": "LUCENE-329.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraAttachment__attachment_size": 11771, "_JiraAttachment__attachment_created": "2015-05-05T12:39:27.423+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12730488/LUCENE-329.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321087", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:28:15.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "32942", "_JiraIssueChangeLogItem__to_str": "12314479"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12557646", "_Jira_Issue_ChangeLog_History__created_time": "2007-12-31T13:53:00.382+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "michaelbusch", "_JiraUser__key": "michaelbusch", "_JiraUser__display_name": "Michael Busch", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "priority", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Major", "_JiraIssueChangeLogItem__to_str": "Minor"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12650781", "_Jira_Issue_ChangeLog_History__created_time": "2008-11-10T22:42:49.446+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markrmiller@gmail.com", "_JiraUser__key": "markrmiller@gmail.com", "_JiraUser__display_name": "Mark Miller", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Link", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "This issue is duplicated by LUCENE-124"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12650782", "_Jira_Issue_ChangeLog_History__created_time": "2008-11-10T22:43:38.041+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markrmiller@gmail.com", "_JiraUser__key": "markrmiller@gmail.com", "_JiraUser__display_name": "Mark Miller", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Link", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "This issue relates to LUCENE-1424"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12862370", "_Jira_Issue_ChangeLog_History__created_time": "2010-02-15T15:01:37.100+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "LUCENE-329.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12862376", "_Jira_Issue_ChangeLog_History__created_time": "2010-02-15T15:22:26.398+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "uschindler", "_JiraUser__key": "thetaphi", "_JiraUser__display_name": "Uwe Schindler", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=uschindler"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Lucene Developers", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12862380", "_Jira_Issue_ChangeLog_History__created_time": "2010-02-15T15:28:47.700+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "LUCENE-329.patch", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13035276", "_Jira_Issue_ChangeLog_History__created_time": "2011-01-27T10:30:18.712+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "uschindler", "_JiraUser__key": "thetaphi", "_JiraUser__display_name": "Uwe Schindler", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=uschindler"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "3.1"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "4.0"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Fixed"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Open", "_JiraIssueChangeLogItem__to_str": "Resolved"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13066316", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:23:59.689+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13091942", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T12:08:31.210+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13127195", "_Jira_Issue_ChangeLog_History__created_time": "2011-03-30T15:50:29.180+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gsingers", "_JiraUser__key": "gsingers", "_JiraUser__display_name": "Grant Ingersoll", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gsingers"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13153171", "_Jira_Issue_ChangeLog_History__created_time": "2011-06-02T22:05:34.863+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "sarowe", "_JiraUser__key": "steve_rowe", "_JiraUser__display_name": "Steven Rowe", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=sarowe"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "1.2"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "1.2rc5", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "14738528", "_Jira_Issue_ChangeLog_History__created_time": "2015-05-05T10:28:52.059+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jpountz", "_JiraUser__key": "jpountz", "_JiraUser__display_name": "Adrien Grand", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jpountz"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Mark Harwood"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Fixed", "_JiraIssueChangeLogItem__to_str": null}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Closed", "_JiraIssueChangeLogItem__to_str": "Reopened"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "14738624", "_Jira_Issue_ChangeLog_History__created_time": "2015-05-05T12:39:27.525+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "LUCENE-329.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "14738994", "_Jira_Issue_ChangeLog_History__created_time": "2015-05-05T13:51:14.737+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "5.x"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "4.0-ALPHA", "_JiraIssueChangeLogItem__to_str": null}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "3.1", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "14750972", "_Jira_Issue_ChangeLog_History__created_time": "2015-05-12T10:33:34.784+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "LUCENE-329.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "14762795", "_Jira_Issue_ChangeLog_History__created_time": "2015-05-19T10:21:03.544+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "LUCENE-329.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "14762841", "_Jira_Issue_ChangeLog_History__created_time": "2015-05-19T11:13:05.943+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "LUCENE-329.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "14762873", "_Jira_Issue_ChangeLog_History__created_time": "2015-05-19T11:49:01.713+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "LUCENE-329.patch", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "14762874", "_Jira_Issue_ChangeLog_History__created_time": "2015-05-19T11:52:08.976+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "LUCENE-329.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "14764888", "_Jira_Issue_ChangeLog_History__created_time": "2015-05-20T14:54:06.544+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jpountz", "_JiraUser__key": "jpountz", "_JiraUser__display_name": "Adrien Grand", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jpountz"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Trunk"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Fixed"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Reopened", "_JiraIssueChangeLogItem__to_str": "Resolved"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "14764899", "_Jira_Issue_ChangeLog_History__created_time": "2015-05-20T14:57:23.601+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jpountz", "_JiraUser__key": "jpountz", "_JiraUser__display_name": "Adrien Grand", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jpountz"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Link", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "This issue supercedes LUCENE-6476"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "14794790", "_Jira_Issue_ChangeLog_History__created_time": "2015-06-10T06:04:22.422+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "uschindler", "_JiraUser__key": "thetaphi", "_JiraUser__display_name": "Uwe Schindler", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=uschindler"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "5.3"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "5.x", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "14904644", "_Jira_Issue_ChangeLog_History__created_time": "2015-08-26T13:06:04.223+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "shalin", "_JiraUser__key": "shalinmangar", "_JiraUser__display_name": "Shalin Shekhar Mangar", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=shalin"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "15382101", "_Jira_Issue_ChangeLog_History__created_time": "2016-05-09T18:34:58.131+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hossman", "_JiraUser__key": "hossman", "_JiraUser__display_name": "Chris M. Hostetter", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hossman"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "6.0"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "master", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16376037", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:02:17.868+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16935884", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T19:59:28.080+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 197905284.66500002, "_JiraIssue__close_time": 8460717.679, "_JiraIssue__contributors_number": 13, "_JiraIssue__num_of_files_changed": 5, "_JiraIssue__num_of_lines_changed": 224}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314476", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314476", "_JiraIssueData__issue_key": "LUCENE-326", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "java-dev@lucene.apache.org", "_JiraUser__key": "java-dev@lucene.apache.org", "_JiraUser__display_name": "Lucene Developers", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=java-dev%40lucene.apache.org"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2004-12-27T07:36:45.000+0000", "_JiraIssueData__issue_description": "I'm re-opening a bug I logged previously. My previous bug report has \ndisappeared. \n\nIssue: IndexWriter.addIndexes results in java.lang.OutOfMemoryError for large \nmerges.\n\nUntil this writing, I've been merging successfully only through repetition, \ni.e. I keep repeating merges until a success. As my index size has grown, my \nsuccess rate has steadily declined. I've reached the point where merges now \nfail 100% of the time. I can't merge.\n\nMy tests indicate the threshold is ~30GB on P4/800MB VM with 6 indexes. I have \nrepeated my tests on many different machines (not machine dependent). I have \nrepeated my test using local and attached storage devices (not storage \ndependent).\n\nFor what its worth, I believe the exception occurs entirely during the optimize \nprocess which is called implicitly after the merge. I say this because each \ntime it appears the correct amount of bytes are written to the new index. Is it \npossible to decouple the merge and optimize processes?\n\n\nThe code snippet follows. I can send you the class file and 120GB data set. Let \nme know how you want it.\n\n>>>>> code sample >>>>>\n\nDirectory[] sources = new Directory[paths.length];\n...\n\nDirectory dest = FSDirectory.getDirectory( path, true);\nIndexWriter writer = new IndexWriter( dest, new TermAnalyzer( \nStopWords.SEARCH_MAP), true);\n\nwriter.addIndexes( sources);\nwriter.close();", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "IndexWriter.addIndexes results in java.lang.OutOfMemoryError", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-21T06:54:05.000+0000", "_JiraIssueComment__comment_body": "Your old bug didn't just disappear, it has been closed because you didn't \nreply to our suggestions. See the history here: \nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=30421 \nIf you can provide a test case, please attach it here. \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "daniel.naber@t-online.de", "_JiraUser__key": "daniel.naber@t-online.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=daniel.naber%40t-online.de"}, "_JiraIssueComment__comment_id": "12322076", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322076"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-21T10:48:49.000+0000", "_JiraIssueComment__comment_body": "\nSuggestion #1\n\n>>>I fixed a bug that left a SegmentReader open in addIndexes(IndexReader[] \nreaders)\n>>>and it also left obsolete index files undeleted.\n>>>But this could have hardly caused your memory problems.\n\n\tI'm running the current version of Lucene.\n\nSuggestion #2\n\n>>>The call to writer.optimize() isn't necessary\n\n\tThe call was removed. Please read my comment about the failure \nhappening after the new index is written\n\nSuggestion #3\n\n>>>please try with StandardAnaylzer to make sure the problem isn't in your \nTermanalyzer\n\t\n\tWith the StandardAnalyzer, the results are the same.\n\tQuestion: Is it acceptable to merge using a different analyzer than was \nused to index?\n\nSuggestion #4\n\n>>>please provide a test case. If you can provide a test case, please attach it \nhere. \n\t\n\tOK. It's just these five lines of code plus alot of data.\n\tI've offered before to send the data before, but its won't post as an \nemail attachment.\n\n\t>>>>> code \n\n\tDirectory[] sources = new Directory[paths.length];\n\t...\n\n\tDirectory dest = FSDirectory.getDirectory( path, true);\n\tIndexWriter writer = new IndexWriter( dest, new StandardAnalyzer(), \ntrue);\n\n\twriter.addIndexes( sources);\n\twriter.close();\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraIssueComment__comment_id": "12322077", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322077"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-22T03:32:16.000+0000", "_JiraIssueComment__comment_body": "You need to close the directory \"dest\" explicitly, not only the writer. Does \nthat make a difference? ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "daniel.naber@t-online.de", "_JiraUser__key": "daniel.naber@t-online.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=daniel.naber%40t-online.de"}, "_JiraIssueComment__comment_id": "12322078", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322078"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-23T09:28:22.000+0000", "_JiraIssueComment__comment_body": "I just executed the following test case in a 700M VM and had the same outcome. \nSee details below.\n\nIn this test case, the sum of the input directories was ~42G and the amount \nwritten to\n'dest' directory is ~41G. This pattern is reliably repeatable. That is, it \nlooks like the merge works,\nbut the failure happens at the very end.\n\nIf I open 'dest' directory and call docCount I get 0.\n\n>>>>>>>>> revised code >>>>>>>>>>>\n\n\t...\n\tDirectory dest = FSDirectory.getDirectory( destination, true);\n\n\tIndexWriter writer = new IndexWriter( dest, new StandardAnalyzer(), \ntrue);\n\twriter.addIndexes( sources);\n\n\tlog(\"here\"); //never prints to screen\n\n\twriter.close();\n\tdest.close();\n\n>>>>>>>>> inputs >>>>>>>>>>>\n\n6.3G    ./index0/index\n5.9G    ./index1/index\n6.0G    ./index2/index\n5.2G    ./index3/index\n5.4G    ./index4/index\n3.8G    ./index5/index\n4.0G    ./index6/index\n5.3G    ./index7/index\n\n>>>>>>>>> output on screen >>>>>>>>>>>\n\n>>> merging: ./index0/index\n>>> merging: ./index1/index\n>>> merging: ./index2/index\n>>> merging: ./index3/index\n>>> merging: ./index4/index\n>>> merging: ./index5/index\n>>> merging: ./index6/index\n>>> merging: ./index7/index\nException in thread \"main\" java.lang.OutOfMemoryError\n\n>>>>>>>>> destination directory stats >>>>>>>>>>>\n\n41G     ./merged.0000/index\n\n\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraIssueComment__comment_id": "12322079", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322079"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-24T02:23:01.000+0000", "_JiraIssueComment__comment_body": "There are two addIndexes() methods, one for IndexReaders and one for \ndirectories, does the problem occur with both? Does it also appear with \nsmaller indexes and a smaller JVM (I won't be able to reproduce problems if it \nrequires a 40 GB index)? Are you using Lucene 1.4.3? You will probably need to \nchange the Lucene code and add debug statements to see where the exception \noccurs. Also, are all indexes in the same format, i.e. compound or \nnon-compound? ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "daniel.naber@t-online.de", "_JiraUser__key": "daniel.naber@t-online.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=daniel.naber%40t-online.de"}, "_JiraIssueComment__comment_id": "12322080", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322080"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-24T08:50:15.000+0000", "_JiraIssueComment__comment_body": "I'm running the tests now. It may take several days. I will report back.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraIssueComment__comment_id": "12322081", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322081"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-24T13:33:54.000+0000", "_JiraIssueComment__comment_body": "Results of my next test:\n\nSame machine, same indexes, same size VM. If I reduce the sum of the inputs to \n< 30G the merge succeeds. If I add an additional index, bringing the total > \n30G the merge fails.\n\nI will continue with remaining tests tomorrow.\n\n>>>>>>>>> inputs >>>>>>>>>>>\n\n5.8G    ./index3\n5.9G    ./index4\n4.3G    ./index5\n4.4G    ./index6\n5.8G    ./index7\n\n>>>>>>>>> destination directory stats >>>>>>>>>>>\n\n>>> merging: /home/agense/raw/questions/index3/index\n>>> merging: /home/agense/raw/questions/index4/index\n>>> merging: /home/agense/raw/questions/index5/index\n>>> merging: /home/agense/raw/questions/index6/index\n>>> merging: /home/agense/raw/questions/index7/index\n\n>>>>>>>>> destination directory stats >>>>>>>>>>>\n\n26G     ./merged.0000\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraIssueComment__comment_id": "12322082", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322082"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-26T12:23:02.000+0000", "_JiraIssueComment__comment_body": "Results for the remainder of my testing:\n\nAll my indexes use the compound file format.\n\nSelecting random combinations of the test indexes, I am able to successfully \nmerge using both method signatures, as long as the sum of the inputs is less \nthan 30G.\n\nFor all attempts to merge all the indexes, using either method signature, I get \nthe out-of-memory condition.\n\nWhat is the next step?\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraIssueComment__comment_id": "12322083", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322083"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-26T12:47:26.000+0000", "_JiraIssueComment__comment_body": "Have you tried running your app under an profiler?  I suggest you try that and\nsee where the memory is being allocated.  If there is a bug in Lucene, this may\nhelp us narrow down the area we need to look at.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueComment__comment_id": "12322084", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322084"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-28T05:25:25.000+0000", "_JiraIssueComment__comment_body": ">>>Have you tried running your app under an profiler? ...\n\nI started to spend time looking at various profilers, but concluded that all I \ndo is make a call to addIndexes inside a jar file. From there, it's all Lucene.\n\nTo profile, I'd have to find and build a profiler; rebuild Lucene with \nprofiling tags; understand the Lucene call stack and logic; make sense of the \noutput; etc. This is, in effect, debugging Lucene. My understanding is this is \nthe purview of the Lucene team.\n\n>>>If there is a bug in Lucene...\n\nWhat is it about my test results that would lead you to conclude something \nother than a Lucene bug at this point? If there is more evidence I can provide, \nplease let me know what tests I can run. Can you replicate my results? \n\nThanks.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraIssueComment__comment_id": "12322085", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322085"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-28T05:36:09.000+0000", "_JiraIssueComment__comment_body": "How many fields and how many documents are in your index?\n\nCan you provide a stack trace from the OutOfMemoryException?  This would be very\nuseful.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12322086", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322086"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-30T07:46:10.000+0000", "_JiraIssueComment__comment_body": ">>>How many fields and how many documents are in your index?\n    \n7 million documents with 100 fields each\n\n>>>Can you provide a stack trace from the OutOfMemoryException?  \n\nThe code I've been testing is inside a try/catch block with print stack trace. \nThere is no trace. My experience has been that the stack doesn't print when out-\nof-memory exception is thrown (JVM 1.4.2)", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraIssueComment__comment_id": "12322087", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322087"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-01T02:59:54.000+0000", "_JiraIssueComment__comment_body": "Are the 100 fields all indexed, or are some only stored?  If indexed, 100 is a\nvery large number of indexed fields.  7M documents with 100 indexed fields could\nrequire 700MB when searching, since one byte per searched field per document of\nRAM is used to cache the norms for each field.  But that RAM is not required\nwhen indexing.  Merging an index, where you're having troubles, should not\nrequire much RAM.\n\nSince your problem only requires a 5-line program to demonstrate, and it only\nrequires the Lucene jar file, please create such a 5-line java program as a\nsingle file that depends only on the Lucene jar and demonstrate the problem with\nsomething like:\n\n  javac -classpath lucene.jar Test.java\n  java -classpath lucene.jar Test index1 index2 index3 ...\n\nTest.java should look something like:\n\nimport org.apache.lucene.index.IndexWriter;\npublic class Test {\n  public static void main(String[] paths) throws Exception {\n    Directory[] sources = new Directory[paths.length];\n    for (int i = 0; i < paths.length) {\n      sources[i] = FSDirectory.getDirectory(paths[i], false);\n    }\n    IndexWriter writer = \n      new IndexWriter(\"dest\", new StandardAnalyzer(), true);   \n    writer.addIndexes(sources);\n    writer.close();\n  }\n}\n\nOnce you have replicated the bug with such a program, please attach the program\nto this bug report.  This way we can be certain that there is nothing involved\nbut Lucene.\n\nNote that this code does not explicitly try to catch exceptions but rather lets\nthe JVM print a final stack trace if it exits in an exception.  That may work\nbetter.\n\nIf the problem still appears and we still don't get a stack trace then we can\ntry putting in log statements in SegmentMerger.java.\n\nThanks for your patience.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12322088", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322088"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-02T02:59:14.000+0000", "_JiraIssueComment__comment_body": ">>>>>>>>>>>> Code >>>>>>>>>>>>\n\nimport org.apache.lucene.index.IndexWriter;\nimport org.apache.lucene.store.Directory;\nimport org.apache.lucene.store.FSDirectory;\nimport org.apache.lucene.analysis.standard.StandardAnalyzer;\n\npublic class MergeTest\n{\n\tpublic static void main(String[] paths)\n\t\tthrows Exception\n\t{\n\t\tDirectory[] sources = new Directory[paths.length];\n\n\t\tfor (int i = 0; i < paths.length; i++)\n\t\t\tsources[i] = FSDirectory.getDirectory(paths[i], false);\n\n\t\tDirectory dest = FSDirectory.getDirectory( \"/home/dan/merged/\", \ntrue);\n\t\tIndexWriter writer = new IndexWriter(dest, new StandardAnalyzer\n(), true);\n\n\t\twriter.addIndexes(sources);\n\t\twriter.close();\n\t}\n}\n\n>>>>>>>>>>>> Inputs >>>>>>>>>>>>\n\n7.2G    index0\n7.0G    index1\n5.8G    index3\n5.8G    index4\n4.2G    index5\n5.3G    index6\n5.8G    index7\n6.0G    index8\n4.8G    index9\n52G     .\n\n>>>>>>>>>>>> Test Results >>>>>>>>>>>>\n\n#1 java -Xms700M -Xmx700M MergeTest index0 index1\n\tresult -> 13G success\n\n#2 java -Xms700M -Xmx700M MergeTest index0 index1 index3\n\tresult -> 18G success\n\n#3 java -Xms700M -Xmx700M MergeTest index0 index1 index3 index4\n\tresult -> 24G success\n\n#4 java -Xms700M -Xmx700M MergeTest index0 index1 index4 index5\n\tresult -> 22G success\n\n#5 java -Xms700M -Xmx700M MergeTest index0 index1 index3 index4 index5\n\tresult -> 27G Exception in thread \"main\" java.lang.OutOfMemoryError (no \nstack trace printed)\n\n#6 java -Xms700M -Xmx700M MergeTest index0 index1 index3 index4 index5\n\tresult -> 27G Exception in thread \"main\" java.lang.OutOfMemoryError (no \nstack trace printed)\n\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraIssueComment__comment_id": "12322089", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322089"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-02T03:06:02.000+0000", "_JiraIssueComment__comment_body": ">>>If indexed, 100 is a very large number of indexed fields.\n\nDoug, how are multi-value fields treated in calculating total fields? If I add \na field called \"link\" 18 times, is this considered 18 or 1?\n\nThanks.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraIssueComment__comment_id": "12322090", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322090"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-02T03:09:50.000+0000", "_JiraIssueComment__comment_body": "Thanks.\n\nCan you please attach the output of 'ls -lt /home/dan/merged/' after it fails? \nThat may indicate where it is dying.\n\nWhat does 'ulimit -c' print?  If you're not getting a stack trace perhaps we can\nget a core dump.  One can get stack traces from java core dumps.\n\nAlso, why do you specify a minimum heap size with -Xms700M, rather than just let\nthe heap grow to its maximum?  I have had troubles before specifying -Xms and\nhave never found it advantageous.  Can you also please try once without that option?\n\nThanks again,\n\nDoug\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12322091", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322091"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-02T03:11:41.000+0000", "_JiraIssueComment__comment_body": "The number of fields that I'm referring to is the number of unique field names\nthat are ever added as indexed.  So adding a field name multiple times to a\nsingle document will not change things.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12322092", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322092"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-02T05:58:13.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14155)\nls -lt on merged directory\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraIssueComment__comment_id": "12322093", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322093"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-02T06:14:13.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14156)\npatch to reduce memory requirements of segment merger\n\nOkay.  I see the problem.  You have over 159 indexed fields in over 5M\ndocuments, which, if norms are cached, requires over 700MB.\n\nI've attached a patch which fixes segment merging to not use cached access to\nthe norms.  Please try this and tell me how it works.\n\nYou will still have trouble searching this index in a 700MB JVM if you search\nall of the fields.\n\nDoug", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12322094", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322094"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-02T07:34:04.000+0000", "_JiraIssueComment__comment_body": "I will try the patch and report back.\n\n>>>You will still have trouble searching this index in a 700MB...\n\nYes. I'm testing a redesigned index now.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraIssueComment__comment_id": "12322095", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322095"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-02T11:22:22.000+0000", "_JiraIssueComment__comment_body": ">>>since one byte per searched field per document of RAM is used to cache the \nnorms for each field.\n\nHow does one programmatically flush the cache? I've been looking for such a \nmethod.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraIssueComment__comment_id": "12322096", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322096"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-04T02:05:25.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14172)\nSegmentMerger patch test results\n\nThe SegmentMerger patch is a success. Thanks for looking into this.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraIssueComment__comment_id": "12322097", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322097"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-05T04:29:09.000+0000", "_JiraIssueComment__comment_body": "Okay, the patch has been comitted.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12322098", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314476/comment/12322098"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312468", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--listing.txt", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraAttachment__attachment_size": 10763, "_JiraAttachment__attachment_created": "2005-02-02T05:58:13.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312468/ASF.LICENSE.NOT.GRANTED--listing.txt", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312470", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--lucene_test.txt", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ddreon1@yahoo.com", "_JiraUser__key": "ddreon1@yahoo.com", "_JiraUser__display_name": "dan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ddreon1%40yahoo.com"}, "_JiraAttachment__attachment_size": 1969, "_JiraAttachment__attachment_created": "2005-02-04T02:05:25.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312470/ASF.LICENSE.NOT.GRANTED--lucene_test.txt", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312469", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--merger.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "", "_JiraUser__key": "", "_JiraUser__display_name": "", "_JiraUser__user_url": ""}, "_JiraAttachment__attachment_size": 945, "_JiraAttachment__attachment_created": "2005-02-02T06:14:13.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312469/ASF.LICENSE.NOT.GRANTED--merger.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321084", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:28:09.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "32847", "_JiraIssueChangeLogItem__to_str": "12314476"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12402396", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-27T01:38:47.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13066713", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:25:13.158+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13091300", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T12:06:20.231+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16379718", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:04:04.071+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16933982", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T19:58:59.257+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 0, "_JiraIssue__close_time": 44560922.0, "_JiraIssue__contributors_number": 6, "_JiraIssue__num_of_files_changed": 1, "_JiraIssue__num_of_lines_changed": 3}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314474", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314474", "_JiraIssueData__issue_key": "LUCENE-324", "_JiraIssueData__priority": "Trivial", "_JiraIssueData__assignee": null, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "saturnism@gmail.com", "_JiraUser__key": "saturnism@gmail.com", "_JiraUser__display_name": "Ray Tsang", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=saturnism%40gmail.com"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "saturnism@gmail.com", "_JiraUser__key": "saturnism@gmail.com", "_JiraUser__display_name": "Ray Tsang", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=saturnism%40gmail.com"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2004-12-14T18:09:22.000+0000", "_JiraIssueData__issue_description": "Apparently, in ChineseTokenizer, offset should be decremented like bufferIndex\nwhen Character is OTHER_LETTER.  This directly affects startOffset and endOffset\nvalues.\n\nThis is critical to have Highlighter working correctly because Highlighter marks\nmatching text based on these offset values.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "org.apache.lucene.analysis.cn.ChineseTokenizer missing offset decrement", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-12-14T18:10:05.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=13749)\nPatch for ChineseTokenizer to correctly count offsets\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "saturnism@gmail.com", "_JiraUser__key": "saturnism@gmail.com", "_JiraUser__display_name": "Ray Tsang", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=saturnism%40gmail.com"}, "_JiraIssueComment__comment_id": "12322067", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314474/comment/12322067"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-12-15T08:13:20.000+0000", "_JiraIssueComment__comment_body": "Ray: is there a simple way you can show that this is indeed a needed fix?  Maybe\na short class that shows that offsets are wrong.\n\n\nLucene developers: can anyone confirm whether this is really needed it?  I don't\nuse ChineseTokenizer enough to know for sure if this is a good fix, or something\nthat will break the code.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueComment__comment_id": "12322068", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314474/comment/12322068"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-12-15T12:01:06.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=13758)\nTestcase that tests ChineseTokenizer and OTHER_LETTER offsets\n\nThe problem arises when OTHER_LETTER characters and the rest of the characters\nare mixed together.  When given a string \"a&#22825;b\", tokens and corresponding\noffsets should be the following:\na : (0, 1)\n&#22825; : (1, 2)\nb : (2, 3)", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "saturnism@gmail.com", "_JiraUser__key": "saturnism@gmail.com", "_JiraUser__display_name": "Ray Tsang", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=saturnism%40gmail.com"}, "_JiraIssueComment__comment_id": "12322069", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314474/comment/12322069"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-12-15T12:16:19.000+0000", "_JiraIssueComment__comment_body": "I haven't done a formal trace of the code yet, but I think it would make sense\nthat the offset should only be incremented if the character is pushed into the\nbuffer.  Current code, howerver, increments offset by default, regardless\nwhether the character is pushed into the buffer.\n\nIf that's the case, then there are more places that needs to be fixed.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "saturnism@gmail.com", "_JiraUser__key": "saturnism@gmail.com", "_JiraUser__display_name": "Ray Tsang", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=saturnism%40gmail.com"}, "_JiraIssueComment__comment_id": "12322070", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314474/comment/12322070"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-12-05T08:09:01.000+0000", "_JiraIssueComment__comment_body": "Ray - ???  (let's see if JIRA can handle Chinese :)  Sorry for the delay in applying this patch.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ehatcher", "_JiraUser__key": "ehatcher", "_JiraUser__display_name": "Erik Hatcher", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ehatcher"}, "_JiraIssueComment__comment_id": "12359264", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314474/comment/12359264"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312462", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--chinese_tokenizer-missing_offset.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "saturnism@gmail.com", "_JiraUser__key": "saturnism@gmail.com", "_JiraUser__display_name": "Ray Tsang", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=saturnism%40gmail.com"}, "_JiraAttachment__attachment_size": 646, "_JiraAttachment__attachment_created": "2004-12-14T18:10:05.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312462/ASF.LICENSE.NOT.GRANTED--chinese_tokenizer-missing_offset.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312463", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--ChineseTokenizerTest.java", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "saturnism@gmail.com", "_JiraUser__key": "saturnism@gmail.com", "_JiraUser__display_name": "Ray Tsang", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=saturnism%40gmail.com"}, "_JiraAttachment__attachment_size": 820, "_JiraAttachment__attachment_created": "2004-12-15T12:01:06.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312463/ASF.LICENSE.NOT.GRANTED--ChineseTokenizerTest.java", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321082", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:28:07.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "32687", "_JiraIssueChangeLogItem__to_str": "12314474"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12347704", "_Jira_Issue_ChangeLog_History__created_time": "2005-12-05T08:09:01.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ehatcher", "_JiraUser__key": "ehatcher", "_JiraUser__display_name": "Erik Hatcher", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ehatcher"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "1.9"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Lucene Developers", "_JiraIssueChangeLogItem__to_str": "Erik Hatcher"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Fixed"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Open", "_JiraIssueChangeLogItem__to_str": "Resolved"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12347705", "_Jira_Issue_ChangeLog_History__created_time": "2005-12-05T08:09:20.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "ehatcher", "_JiraUser__key": "ehatcher", "_JiraUser__display_name": "Erik Hatcher", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=ehatcher"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Erik Hatcher", "_JiraIssueChangeLogItem__to_str": null}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13064268", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:14:35.334+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13089473", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T11:59:10.251+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13153122", "_Jira_Issue_ChangeLog_History__created_time": "2011-06-02T22:04:51.458+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "sarowe", "_JiraUser__key": "steve_rowe", "_JiraUser__display_name": "Steven Rowe", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=sarowe"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "unspecified", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16375841", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:02:11.824+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16933129", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T19:58:48.936+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 30722379.0, "_JiraIssue__close_time": 19.0, "_JiraIssue__contributors_number": 3, "_JiraIssue__num_of_files_changed": 1, "_JiraIssue__num_of_lines_changed": 1}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314469", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314469", "_JiraIssueData__issue_key": "LUCENE-319", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "java-dev@lucene.apache.org", "_JiraUser__key": "java-dev@lucene.apache.org", "_JiraUser__display_name": "Lucene Developers", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=java-dev%40lucene.apache.org"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "alex+news@olmisoft.com", "_JiraUser__key": "alex+news@olmisoft.com", "_JiraUser__display_name": "Alexey Panchenko", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=alex%2Bnews%40olmisoft.com"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "alex+news@olmisoft.com", "_JiraUser__key": "alex+news@olmisoft.com", "_JiraUser__display_name": "Alexey Panchenko", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=alex%2Bnews%40olmisoft.com"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2004-12-01T21:18:04.000+0000", "_JiraIssueData__issue_description": "This patch fixes loosing of first matching document when BooleanQuery\nwith BooleanClause.Occur.SHOULD is added to another BooleanQuery.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "[PATCH] Loosing first matching document in BooleanQuery", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-12-01T21:21:56.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=13609)\nThe patch\n\n\"public boolean next()\" should not modify bucketTable.first when it founds\nmatching document, because it is modified in score().", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "alex+news@olmisoft.com", "_JiraUser__key": "alex+news@olmisoft.com", "_JiraUser__display_name": "Alexey Panchenko", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=alex%2Bnews%40olmisoft.com"}, "_JiraIssueComment__comment_id": "12322050", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314469/comment/12322050"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-12-01T21:22:56.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=13610)\nTest Case to demonstrate the bug\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "alex+news@olmisoft.com", "_JiraUser__key": "alex+news@olmisoft.com", "_JiraUser__display_name": "Alexey Panchenko", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=alex%2Bnews%40olmisoft.com"}, "_JiraIssueComment__comment_id": "12322051", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314469/comment/12322051"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-12-11T04:41:28.000+0000", "_JiraIssueComment__comment_body": "Thank you for the bug. However, I think that the patch is not correct.\nThe bug was introduced in the current CVS head by an optimization in\nBooleanScorer. It does not affect the current release. I tried to fix the\nbug. Seems to work. But I am not 100% sure. Another way to fix the bug would be\nto switch off the optimization by simply deleting score(HitCollector hc) and\nscore(HitCollector hc, int max) implementation from BooleanScorer. I tried\nthis and it works too.\n\nChristoph", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "goller@detego-software.de", "_JiraUser__key": "goller@detego-software.de", "_JiraUser__display_name": "Christoph Goller", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=goller%40detego-software.de"}, "_JiraIssueComment__comment_id": "12322052", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314469/comment/12322052"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312450", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--lucene.BooleanScorer.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "alex+news@olmisoft.com", "_JiraUser__key": "alex+news@olmisoft.com", "_JiraUser__display_name": "Alexey Panchenko", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=alex%2Bnews%40olmisoft.com"}, "_JiraAttachment__attachment_size": 1109, "_JiraAttachment__attachment_created": "2004-12-01T21:21:56.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312450/ASF.LICENSE.NOT.GRANTED--lucene.BooleanScorer.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312451", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--TestBooleanScorerBug.java", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "alex+news@olmisoft.com", "_JiraUser__key": "alex+news@olmisoft.com", "_JiraUser__display_name": "Alexey Panchenko", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=alex%2Bnews%40olmisoft.com"}, "_JiraAttachment__attachment_size": 2714, "_JiraAttachment__attachment_created": "2004-12-01T21:22:56.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312451/ASF.LICENSE.NOT.GRANTED--TestBooleanScorerBug.java", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321077", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:28:02.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "32467", "_JiraIssueChangeLogItem__to_str": "12314469"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12402395", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-27T01:38:46.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13064283", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:14:38.506+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13089482", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T11:59:11.672+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13152886", "_Jira_Issue_ChangeLog_History__created_time": "2011-06-02T22:03:13.897+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "sarowe", "_JiraUser__key": "steve_rowe", "_JiraUser__display_name": "Steven Rowe", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=sarowe"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "CVS Nightly - Specify date in submission", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16377844", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:03:12.333+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16937416", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T19:59:50.294+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 0, "_JiraIssue__close_time": 46758042.0, "_JiraIssue__contributors_number": 3, "_JiraIssue__num_of_files_changed": 1, "_JiraIssue__num_of_lines_changed": 2}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314445", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314445", "_JiraIssueData__issue_key": "LUCENE-295", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "java-dev@lucene.apache.org", "_JiraUser__key": "java-dev@lucene.apache.org", "_JiraUser__display_name": "Lucene Developers", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=java-dev%40lucene.apache.org"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "chuck@manawiz.com", "_JiraUser__key": "chuck@manawiz.com", "_JiraUser__display_name": "Chuck Williams", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=chuck%40manawiz.com"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "chuck@manawiz.com", "_JiraUser__key": "chuck@manawiz.com", "_JiraUser__display_name": "Chuck Williams", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=chuck%40manawiz.com"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2004-10-22T08:11:33.000+0000", "_JiraIssueData__issue_description": "When MultiSearcher invokes its subsearchers, it is the subsearchers' docFreq()\nthat is accessed by Similarity.docFreq().  This causes idf's to be computed\nlocal to each index rather than globally, which causes ranking across multiple\nindices to not be equivalent to ranking across the entire global collection.\n\nThe attached files (if I can figure out how to attach them) provide a potential\npartial solution for this.  They properly fix a simple test case, RankingTest,\nthat was provided by Daniel Naber.\n\nThe changes are:\n  1.  Searcher:  Add topmostSearcher() field with getter and setter to record\nthe outermost Searcher.  Default to this.\n  2.  MultiSearcher:  Pass down the topmostSearcher when creating the subsearchers.\n  3.  IndexSearcher:  Call Query.weight() everywhere with the topmostSearcher\ninstead of this.\n  4.  Query:  Provide a default implementation of Query.combine() so that\nMultiSearcher works with all queries.\n\nProblems or possible problems I see:\n  1.  This does not address the same issue with RemoteSearchable. \nRemoteSearchable is not a Searcher, nor can it be due to lack of multiple\ninheritance in Java, but Query.weight() requires a Searcher.  Perhaps\nQuery.weight() should be changed to take a Searchable, but this requires\nchanging many places and I suspect would break apps.\n  2.  There may be other places that topmostSearcher should be used instead of this.\n  3.  The default implementation for Query.combine() is a guess on my part - it\nworks for TermQuery.  It's fragile in that the default implementation will hide\nbugs caused by queries that inadvertently omit a more precise Query.combine()\nmethod.\n  4.  The prior comment on Query.combine() indicates that whoever wrote it was\nfully aware of this problem and so probably had another usage in mind, so the\nwhole issue may just be Daniel's usage in the test case.  It's not apparent to\nme, so I probably don't understand something.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "[PATCH] MultiSearcher problems with Similarity.docFreq()", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-10-22T08:15:01.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=13175)\nModified files for MultiSearcher / Similarity incompatibility\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "chuck@manawiz.com", "_JiraUser__key": "chuck@manawiz.com", "_JiraUser__display_name": "Chuck Williams", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=chuck%40manawiz.com"}, "_JiraIssueComment__comment_id": "12321963", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321963"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-10-23T01:58:40.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=13194)\nChuck's changes as a diff\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "daniel.naber@t-online.de", "_JiraUser__key": "daniel.naber@t-online.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=daniel.naber%40t-online.de"}, "_JiraIssueComment__comment_id": "12321964", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321964"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-10-23T02:00:22.000+0000", "_JiraIssueComment__comment_body": "Chuck, thanks for the files. I cannot judge if that's the correct/best way to \nfix the problem. I've attached a diff built from your new files so that \nsomeone will hopefully review your changes. ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "daniel.naber@t-online.de", "_JiraUser__key": "daniel.naber@t-online.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=daniel.naber%40t-online.de"}, "_JiraIssueComment__comment_id": "12321965", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321965"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-11-12T17:39:11.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=13413)\nPatch to MultiSearcher.java to correct idf calculation\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraIssueComment__comment_id": "12321966", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321966"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-11-12T17:55:04.000+0000", "_JiraIssueComment__comment_body": "Here is another patch to correct the idf calculation. This patch currently is\nkind of proof of concept (fixes Daniel Nabers test case), but not ready for\ncommitment, as it breaks ParallelMultiSearcher.java and several test cases. \n\nInstead of Chucks Williams patch, this one relies on a specialized Similarity\nobject which is passed to the searchers. This causes less changes (only\nMultiSearcher is affected), and IMHO fits better into Lucene's design, because\nSimilarity is responsible for idf calculation anyway, but the Searchers aren't.\n\nProblems:\n- The Similarity object can't be passed to RemoteSearchables, so the patch works\nonly for Searchers.\n- MultiSearcher.search() methods aren't thread-safe anymore. The only way to\nprovide the Searches with the new Similarity object is to use setSimilarity().\nThis causes *all* searches to use it, not only the search which is currently\nrunning.\n\nA better solution would be to add the Similarity object to the Query. While ther\ne is already a similarity attribute in the Query, there is no Method to set it,\nand also interaction with subqueries is unclear. Such a change would therefore\nrequire a major redesign of similarity handling. If we make Similarity\nserializable, then we could pass the object to RemoteSearchers too, as part of\nthe query. If I find time, I'll submit a complete patch in the future.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraIssueComment__comment_id": "12321967", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321967"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-11-15T21:24:32.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=13464)\nComplete patch to allow specification the Similarity on a query-by-query case\n\nThis is a followup on my patch/comment from 2004-11-12. The patch attached now\nis complete, i.e. everything compiles and no test case is broken by it.\nThe main idea is that a setSimilarity() method and a similarity attributed is\nadded to Query. If the similarity is not set, the query uses the Searcher's\nsimilarity as before. However, if one sets the Similarity on the query, this\none takes precedence.\nTo solve the MultiSearcher issue, I have provided two different Similarities:\n- MultiSimilarity delegates the docFreq() and maxDoc() calls to the\nMultiSearcher, thus retrieving the sum over all registered searchers.\nThis Similarity always 'gets it right', but obviously doesn't work with\nRemoteSearchables.\n- DfMapSimilarity analyses a query and caches all necessary docFreq values.\nThis Similarity is Serializable and therefore works with RemoteSearchables,\ntoo. However, it is not able to handle queries where the term set is not known\nbeforehand, e.g. wildcard queries.\n\nBoth problems mentioned in my previous comment (thread-safety and remote\nsearcher compatibility) are solved by this patch. All test cases work\nunchanged with the exception of one test case which had been tweaked\npreviously due to the incorrect MultiSearcher and now works as expected\n(TestSort.testNormalizedScores()).\n\nProblems:\n- DfMapSimilarity.collectDfs() contains a lot of ugly casts to Query\nsubclasses.\n  This could be avoided by adding another abstract method to Query, but it is\n  unclear if this is really the better solution.\n- In this patch the choice for DfMapSimilarity is hard-coded into\nMultiSearcher. This should be made configurable.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraIssueComment__comment_id": "12321968", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321968"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-01-05T07:49:23.000+0000", "_JiraIssueComment__comment_body": "*** Bug 32053 has been marked as a duplicate of this bug. ***", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "daniel.naber@t-online.de", "_JiraUser__key": "daniel.naber@t-online.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=daniel.naber%40t-online.de"}, "_JiraIssueComment__comment_id": "12321969", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321969"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-10T19:33:34.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14242)\nNew patch based on the discussion on lucene-dev (intermediate version)\n\nAccording to my understanding of our dev-lucene discussion Multisearcher should\nevaluate queries in the following way:\n1. rewrite queries using the Multisearch Similarity\n2. extract necessary terms\n3. collect idfs for these terms from the Searchables\n4. adjust query boosts according to collected idfs\n5. distribute re-written and re-boosted query to Searchables\n6. merge results\n\nThis patch implements all steps except 4, where it uses a modified Similarity\nclass instead. Thus it is fully functional, but not yet ready for commit.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraIssueComment__comment_id": "12321970", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321970"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-18T20:33:09.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14312)\nNew patch based on the discussion on lucene-dev (complete)\n\nThis is a complete version, from my point of view ready for prime time.\n\nNow a query can be 'frozen'. A frozen query always returns the most\nrecently created Weight when calling Query.weight().\n\nMultiSearcher query processing is now done in the following steps:\n   1. rewrite query\n   2. extract necessary terms\n   3. collect dfs for these terms from the Searchables\n   4. create query weights using aggregate dfs and *freeze query*.\n   5. distribute weighted and frozen query to Searchables\n   6. merge results\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraIssueComment__comment_id": "12321971", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321971"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-22T02:49:14.000+0000", "_JiraIssueComment__comment_body": "This looks good.  Thanks!\n\nA few comments:\n\nOrignally there was no Weight in Lucene, only Query and Scorer.  Weight was\nadded in order to make it so that searching did not modify a Query, so that a\nQuery instance could be reused.  Searcher-dependent state of the query is meant\nto reside in the Weight.  IndexReader dependent state resides in the Scorer. \nYour \"freezing\" a query violates this.  Can't we create the weight once in\nSearcher.search?\n\nCachedDfSource does not need to be public does it?\n\nWe need to think about back-compatibliity.  Folks have implementations of Query,\nWeight, Similarity and Scorer.  So, when a public API changes we need to\ndeprecate, not remove, old methods, and try hard to make the old version still\nwork.  So, for example, we need to figure out how to handle the case where folks\nhave implemented the old Similarity.idf() methods.\n\nYou no longer call Query.getSimilarity(Searcher).  That method permits queries\nto override the Searcher's Similarity implementation.  Is there a reason you do\nthis?  We should be computing DFs once for the whole query tree, but it should\nstill be possible to compute, e.g., IDFs independently per node, no?\n\nI also wonder if, instead of adding DocFreqSource we could instead still use the\nSearcher.  MultiSearcher could keep an LRU cache of total doc freqs, implemented\nwith LinkedHashMap, for the last few thousand search terms.  That would be a far\nless invasive change, and hence less likely to break folks.  Or am I missing\nsomething?\n\nSorry if I seem picky, but this is core stuff in Lucene and affects a lot of people.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12321972", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321972"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-23T00:33:00.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14344)\nNext version - sends weights instead of queries\n\nThanks for the valuable feedback which has resulted in this new version. Now\nthe query freezing approach is avoided by sending weights to the searchables\ninstead of queries. Thus queries are still resusable, but the Searchable\ninterface had to be extended. Also, previous API and behavior modifications\nhave been reverted as far as possible.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraIssueComment__comment_id": "12321973", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321973"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-02-23T03:17:20.000+0000", "_JiraIssueComment__comment_body": "This looks great to me!\n\n+1\n\nThanks again for patiently working through this rather extensive change.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12321974", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321974"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-05T11:31:57.000+0000", "_JiraIssueComment__comment_body": "I applied this patch (2005-02-22 version) locally, but it doesn't compile as is.\n It looks like I need to add \"throws IOException\" to\nBooleanQuery.BooleanWeight2.createWeight(Searcher) methods, and also to\nMultiPhraseQuery.createWeight(Searcher) method.\n\nIt looks like I also need to modify TermQuery.TermWeight and add a searcher\ndeclaration (private Searcher searcher;), plus the searcher assignment to the\nconstructor (this.searcher = searcher).\n\nAfter these 2-3 changes Lucene compile.  Are my changes OK?\n\nUnfortunately, unit tests fail in a few places, and it looks like all failures\nhave to do with RemoteSearchable.  Re-reading the comments in this bug entry, it\nlooks like this was a known issue at one point, but Wolf noted the following on\n2004-11-15:\n\n\"Both problems mentioned in my previous comment (thread-safety and remote\nsearcher compatibility) are solved by this patch. All test cases work\nunchanged with the exception of one test case which had been tweaked\npreviously due to the incorrect MultiSearcher and now works as expected\n(TestSort.testNormalizedScores()).\"\n\nThis sounds like tests involving RemoteSearchable should pass now.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueComment__comment_id": "12321975", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321975"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-05T11:50:20.000+0000", "_JiraIssueComment__comment_body": "Changing MultiSearcher to implement Serializable makes all unit tests pass again.\n\nI'll wait a bit more before committing this in order to give people time to comment.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueComment__comment_id": "12321976", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321976"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-06T01:03:34.000+0000", "_JiraIssueComment__comment_body": "(In reply to comment #13) \n> I applied this patch (2005-02-22 version) locally, but it doesn't compile as \nis. \n>  It looks like I need to add \"throws IOException\" to \n> BooleanQuery.BooleanWeight2.createWeight(Searcher) methods, and also to \n> MultiPhraseQuery.createWeight(Searcher) method. \n \nThat should be no problem for BooleanWeight2.createWeight(Searcher). \n \n> It looks like I also need to modify TermQuery.TermWeight and add a searcher \n> declaration (private Searcher searcher;), plus the searcher assignment to the \n> constructor (this.searcher = searcher). \n>  \n> After these 2-3 changes Lucene compile.  Are my changes OK? \n \nI think so. \n \nRegards, \nPaul Elschot \n \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12321977", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321977"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-06T01:16:45.000+0000", "_JiraIssueComment__comment_body": "I made these comments last night, but somehow they aren't here.  Sorry if a\nduplicate pops up in the wrong place somewhere...\n\nI don't think all of the changes are correct and feel we need Wolf to comment on\nthis as his message states that he ran the unit tests successfully on his code\nas submitted.  Specifically, it looks to me like:\n  1.  The additions of throws IOException to Weights are correct, and due to new\nWeights added in parallel to Wolf's work.\n  2.  I do not believe adding the searcher field back to TermWeight is correct.\n Wolf explicitly pulled this field out and replaced all references to it with\nreferences to similarity or idf.  What caused the field to be added back?\n  3.  Making MultiSearcher implement Serializable seems strange -- I don't\nunderstand why in the protocol this would be requried.  It does not seem right.\n\nChuck", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "chuck@manawiz.com", "_JiraUser__key": "chuck@manawiz.com", "_JiraUser__display_name": "Chuck Williams", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=chuck%40manawiz.com"}, "_JiraIssueComment__comment_id": "12321978", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321978"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-06T03:34:13.000+0000", "_JiraIssueComment__comment_body": "Here is what I think happened and, if so, the correct fix:\n  1.  MultiPhraseQuery and the new BooleanQuery were both added in parallel to\nWolf's work.  We now have a merge conflict.\n  2.  The addition of the throws IOException to these two classes is now\nrequired for Weights, and so the change is correct.\n  3.  The new protocol for Weight's is to NOT have a searcher field.  Instead,\nthey should keep a Similarity field.  Just like the other Weight's that Wolf's\npatch addresses, these two classes only use the searcher field to access the\nSimilarity and/or the idf.  MultiPhraseQuery, which needs the idf, already has\nan idf field.  So, identical to Wolf's other changes it is straightforward to\nmodify these two classes to eliminate the searcher field.\n  4.  Eliminating the searcher field will elimninate the need for MultiSearcher\nto be Serializable, therefore retracting that change.\n\nI think that's right, and that the best fix is too conform the new Weights to\nthe new protocol for MultiSearcher compatibility.  I've also sent a message\ndirectly to Wolf asking him to review this.\n\nChuck\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "chuck@manawiz.com", "_JiraUser__key": "chuck@manawiz.com", "_JiraUser__display_name": "Chuck Williams", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=chuck%40manawiz.com"}, "_JiraIssueComment__comment_id": "12321979", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321979"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-06T04:09:02.000+0000", "_JiraIssueComment__comment_body": "One more note on this.  I think conforming to the new Weight protocol, i.e.\neliminating the searcher field from BooleanWeight, BooleanWeight2, and\nMultiPhraseWeight, is quite important.  This is because the Weight is now sent\nto RemoteSearchables instead of the Query.  If Weights have a searcher field,\nthen this could be quite expensive.\n\nChuck\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "chuck@manawiz.com", "_JiraUser__key": "chuck@manawiz.com", "_JiraUser__display_name": "Chuck Williams", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=chuck%40manawiz.com"}, "_JiraIssueComment__comment_id": "12321980", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321980"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-06T06:49:00.000+0000", "_JiraIssueComment__comment_body": "(In reply to comment #17) \n> Here is what I think happened and, if so, the correct fix: \n>   1.  MultiPhraseQuery and the new BooleanQuery were both added in parallel \nto \n> Wolf's work.  We now have a merge conflict. \n>   2.  The addition of the throws IOException to these two classes is now \n> required for Weights, and so the change is correct. \n \nIt could well be that there is a conflict with the new BooleanQuery and \nBooleanScorer. Given the backward compatibility goal of this new code, I'd be \nhappy to resolve that possible conflict. \n \nOver the last months, I have kept all the changes to BooleanQuery/BooleanScorer \nin a local working copy, and I had only one or two conflicts. These were \nvery easy to resolve. Bugzilla works well in this respect: all changes have \nsome comments associated with them, and, from what I have read so far, \nthere are no conflicting intentions for the functionality of this code. \nSo, please go ahead as you see fit for the MultiSearcher. I think you  \ncan safely ignore evt. conflicts with new code for BooleanQuery/BooleanScorer. \n \nRegards, \nPaul Elschot ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "paul.elschot@xs4all.nl", "_JiraUser__key": "paul.elschot@xs4all.nl", "_JiraUser__display_name": "Paul Elschot", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=paul.elschot%40xs4all.nl"}, "_JiraIssueComment__comment_id": "12321981", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321981"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-07T01:41:26.000+0000", "_JiraIssueComment__comment_body": "Sorry for the late reply; I'm currently traveling and had no Internet access.\nChucks analysis is completely correct. Serializing a (Multi-)Searcher doesn't\nmake sense, instead the Similarity has to be passed with the weight.\n\nWhat I don't understand is why the patch failed. I checked the diff file again,\nand the necessary changes appear to be in it. For example, line 89 of the diff\ncontains the addition of 'throws IOException' to BooleanWeight2.createWeight(),\nand the corresponding change for MultiPhraseQueryWeight is on line 346. The\nchanges required for TermWeight are at starting at line 1187. Could you please\ncheck if everything went ok when applying the patch, by comparing manually to\nthe diff file when errors occur somewhere?", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraIssueComment__comment_id": "12321982", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321982"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-20T12:13:46.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14767)\nlocal diffs that I'll apply\n\nThis is what the final diff is like.  I'll apply it shortly.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueComment__comment_id": "12321983", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321983"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-20T13:01:45.000+0000", "_JiraIssueComment__comment_body": "Committed, unit tests pass.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueComment__comment_id": "12321984", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321984"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-22T17:08:05.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14784)\nAdditional patch for deprecation issue\n\nThis patch removes all references to deprecated methods in Searchable,\nand fixes some other minor issues.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraIssueComment__comment_id": "12321985", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321985"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-26T05:06:47.000+0000", "_JiraIssueComment__comment_body": "I am now confused by the changes in Searcher.java.  Why is sometimes\nquery.weight(Searcher) called and other times query.createWeight()?  The latter\nis meant only to only construct a Weight, and the former to construct and\ninitialize it.  Shouldn't it always be initialized?\n\nAlso, it was difficult to apply your patch.  It uses CRLF instead of LF, which\nconfuses patch on Linux.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12321986", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321986"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-26T16:34:50.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14841)\nAdditional patch for deprecation issue - corrected\n\nThis was just an oversight. I've replaced the remaining calls to query.weight()\nin Searcher with Searcher.createWeight() and corrected that method so that it\ncalls query.weight() now.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraIssueComment__comment_id": "12321987", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321987"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-27T04:30:32.000+0000", "_JiraIssueComment__comment_body": "I have applied the deprecation patch.\n\nThe solution to my patch difficulties was to use 'patch -l -F 4'.  This gets\naround the end-of-line issues.\n\nThanks again, Wolf!\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12321988", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321988"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-27T05:51:02.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14846)\n[PATCH] Fix to Query.combine() method and all specializations\n\nThis fixes the bugs in Query.combine() that were uncovered by the failing test\nin the Highlighter.  Only Query.combine() remains -- all overrides in\nBooleanQuery, RangeQuery, MultiTermQuery and PrefixQuery are deleted.  I\nbelieve this fix is correct, robust realtive to possible user Query\nimplementations, and generates optimal queries for at least the cases that are\nbuilt-in to Lucene (query rewriting of MultTermQuery's and RangeQuery's).  This\nis more robust relative to possible user Query implementations and covers more\noptimizations cases than the version I sent via email last night.  With this\npatch, all Lucene and Highlighter tests pass (with the exception of the buggy\nTestSort.testNormalizedScores() which should be fixed by Wolf's patch).\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "chuck@manawiz.com", "_JiraUser__key": "chuck@manawiz.com", "_JiraUser__display_name": "Chuck Williams", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=chuck%40manawiz.com"}, "_JiraIssueComment__comment_id": "12321989", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321989"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-27T19:03:13.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=14854)\nSlightly extended Fix to Query.combine()\n\nThis is an extension/modification of Chucks patch.\nBesides his changes, it contains more test cases (in TestMultiSearcherRanking)\nand minor additional modifications to make these tests work:\n- if the resulting query consists of only one clause, return that clause\n  directly instead of wrapping it into a BooleanQuery.\n- BooleanQuery.equals doesn't take clause order into account anymore \nI also have rewritten the loop logic of Query.combine to use a flag instead \nof a labeled break, but this is more a matter of taste.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraIssueComment__comment_id": "12321990", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321990"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-04-28T00:15:53.000+0000", "_JiraIssueComment__comment_body": "Wolf's revisions to my changes to Query.combine() look fine.  The single-query\noptimization is good -- my oversight to have not included it originally.  I\ndon't believe either of the other two changes is necessary, but they are correct:\n  1.  Using a flag instead of the labelled loop is a matter of style as Wolf\nsays, and it's a little less efficent (the biggest effect could be remedied by\none more if (splittable) to avoid unnecessarily copying the clauses of a\nBooleanQuery where coord is not disabled).\n  2.  Changing BooleanQuery equality to be independent of clause order is\nsemantically correct, although again it is a little less efficient.  It's only\npurpose is to stop a false-negative in the new tests.\n\nRegarding additional test cases, it would be helpful to add the cases I was\nconcerned about, which are situations where a query can rewrite into different\nkinds of fundamental queries depending on the reader.  I believe the only case\nwhere this occurs with the built-in queries is with MultiTermQuery's and\nRangeQuery's (where the rewrite depends on how many query clauses are generated\nby each reader), and we have covered those cases.  The coord testing in\nQuery.combine() is designed to handle the case where some query rewrites into a\ndifferent kind of BooleanQuery (e.g., an AND), in some readers and not others. \nNothing tests this at present.  A single-term BooleanQuery OR could rewrite into\na BooleanQuery AND, but this would be independent of reader.\n\nMany additional optimizations could be added.  It seems redundant to have\noptimizations here and in the rewrite mechanism.  Since we are down to just\nQuery.combine(), only called from one place, I think a better fix is to change\nMultiSearcher to pass the reader as well.  Then Query.combine() could construct\nthe straightforward BooleanQuery and rewrite it.  All the optimizations would\nthen go into a single place, the rewrite methods.  Wolf, what do you think of\nthat approach?\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "chuck@manawiz.com", "_JiraUser__key": "chuck@manawiz.com", "_JiraUser__display_name": "Chuck Williams", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=chuck%40manawiz.com"}, "_JiraIssueComment__comment_id": "12321991", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321991"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-06-21T16:44:30.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=15481)\nUpdated fix to Query.combine()\n\nThis is a slightly updated version of my previous patch, taking Chucks comments\ninto account and based on the current HEAD.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraIssueComment__comment_id": "12321992", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321992"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-06-21T16:46:12.000+0000", "_JiraIssueComment__comment_body": "*** Bug 35241 has been marked as a duplicate of this bug. ***", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraIssueComment__comment_id": "12321993", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321993"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-06-22T06:08:33.000+0000", "_JiraIssueComment__comment_body": "There might be one corner case that your change in equals doesn't get right \n(not tested): a query \"a b a\" (i.e. one clause occuring twice -- doesn't make \nmuch sense, but has an influence on the result order) would equal \"a b b\", \nwouldn't it? Is that a problem? \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "lucenebugs@danielnaber.de", "_JiraUser__key": "lucenebugs@danielnaber.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=lucenebugs%40danielnaber.de"}, "_JiraIssueComment__comment_id": "12321994", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321994"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-06-22T18:12:00.000+0000", "_JiraIssueComment__comment_body": "I've started a separate thread on BooleanQuery semantics on the dev mailing\nlist. You could still apply the patch and omit the change to\nBooleanQuery.equals(). This just leads to warning outputs in\nTestMultiSearcherRanking.checkQuery(), and if you want to avoid these, simply\ndelete the last 10 lines of TestMultiSearcherRanking.checkQuery(). They contain\nan additional, not really necessary test.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraIssueComment__comment_id": "12321995", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321995"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-06-24T05:57:02.000+0000", "_JiraIssueComment__comment_body": "Thanks, I've committed your patch, leaving out the change to equals() and not \nremoving mergeBooleanQueries() as that is a public method which someone might \nbe using. Also, could you please check if the test case is correct now? I \ncouldn't apply that part of your patch cleanly and something might have been \nbroken. \n ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "lucenebugs@danielnaber.de", "_JiraUser__key": "lucenebugs@danielnaber.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=lucenebugs%40danielnaber.de"}, "_JiraIssueComment__comment_id": "12321996", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321996"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-06-24T16:37:45.000+0000", "_JiraIssueComment__comment_body": "Thanks for applying the patch. Everything is fine from my point of view, except\none minor issue: You are right that Query.mergeBooleanQueries() can't just be\nremoved, as it is public. However, I doubt if it is still useful. Could we mark\nit as deprecated, and suggest a call to super.combine() as replacement?", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraIssueComment__comment_id": "12321997", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321997"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-06-25T07:23:34.000+0000", "_JiraIssueComment__comment_body": "Should combine() maybe be static? Then deprecating mergeBooleanQueries() seems \nto be the obvious way to go. ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "lucenebugs@danielnaber.de", "_JiraUser__key": "lucenebugs@danielnaber.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=lucenebugs%40danielnaber.de"}, "_JiraIssueComment__comment_id": "12321998", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321998"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-07-05T03:10:49.000+0000", "_JiraIssueComment__comment_body": "Okay, I see that there are errors in the test cases if one makes \nQuery.combine() static. But does it have to be public? ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "lucenebugs@danielnaber.de", "_JiraUser__key": "lucenebugs@danielnaber.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=lucenebugs%40danielnaber.de"}, "_JiraIssueComment__comment_id": "12321999", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12321999"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-07-05T18:19:43.000+0000", "_JiraIssueComment__comment_body": "Currently, Query.combine() is only called by MultiSearcher and a Highlighter\ntest case. If I understand it correctly, the intent of this method was to give\nQuery subclasses a hook to modify the combination algorithm. This hook is not\nused by Query subclasses which are part of the Lucene distribution, and I would\nbe very astonished if someone used it outside of Lucene. Such an implementation\nwould break now anyway, because BooleanQueries are only handled correctly in the\nnew Query.combine[] method, but not in mergeBooleanQueries() (which\nreimplementations are supposed to call as helper method).\n\nIMHO the cleanest solution would be to remove combine() and\nmergeBooleanQueries() from Query and move the query combination logic to\nMultiSearcher. Of course, that would be an incompatible API change, and we can't\nbe 100% sure that no one needs the combine() hook. On the other hand, we now\nhave useless code in mergeBooleanQueries() and code which is only used by\nMultiSearcher in combine(), and that also isn't a desirable situation.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraIssueComment__comment_id": "12322000", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314445/comment/12322000"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312429", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--combine-fix.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "chuck@manawiz.com", "_JiraUser__key": "chuck@manawiz.com", "_JiraUser__display_name": "Chuck Williams", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=chuck%40manawiz.com"}, "_JiraAttachment__attachment_size": 5043, "_JiraAttachment__attachment_created": "2005-04-27T05:51:02.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312429/ASF.LICENSE.NOT.GRANTED--combine-fix.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312430", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--combine-fix2.diff", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraAttachment__attachment_size": 13645, "_JiraAttachment__attachment_created": "2005-04-27T19:03:13.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312430/ASF.LICENSE.NOT.GRANTED--combine-fix2.diff", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312431", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--multisearcher.diff", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraAttachment__attachment_size": 14139, "_JiraAttachment__attachment_created": "2005-06-21T16:44:30.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312431/ASF.LICENSE.NOT.GRANTED--multisearcher.diff", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312423", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--multisearcher.diff", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraAttachment__attachment_size": 20988, "_JiraAttachment__attachment_created": "2005-02-10T19:33:34.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312423/ASF.LICENSE.NOT.GRANTED--multisearcher.diff", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312421", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--multisearcher.diff", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraAttachment__attachment_size": 1882, "_JiraAttachment__attachment_created": "2004-11-12T17:39:11.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312421/ASF.LICENSE.NOT.GRANTED--multisearcher.diff", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312422", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--multisearcher2.diff", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraAttachment__attachment_size": 13060, "_JiraAttachment__attachment_created": "2004-11-15T21:24:32.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312422/ASF.LICENSE.NOT.GRANTED--multisearcher2.diff", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312424", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-18b.diff", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraAttachment__attachment_size": 47715, "_JiraAttachment__attachment_created": "2005-02-18T20:33:09.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312424/ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-18b.diff", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312425", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-22c.diff", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraAttachment__attachment_size": 49186, "_JiraAttachment__attachment_created": "2005-02-23T00:33:00.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312425/ASF.LICENSE.NOT.GRANTED--multisearcher-2005-02-22c.diff", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312426", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--multisearcher-2005-04-19.diff", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraAttachment__attachment_size": 44491, "_JiraAttachment__attachment_created": "2005-04-20T12:13:46.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312426/ASF.LICENSE.NOT.GRANTED--multisearcher-2005-04-19.diff", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312428", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraAttachment__attachment_size": 19714, "_JiraAttachment__attachment_created": "2005-04-26T16:34:50.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312428/ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312427", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "siberski@learninglab.de", "_JiraUser__key": "siberski@learninglab.de", "_JiraUser__display_name": "Wolf Siberski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=siberski%40learninglab.de"}, "_JiraAttachment__attachment_size": 20212, "_JiraAttachment__attachment_created": "2005-04-22T17:08:05.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312427/ASF.LICENSE.NOT.GRANTED--multisearcher-deprecation.diff", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312419", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--MultiSearcherPatch.zip", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "chuck@manawiz.com", "_JiraUser__key": "chuck@manawiz.com", "_JiraUser__display_name": "Chuck Williams", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=chuck%40manawiz.com"}, "_JiraAttachment__attachment_size": 7193, "_JiraAttachment__attachment_created": "2004-10-22T08:15:01.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312419/ASF.LICENSE.NOT.GRANTED--MultiSearcherPatch.zip", "_JiraAttachment__attachment_mime_type": "application/octet-stream"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312420", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--patch.diff", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "daniel.naber@t-online.de", "_JiraUser__key": "daniel.naber@t-online.de", "_JiraUser__display_name": "Daniel Naber", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=daniel.naber%40t-online.de"}, "_JiraAttachment__attachment_size": 3647, "_JiraAttachment__attachment_created": "2004-10-23T01:58:40.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312420/ASF.LICENSE.NOT.GRANTED--patch.diff", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321053", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:27:38.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "31841", "_JiraIssueChangeLogItem__to_str": "12314445"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12402381", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-27T01:38:39.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13064270", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:14:35.656+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13091080", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T12:05:34.252+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16378107", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:03:19.052+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16937643", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T19:59:53.515+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 0, "_JiraIssue__close_time": 50261226.0, "_JiraIssue__contributors_number": 8, "_JiraIssue__num_of_files_changed": 5, "_JiraIssue__num_of_lines_changed": 80}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314419", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314419", "_JiraIssueData__issue_key": "LUCENE-269", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "java-dev@lucene.apache.org", "_JiraUser__key": "java-dev@lucene.apache.org", "_JiraUser__display_name": "Lucene Developers", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=java-dev%40lucene.apache.org"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "konradk@ca.ibm.com", "_JiraUser__key": "konradk@ca.ibm.com", "_JiraUser__display_name": "Konrad Kolosowski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=konradk%40ca.ibm.com"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "konradk@ca.ibm.com", "_JiraUser__key": "konradk@ca.ibm.com", "_JiraUser__display_name": "Konrad Kolosowski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=konradk%40ca.ibm.com"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2004-08-25T19:55:39.000+0000", "_JiraIssueData__issue_description": "We are using HTML parser for parsing English and other NL documents in \nEclipse.  Post Lucene 1.2 there has been a regression in the parser.  \nCharacters coming from Reader (obtained from getReader() ) are corrupted.  \nOnly the characters that can be encoded using the default machine encoding go \nthrough correctly.  For example, parsing Chinese document on an English \nmachine results with all characters, except the few English words, corrupted.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "[PATCH] demo HTML parser corrupts foreign characters", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-08-25T19:57:01.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=12520)\nHTMLParser.jj.patch - simple fix for the problem.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "konradk@ca.ibm.com", "_JiraUser__key": "konradk@ca.ibm.com", "_JiraUser__display_name": "Konrad Kolosowski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=konradk%40ca.ibm.com"}, "_JiraIssueComment__comment_id": "12321870", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314419/comment/12321870"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-09-02T20:11:09.000+0000", "_JiraIssueComment__comment_body": "I applied your patch. Thanks a lot. I hadn't thought about this when\nchanging HTMLParser a couple of months ago.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "goller@detego-software.de", "_JiraUser__key": "goller@detego-software.de", "_JiraUser__display_name": "Christoph Goller", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=goller%40detego-software.de"}, "_JiraIssueComment__comment_id": "12321871", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314419/comment/12321871"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312385", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--HTMLParser.jj.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "konradk@ca.ibm.com", "_JiraUser__key": "konradk@ca.ibm.com", "_JiraUser__display_name": "Konrad Kolosowski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=konradk%40ca.ibm.com"}, "_JiraAttachment__attachment_size": 837, "_JiraAttachment__attachment_created": "2004-08-25T19:57:01.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312385/ASF.LICENSE.NOT.GRANTED--HTMLParser.jj.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321027", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:27:11.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "30844", "_JiraIssueChangeLogItem__to_str": "12314419"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12402361", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-27T01:38:08.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13064217", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:14:25.035+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13089428", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T11:58:59.938+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16379601", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:04:00.853+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16939007", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T20:00:12.898+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 0, "_JiraIssue__close_time": 55230149.0, "_JiraIssue__contributors_number": 3, "_JiraIssue__num_of_files_changed": 1, "_JiraIssue__num_of_lines_changed": 4}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314407", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314407", "_JiraIssueData__issue_key": "LUCENE-257", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "java-dev@lucene.apache.org", "_JiraUser__key": "java-dev@lucene.apache.org", "_JiraUser__display_name": "Lucene Developers", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=java-dev%40lucene.apache.org"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "bernhard.messer@intrafind.de", "_JiraUser__key": "bernhard.messer@intrafind.de", "_JiraUser__display_name": "Bernhard Messer", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=bernhard.messer%40intrafind.de"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "bernhard.messer@intrafind.de", "_JiraUser__key": "bernhard.messer@intrafind.de", "_JiraUser__display_name": "Bernhard Messer", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=bernhard.messer%40intrafind.de"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2004-08-08T19:12:00.000+0000", "_JiraIssueData__issue_description": "TermVectorReader.close() closes all streams now under any condition. If an\nexcpetion is catched, it is remembered an thrown when all streams are closed.\nUnnecessary variable assignment removed from code. \nFix typo in TermVectorReader and TermVectorWriter.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "[PATCH] TermVectorReader and TermVectorWriter", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-08-08T19:13:06.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=12361)\ncvs diff TermVectorsReader\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "bernhard.messer@intrafind.de", "_JiraUser__key": "bernhard.messer@intrafind.de", "_JiraUser__display_name": "Bernhard Messer", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=bernhard.messer%40intrafind.de"}, "_JiraIssueComment__comment_id": "12321801", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314407/comment/12321801"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-08-08T19:13:30.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=12362)\ncvs diff TermVectorsWriter\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "bernhard.messer@intrafind.de", "_JiraUser__key": "bernhard.messer@intrafind.de", "_JiraUser__display_name": "Bernhard Messer", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=bernhard.messer%40intrafind.de"}, "_JiraIssueComment__comment_id": "12321802", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314407/comment/12321802"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-08-18T03:55:00.000+0000", "_JiraIssueComment__comment_body": "Thanks for the patch.  Applied and committed.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueComment__comment_id": "12321803", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314407/comment/12321803"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-08-18T04:11:22.000+0000", "_JiraIssueComment__comment_body": "Uhh, you just done broke the darn thing! :-) If you are going to remove the \nunused variable, you need to not write out the complementary variable in \nTermVectorsWriter, otherwise it won't work together.  If you notice in the \nassignment, it is doing a readVInt", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "grant_ingersoll@yahoo.com", "_JiraUser__key": "grant_ingersoll@yahoo.com", "_JiraUser__display_name": "Grant Ingersoll", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=grant_ingersoll%40yahoo.com"}, "_JiraIssueComment__comment_id": "12321804", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314407/comment/12321804"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-08-18T04:13:38.000+0000", "_JiraIssueComment__comment_body": "Hold on to that thought.  I am doing an update.  I did my test before update, \nthen merged, then did my test.  It passed then failed.  Will investigate \ntomorrow.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "grant_ingersoll@yahoo.com", "_JiraUser__key": "grant_ingersoll@yahoo.com", "_JiraUser__display_name": "Grant Ingersoll", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=grant_ingersoll%40yahoo.com"}, "_JiraIssueComment__comment_id": "12321805", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314407/comment/12321805"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-08-18T04:15:04.000+0000", "_JiraIssueComment__comment_body": "Please let me know tomorrow.  All unit tests still pass.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueComment__comment_id": "12321806", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314407/comment/12321806"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-08-18T22:13:35.000+0000", "_JiraIssueComment__comment_body": "Grant,\n\nsorry but i don't see a reason why the code should be broken. Please have a\nclose look again, i just removed the variable assignement but left the readVInt\nstatement. So the InputStream seeks to right position and everything should be ok.\n\nregards\nbernhard", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "bernhard.messer@intrafind.de", "_JiraUser__key": "bernhard.messer@intrafind.de", "_JiraUser__display_name": "Bernhard Messer", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=bernhard.messer%40intrafind.de"}, "_JiraIssueComment__comment_id": "12321807", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314407/comment/12321807"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-08-19T01:45:51.000+0000", "_JiraIssueComment__comment_body": "I agree.  Sorry for the alarm.  I think it is an error introduced by some \nother change to the code.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "grant_ingersoll@yahoo.com", "_JiraUser__key": "grant_ingersoll@yahoo.com", "_JiraUser__display_name": "Grant Ingersoll", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=grant_ingersoll%40yahoo.com"}, "_JiraIssueComment__comment_id": "12321808", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314407/comment/12321808"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312372", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--TermVectorsReader.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "bernhard.messer@intrafind.de", "_JiraUser__key": "bernhard.messer@intrafind.de", "_JiraUser__display_name": "Bernhard Messer", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=bernhard.messer%40intrafind.de"}, "_JiraAttachment__attachment_size": 2482, "_JiraAttachment__attachment_created": "2004-08-08T19:13:06.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312372/ASF.LICENSE.NOT.GRANTED--TermVectorsReader.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312373", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--TermVectorsWriter.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "bernhard.messer@intrafind.de", "_JiraUser__key": "bernhard.messer@intrafind.de", "_JiraUser__display_name": "Bernhard Messer", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=bernhard.messer%40intrafind.de"}, "_JiraAttachment__attachment_size": 1367, "_JiraAttachment__attachment_created": "2004-08-08T19:13:30.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312373/ASF.LICENSE.NOT.GRANTED--TermVectorsWriter.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321015", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:26:59.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "30522", "_JiraIssueChangeLogItem__to_str": "12314407"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12402352", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-27T01:38:03.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13064204", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:14:22.144+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13089417", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T11:58:57.767+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16379549", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:03:59.603+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16938909", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T20:00:11.504+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 0, "_JiraIssue__close_time": 56701563.0, "_JiraIssue__contributors_number": 4, "_JiraIssue__num_of_files_changed": 1, "_JiraIssue__num_of_lines_changed": 19}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314402", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314402", "_JiraIssueData__issue_key": "LUCENE-252", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": null, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "amordo@infosciences.com", "_JiraUser__key": "amordo@infosciences.com", "_JiraUser__display_name": "Aviran Mordo", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=amordo%40infosciences.com"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "amordo@infosciences.com", "_JiraUser__key": "amordo@infosciences.com", "_JiraUser__display_name": "Aviran Mordo", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=amordo%40infosciences.com"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2004-07-29T20:54:15.000+0000", "_JiraIssueData__issue_description": "When you set s SortField to a Text field which gets tokenized\nFieldCacheImpl uses the term to do the sort, but then sorting is off \nespecially with more then one word in the field. I think it is much \nmore logical to sort by field's string value if the sort field is Tokenized and\nstored. This way you'll get the CORRECT sort order", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "[PATCH] Problem with Sort logic on tokenized fields", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-07-29T20:55:50.000+0000", "_JiraIssueComment__comment_body": "I wrote a fix that uses the stored values in case the sort field is tokenized\nand stored, or uses the Terms in case the sort field is a Keyword.\n\nIndex: FieldCacheImpl.java\n===================================================================\nRCS file:\n/home/cvspublic/jakarta-lucene/src/java/org/apache/lucene/search/FieldCacheImpl.java,v\nretrieving revision 1.3\ndiff -u -r1.3 FieldCacheImpl.java\n--- FieldCacheImpl.java\t21 Jul 2004 19:05:46 -0000\t1.3\n+++ FieldCacheImpl.java\t28 Jul 2004 17:45:41 -0000\n@@ -25,6 +25,8 @@\n import java.util.Map;\n import java.util.WeakHashMap;\n import java.util.HashMap;\n+import org.apache.lucene.document.Field;\n+import java.util.Arrays;\n \n /**\n  * Expert: The default cache implementation, storing all values in memory. @@\n-80,6 +82,29 @@\n     }\n   }\n \n+  class FieldEntry implements Comparable {\n+    String val;\n+    int ind;\n+    FieldEntry(int ind, String val)\n+    {\n+        this.ind = ind;\n+        this.val = val;\n+    }\n+    public String getVal()\n+    {\n+        return val;\n+    }\n+    public int getInd()\n+    {\n+        return ind;\n+    }\n+    public int compareTo(Object obj)\n+    {\n+        return val.compareToIgnoreCase(((FieldEntry)obj).getVal());\n+    }\n+}\n+\n+\n \n   /** The internal cache. Maps Entry to array of interpreted term values. **/\n   final Map cache = new WeakHashMap();\n@@ -240,54 +265,92 @@\n     if (ret == null) {\n       final int[] retArray = new int[reader.maxDoc()];\n       String[] mterms = new String[reader.maxDoc()+1];\n-      if (retArray.length > 0) {\n-        TermDocs termDocs = reader.termDocs();\n-        TermEnum termEnum = reader.terms (new Term (field, \"\"));\n-        int t = 0;  // current term number\n-\n-        // an entry for documents that have no terms in this field\n-        // should a document with no terms be at top or bottom?\n-        // this puts them at the top - if it is changed, FieldDocSortedHitQueue\n-        // needs to change as well.\n-        mterms[t++] = null;\n \n-        try {\n-          if (termEnum.term() == null) {\n-            throw new RuntimeException (\"no terms in field \" + field);\n-          }\n-          do {\n-            Term term = termEnum.term();\n-            if (term.field() != field) break;\n-\n-            // store term text\n-            // we expect that there is at most one term per document\n-            if (t >= mterms.length) throw new RuntimeException (\"there are more\nterms than documents in field \\\"\" + field + \"\\\"\");\n-            mterms[t] = term.text();\n-\n-            termDocs.seek (termEnum);\n-            while (termDocs.next()) {\n-              retArray[termDocs.doc()] = t;\n-            }\n-\n-            t++;\n-          } while (termEnum.next());\n-        } finally {\n-          termDocs.close();\n-          termEnum.close();\n+      Field docField = reader.document(0).getField(field);\n+      if (docField.isStored() && docField.isTokenized()) {\n+          // Fill entries\n+        FieldEntry[] entries = new FieldEntry[reader.maxDoc()];\n+        for (int i=0; i<reader.maxDoc(); i++) {\n+          String fieldValue;\n+          if (!reader.isDeleted(i))\n+            fieldValue = reader.document(i).get(field);\n+          else\n+            fieldValue = \"\";\n+          entries[i] = new FieldEntry (i,fieldValue);\n         }\n \n-        if (t == 0) {\n-          // if there are no terms, make the term array\n-          // have a single null entry\n-          mterms = new String[1];\n-        } else if (t < mterms.length) {\n-          // if there are less terms than documents,\n-          // trim off the dead array space\n-          String[] terms = new String[t];\n-          System.arraycopy (mterms, 0, terms, 0, t);\n-          mterms = terms;\n+        Arrays.sort(entries);\n+        for (int i=0;i<reader.maxDoc();i++)\n+        {\n+          int ind = entries[i].getInd();\n+          retArray[ind] = i;\n+          mterms[ind]=entries[i].getVal();\n         }\n       }\n+      else\n+      {\n+          if (retArray.length > 0)\n+          {\n+              TermDocs termDocs = reader.termDocs();\n+              TermEnum termEnum = reader.terms(new Term(field, \"\"));\n+              int t = 0; // current term number\n+\n+              // an entry for documents that have no terms in this field\n+              // should a document with no terms be at top or bottom?\n+              // this puts them at the top - if it is changed,\nFieldDocSortedHitQueue\n+              // needs to change as well.\n+              mterms[t++] = null;\n+\n+              try\n+              {\n+                  if (termEnum.term() == null)\n+                  {\n+                      throw new RuntimeException(\"no terms in field \" + field);\n+                  }\n+                  do\n+                  {\n+                      Term term = termEnum.term();\n+                      if (term.field() != field)\n+                          break;\n+\n+                      // store term text\n+                      // we expect that there is at most one term per document\n+                      if (t >= mterms.length)\n+                          throw new RuntimeException(\"there are more terms than\ndocuments in field \\\"\" + field +\n+                                                     \"\\\"\");\n+                      mterms[t] = term.text();\n+                      termDocs.seek(termEnum);\n+                      while (termDocs.next())\n+                      {\n+                          retArray[termDocs.doc()] = t;\n+                      }\n+\n+                      t++;\n+                  }\n+                  while (termEnum.next());\n+              }\n+              finally\n+              {\n+                  termDocs.close();\n+                  termEnum.close();\n+              }\n+\n+              if (t == 0)\n+              {\n+                  // if there are no terms, make the term array\n+                  // have a single null entry\n+                  mterms = new String[1];\n+              }\n+              else if (t < mterms.length)\n+              {\n+                  // if there are less terms than documents,\n+                  // trim off the dead array space\n+                  String[] terms = new String[t];\n+                  System.arraycopy(mterms, 0, terms, 0, t);\n+                  mterms = terms;\n+              }\n+          }\n+      }\n       StringIndex value = new StringIndex (retArray, mterms);\n       store (reader, field, STRING_INDEX, value);\n       return value;\n@@ -309,7 +372,7 @@\n   // inherit javadocs\n   public Object getAuto (IndexReader reader, String field)\n   throws IOException {\n-    field = field.intern();\n+  field = field.intern();\n     Object ret = lookup (reader, field, SortField.AUTO);\n     if (ret == null) {\n       TermEnum enumerator = reader.terms (new Term (field, \"\"));\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "amordo@infosciences.com", "_JiraUser__key": "amordo@infosciences.com", "_JiraUser__display_name": "Aviran Mordo", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=amordo%40infosciences.com"}, "_JiraIssueComment__comment_id": "12321785", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314402/comment/12321785"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-07-30T16:26:03.000+0000", "_JiraIssueComment__comment_body": "Aviran, could you attach your diff (instead of pasting it in), please?\nUse the 'Create a new attachment' link above.  This will keep the patch nice and\nclean, without any wrapped lines and such.  Thanks!", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueComment__comment_id": "12321786", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314402/comment/12321786"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-07-30T20:03:07.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=12275)\nA diff patch file that uses the stored values in case the sorted field is tokenized\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "amordo@infosciences.com", "_JiraUser__key": "amordo@infosciences.com", "_JiraUser__display_name": "Aviran Mordo", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=amordo%40infosciences.com"}, "_JiraIssueComment__comment_id": "12321787", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314402/comment/12321787"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-03-06T12:19:42.703+0000", "_JiraIssueComment__comment_body": "In the project Nutch, we have encountered a subtle bug, which I tracked down and found to be related to unintuitive caching in tokenized fields. \n\nnutch uses several index servers, and the search results from these servers are merged using a dedup field for for deleting dupilcates. The values from this field is cached by FieldCachImpl. The default is the site field, which is indexed and tokenized. However for a Tokenized Field (for example \"url\" in nutch), FieldCacheImpl returns an array of Terms rather that array of field values, so dedup'ing becomes faulty. \n\nCurrent FieldCache implementation does not respect tokenized fields, and as described above caches only terms. I have ported the previous patch and improved it for the 2.0 branch. And i will write a patch for the trunk. \n\nI am voting for this patch to be committed. ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "enis", "_JiraUser__key": "enis", "_JiraUser__display_name": "Enis Soztutar", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=enis"}, "_JiraIssueComment__comment_id": "12478388", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314402/comment/12478388"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-03-06T13:07:24.671+0000", "_JiraIssueComment__comment_body": "A bug in FieldCacheImpl_Tokenized_fields_lucene_2.0.patch is fixed, which caused not storing newly built cache. This patch obsoletes FieldCacheImpl_Tokenized_fields_lucene_2.0.patch\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "enis", "_JiraUser__key": "enis", "_JiraUser__display_name": "Enis Soztutar", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=enis"}, "_JiraIssueComment__comment_id": "12478399", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314402/comment/12478399"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-03-06T13:12:38.122+0000", "_JiraIssueComment__comment_body": "This version patches against the current trunk version 2.2-dev. Please see the above comments about the contents of the patch. ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "enis", "_JiraUser__key": "enis", "_JiraUser__display_name": "Enis Soztutar", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=enis"}, "_JiraIssueComment__comment_id": "12478402", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314402/comment/12478402"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-03-07T19:14:15.336+0000", "_JiraIssueComment__comment_body": "I am not convinced that we should encourage folks to use a FieldCache with a tokenized field in this way, expecting the untokenized, stored value.  It is considerably slower to populate the cache this way, greatly reducing its utility.  Instead we should probably improve the documentation on this point, and perhaps even throw an exception for tokenized fields.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_JiraIssueComment__comment_id": "12478856", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314402/comment/12478856"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-03-07T23:00:15.279+0000", "_JiraIssueComment__comment_body": "FieldCacheImpl.getStringIndex already throws an exception if it detects it's being used on a tokenized field (but i'm not sure if it does a perfect job of detecting that ... it seems to make a naive assumption based on the number of terms) ... i'm guessing that check wasn't in the code when this bug was initially filed.\n\nI agree with Doug, silently using the stored field value if/when a field is tokenized is a bad idea .. there is a seperate patch available for doing this that allows people to be much more explicit about their intentions -- see (LUCENE-769)", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hossman", "_JiraUser__key": "hossman", "_JiraUser__display_name": "Chris M. Hostetter", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hossman"}, "_JiraIssueComment__comment_id": "12478946", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314402/comment/12478946"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-03-08T08:25:18.633+0000", "_JiraIssueComment__comment_body": "Well, I have spent half a day to find this issue with tokenized field caching, so I absolutely agree on throwing and exception in the getStrings() and getStringIndex() functions of FieldCacheImpl. A snippet would be like : \n\nField docField = getField(reader, field);\n      if (docField != null && docField.isStored() && docField.isTokenized()) {\n           throw new RuntimeException(\"Caching in Tokenized Fields is not allowed\");\n      }\n\nLooking at the timing of cache building tokenized fields are really slow, as Doug mentioned, for a 1.5M real index(from web documents) building the cache on a tokenized field takes 1600 ms on the avarage, but for an untokenized field, it takes 30000 ms on avarage. \n\nIn nutch we have 3 options : 1st is to disallow deleting duplicates on tokenized fields(due to FieldCache), 2nd is to index the tokenized field twice(once tokenized, and once untokenized), 3rd use the above patch and warm the cache initially in the index servers. \n\nI am in favor of the 3rd option and believe that this patch is necessary and it can be included with an explanatory javadoc. \nanother option will be to extend the defalut FieldCacheImpl and allow for tokenized field caching and naming the class similar to LUCENE-769's such as StoredFieldCacheImpl. If that is ok, i can prepare a patch and send it here. \n\n\n\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "enis", "_JiraUser__key": "enis", "_JiraUser__display_name": "Enis Soztutar", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=enis"}, "_JiraIssueComment__comment_id": "12479260", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314402/comment/12479260"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-03-08T14:59:56.791+0000", "_JiraIssueComment__comment_body": "I wouldn't want to see sorting on a tokenized field disallowed (Lucene's definition of tokenized is that analysis is done on the field value).  There are tokenized fields that simply do things like manipulate a numer into a text-sortable value, lowercase, or do some other sort of normalization that doesn't produce multiple tokens.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12479326", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314402/comment/12479326"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-03-08T16:49:35.357+0000", "_JiraIssueComment__comment_body": "definitely in agreement with yonik here, erroring out if \"docField.isTokenized()\" would prevent some perfectly valid use cases ... my point was that hte current test of \"if (t >= mterms.length)\" only triggers an error if htere are more total terms in the field then there are documents in the index ... but there can be plenty of situations where a doc has more then one indexed term, but the total number of indexed terms is less hten the number of documents, a better test would be to check and see if we have already recorded a term for this doc.\n\nI have to say: I'm really not understanding how the current behavior is hindering nutch ... my understanding of the nutch model is that the set of fields is very well known -- why do you need to rely on FieldCache being smart enough to stop you from trying to sort on a tokenized field? (and what does that have to do with deleting duplicates?)\n\nif nothing else: if nutch needs to prevent using FieldCache based sorting on tokenized fields, why can't the \"if (docField.isTokenized())\" logic be done outside of the FieldCacheImpl ... possibly as a way to decide if you want to use the basic sorting or use something like LUCENE-769?\n\n\n...perhaps this is something that should be discussed more on java-dev?\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hossman", "_JiraUser__key": "hossman", "_JiraUser__display_name": "Chris M. Hostetter", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hossman"}, "_JiraIssueComment__comment_id": "12479354", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314402/comment/12479354"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-03-09T10:27:18.025+0000", "_JiraIssueComment__comment_body": "I also agree with tokenized field caching, which is a use case for nutch. Let me elaborate on the use case. In a nutch deployment, we generate indexes from the web documents, and indeed the set of fields is known a priori. Then the indexes are distributed to several index servers running on hadoop's RPC calls. Then the query is sent to all of the index servers, the results are collected and merged on the fly. Since the indexes need not be disjoint(since crawling is an adaptive process) the results should be merged, without having a document more then once. So we need a unique key to represent the document. Default nutch codebase uses the site field(url's hostname), which is untokenized for such a task, and allow only 1 - 2 documents from a site in the search results. For obvious performance reasons, the site field is cached in the index servers with FieldCache.getStrings(). The problem arises when we want to show more than one result from a specific site (for example in a site:apache.org query ), and if we have the same url indexed in more than one index server. We use the tokenized url field in the FieldCache, then deleting duplicates becomes error prone. Since we use FieldCache.getStrings() rather that FieldCache.getStringIndex(), the problem here is not tokenized field sorting, but tokenized field not caching correctly, an example of which is an array like [com, edu. www, youtube, ] from the getStrings() method(for each doc, only a token is returned, rather than the whole url). \n\nWell, if you are still with me, here is my proposal : \n\n1. in FieldCacheImpl.java in both getStrings and getStringIndex functions add \n\nField docField = getField(reader, field);\n      if (docField != null && docField.isStored() && docField.isTokenized()) {\n           throw new RuntimeException(\"Caching in Tokenized Fields is not allowed\");\n      } \n\n2. subclass FieldCacheImpl as StoredFieldCacheImpl and implement stored field caching there, delegating untokenized fields to super class\n3. add the implementation to FieldCache.java :\n\n public static FieldCache DEFAULT = new FieldCacheImpl();\n public static FieldCache STORED_CACHE = new StoredCacheImpl();\n\nthis way both lucene internals will not be affected and a stored field caching could be performed. \n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "enis", "_JiraUser__key": "enis", "_JiraUser__display_name": "Enis Soztutar", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=enis"}, "_JiraIssueComment__comment_id": "12479552", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314402/comment/12479552"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-03-09T16:55:17.619+0000", "_JiraIssueComment__comment_body": "I'm afraid i'm still not understanding the issue in nutch, it seems like the root of hte problem is..\n\n> ... We use the tokenized url field in the FieldCache ...\n\n...if you know this field is tokenized, don't use it this way.  if you want to use it this way, index it a second time untokenized.\n\nAt a more practical level:\n\n1) the change you propose to getStrings and getStringIndex is not practical because as we've discussed before, a field being tokenized isn't a garuntee that FieldCache won't work -- isTokenized just inidcates that an Analyzer was used -- it doesn't indicate that any real tokenization took place (the analyzer might have just been used to lowercase the field value before indexing, or strip off leading/trailing white space) that doesn't mean the normal FieldCache can't be used for sorting.  the converse is also true: !isTokenized doens't tell you that it's safe to build the FieldCache -- even if no Analyzer is ever used, multiple Field values can be added for the same field -- and that is hte root cause of hte problem, not tokenization but multiple terms for a given field.\n\n2) the desired behavior you are requesting in a StoredFieldCacheImpl could be done without making any changes to what so ever to FieldCacheImpl -- since nutch knows exactly which fields it's indexing multiple tokens for, it can make the choice between using a StoredFieldCacheImple or using a FieldCacheImpl. (but as i've said, i really don't think that's the right solution)", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hossman", "_JiraUser__key": "hossman", "_JiraUser__display_name": "Chris M. Hostetter", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hossman"}, "_JiraIssueComment__comment_id": "12479648", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314402/comment/12479648"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-03-13T16:55:19.897+0000", "_JiraIssueComment__comment_body": "I should admit that, considering the case Yonik has mentioned. throwing an exception by checking the Field.isTokenized() is not suitable. However the check if (t >= mterms.length) is only in getStringIndex() and not in getStrings(). I think that a more robust check then the aforementioned should be included in both getStrings and getStringIndex functions. A possibility would be to allocate a boolean array(or BitSet) of the same size with the retArray, and  then use the array to avoid multiple terms per document.  \n\n> 2) the desired behavior you are requesting in a StoredFieldCacheImpl could be done without making any changes to what so ever to FieldCacheImpl -- since nutch knows exactly which fields it's indexing multiple tokens for, it can make the choice between using a StoredFieldCacheImple or using a FieldCacheImpl.\n\nfrom my previous post  :  In nutch we have 3 options : 1st is to disallow deleting duplicates on tokenized fields(due to FieldCache), 2nd is to index the tokenized field twice(once tokenized, and once untokenized), 3rd use the above patch and warm the cache initially in the index servers.\n\nYes indexing a field a second time is an option, but considering my use cases with nutch, why would i want to grow my index by indexing the field twice, instead of tolerating 30 seconds of cache building in a web server, which will serve the indexes for days or even weeks. \n\nwith a class like StoredFieldCacheImpl we can get the desired behaviour w/o modifiying the FieldCacheImpl, and my suggestion in my previous post  without the 1st part does just this. I couldl have sent this to nutch but i think it is a lucene issue. \n\nAny more suggestions ?\n\n\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "enis", "_JiraUser__key": "enis", "_JiraUser__display_name": "Enis Soztutar", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=enis"}, "_JiraIssueComment__comment_id": "12480476", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314402/comment/12480476"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2009-12-08T03:51:44.735+0000", "_JiraIssueComment__comment_body": "This issue is too old - if a new patch/proposal is brought up we can reopen it.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markrmiller@gmail.com", "_JiraUser__key": "markrmiller@gmail.com", "_JiraUser__display_name": "Mark Miller", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com"}, "_JiraIssueComment__comment_id": "12787288", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314402/comment/12787288"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312369", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--dif.txt", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "amordo@infosciences.com", "_JiraUser__key": "amordo@infosciences.com", "_JiraUser__display_name": "Aviran Mordo", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=amordo%40infosciences.com"}, "_JiraAttachment__attachment_size": 6775, "_JiraAttachment__attachment_created": "2004-07-30T20:03:07.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312369/ASF.LICENSE.NOT.GRANTED--dif.txt", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12352748", "_JiraAttachment__attachment_filename": "FieldCacheImpl_Tokenized_fields_lucene_2.0_v1.1.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "enis", "_JiraUser__key": "enis", "_JiraUser__display_name": "Enis Soztutar", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=enis"}, "_JiraAttachment__attachment_size": 8371, "_JiraAttachment__attachment_created": "2007-03-06T13:07:24.588+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12352748/FieldCacheImpl_Tokenized_fields_lucene_2.0_v1.1.patch", "_JiraAttachment__attachment_mime_type": "text/x-patch"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12352745", "_JiraAttachment__attachment_filename": "FieldCacheImpl_Tokenized_fields_lucene_2.0.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "enis", "_JiraUser__key": "enis", "_JiraUser__display_name": "Enis Soztutar", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=enis"}, "_JiraAttachment__attachment_size": 8523, "_JiraAttachment__attachment_created": "2007-03-06T12:19:42.574+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12352745/FieldCacheImpl_Tokenized_fields_lucene_2.0.patch", "_JiraAttachment__attachment_mime_type": "text/x-patch"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12352749", "_JiraAttachment__attachment_filename": "FieldCacheImpl_Tokenized_fields_lucene_2.2-dev.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "enis", "_JiraUser__key": "enis", "_JiraUser__display_name": "Enis Soztutar", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=enis"}, "_JiraAttachment__attachment_size": 8086, "_JiraAttachment__attachment_created": "2007-03-06T13:12:37.986+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12352749/FieldCacheImpl_Tokenized_fields_lucene_2.2-dev.patch", "_JiraAttachment__attachment_mime_type": "text/x-patch"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12321010", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:26:54.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "30382", "_JiraIssueChangeLogItem__to_str": "12314402"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12473623", "_Jira_Issue_ChangeLog_History__created_time": "2007-03-06T12:19:42.725+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "enis", "_JiraUser__key": "enis", "_JiraUser__display_name": "Enis Soztutar", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=enis"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "FieldCacheImpl_Tokenized_fields_lucene_2.0.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12473634", "_Jira_Issue_ChangeLog_History__created_time": "2007-03-06T13:07:24.698+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "enis", "_JiraUser__key": "enis", "_JiraUser__display_name": "Enis Soztutar", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=enis"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "FieldCacheImpl_Tokenized_fields_lucene_2.0_v1.1.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12473637", "_Jira_Issue_ChangeLog_History__created_time": "2007-03-06T13:12:38.149+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "enis", "_JiraUser__key": "enis", "_JiraUser__display_name": "Enis Soztutar", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=enis"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "FieldCacheImpl_Tokenized_fields_lucene_2.2-dev.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12794386", "_Jira_Issue_ChangeLog_History__created_time": "2009-12-08T03:51:44.805+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markrmiller@gmail.com", "_JiraUser__key": "markrmiller@gmail.com", "_JiraUser__display_name": "Mark Miller", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Lucene Developers", "_JiraIssueChangeLogItem__to_str": null}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Fixed"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Open", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13064944", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:17:06.676+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13090045", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T12:02:08.187+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16380197", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:04:16.028+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16934225", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T19:59:02.838+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 0, "_JiraIssue__close_time": 169109849.805, "_JiraIssue__contributors_number": 7, "_JiraIssue__num_of_files_changed": 1, "_JiraIssue__num_of_lines_changed": 199}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314357", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314357", "_JiraIssueData__issue_key": "LUCENE-207", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "java-dev@lucene.apache.org", "_JiraUser__key": "java-dev@lucene.apache.org", "_JiraUser__display_name": "Lucene Developers", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=java-dev%40lucene.apache.org"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "chris.todd@comcast.net", "_JiraUser__key": "chris.todd@comcast.net", "_JiraUser__display_name": "Chris Todd", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=chris.todd%40comcast.net"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "chris.todd@comcast.net", "_JiraUser__key": "chris.todd@comcast.net", "_JiraUser__display_name": "Chris Todd", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=chris.todd%40comcast.net"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2004-03-31T12:31:24.000+0000", "_JiraIssueData__issue_description": "In org.apache.lucene.store.FSDirectory from Lucene-1.3-final, on line 170-171:\n\nFile tmpdir = new File(System.getProperty(\"java.io.tmpdir\"));\nfiles = tmpdir.list();\n\nif the directory specified by the property \"java.io.tmpdir\" does not exist, a\nnull pointer exception is thrown.  Perhaps a check to see if the directory\nexists is in order, and if it doesn't, use a directory you know exists (e.g. a\n/temp directory in the directory created earlier in the create() method).", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "[PATCH] npe if java.io.tmpdir does not exist", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-05-18T20:06:06.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=11590)\nCreate the temp dir if it doesn't exist\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "grant_ingersoll@yahoo.com", "_JiraUser__key": "grant_ingersoll@yahoo.com", "_JiraUser__display_name": "Grant Ingersoll", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=grant_ingersoll%40yahoo.com"}, "_JiraIssueComment__comment_id": "12321660", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314357/comment/12321660"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-05-18T20:06:56.000+0000", "_JiraIssueComment__comment_body": "Creates the temp dir if it doesn't exist.  If it can't create the directory, \nit throws an IOException.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "grant_ingersoll@yahoo.com", "_JiraUser__key": "grant_ingersoll@yahoo.com", "_JiraUser__display_name": "Grant Ingersoll", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=grant_ingersoll%40yahoo.com"}, "_JiraIssueComment__comment_id": "12321661", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314357/comment/12321661"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-05-18T20:43:55.000+0000", "_JiraIssueComment__comment_body": "Thanks, in CVS.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueComment__comment_id": "12321662", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314357/comment/12321662"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-05-18T21:27:50.000+0000", "_JiraIssueComment__comment_body": "Shouldn't we be honoring java.io.tmpdir even if it happens to be non-absolute?\n\nPerhaps this should be fixed by removing the \".\" from the LOCK_DIR \ninitialization then if LOCK_DIR is null, set lockDir in the constructor to \ndirectory and only do the lockDir.mkdirs during makeLock in the Lock.obtain \nmethod?\n\nI can supply a patch if you want one. Also, in your patch for this, you changed \na message in FSDirectory.create to include the word \"lock\" but it should just \nbe \"Cannot create directory\" in that case since we aren't creating the lock \ndirectory there, we are creating the index directory.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "eisakson", "_JiraUser__key": "eisakson", "_JiraUser__display_name": "Eric Isakson", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=eisakson"}, "_JiraIssueComment__comment_id": "12321663", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314357/comment/12321663"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-05-18T23:27:51.000+0000", "_JiraIssueComment__comment_body": "I think if java.io.tmpdir is relative, then we should probably use something\nrelative to the PWD of the JVM.\n\nIf org.apache.lucene.lockdir is relative, then should it be relative to the PWD\nor to the index directory?  For consistency with java.io.tmpdir, perhaps this\nshould also be relative to PWD.\n\nBut, when both are null, then the lock directory should be the index directory.\n Right now we're attempting to handle this case by using a relative pathname of\n\".\", but perhaps we should handle it more explicitly.  Perhaps we should, when\nLOCK_DIR is null, explicitly use the index directory as the lock dir.\n\nDoes that sound right?", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting@apache.org", "_JiraUser__key": "cutting@apache.org", "_JiraUser__display_name": "cutting@apache.org", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting%40apache.org"}, "_JiraIssueComment__comment_id": "12321664", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314357/comment/12321664"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-05-19T01:44:24.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=11592)\nnew fix that removes the isAbsolute checking\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "eisakson", "_JiraUser__key": "eisakson", "_JiraUser__display_name": "Eric Isakson", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=eisakson"}, "_JiraIssueComment__comment_id": "12321665", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314357/comment/12321665"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-05-19T01:46:31.000+0000", "_JiraIssueComment__comment_body": "I added an attachment that uses the directory explicitly if the system \nproperties are null and if the LOCK_DIR is relative, the lockDir will be based \non the PWD.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "eisakson", "_JiraUser__key": "eisakson", "_JiraUser__display_name": "Eric Isakson", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=eisakson"}, "_JiraIssueComment__comment_id": "12321666", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314357/comment/12321666"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2004-05-19T22:46:37.000+0000", "_JiraIssueComment__comment_body": "Looks good.\nEither the specified dir is used (or temp), or if they are both null we use the\nindex dir, and the relative vs. absolute discussion is discarded, ja?", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueComment__comment_id": "12321667", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314357/comment/12321667"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312335", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--FSDirectory.patch.diff", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "eisakson", "_JiraUser__key": "eisakson", "_JiraUser__display_name": "Eric Isakson", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=eisakson"}, "_JiraAttachment__attachment_size": 2154, "_JiraAttachment__attachment_created": "2004-05-19T01:44:24.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312335/ASF.LICENSE.NOT.GRANTED--FSDirectory.patch.diff", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312334", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--tempDir.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "grant_ingersoll@yahoo.com", "_JiraUser__key": "grant_ingersoll@yahoo.com", "_JiraUser__display_name": "Grant Ingersoll", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=grant_ingersoll%40yahoo.com"}, "_JiraAttachment__attachment_size": 770, "_JiraAttachment__attachment_created": "2004-05-18T20:06:06.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312334/ASF.LICENSE.NOT.GRANTED--tempDir.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12320965", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:26:13.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "28074", "_JiraIssueChangeLogItem__to_str": "12314357"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12402310", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-27T01:37:42.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13064219", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:14:25.335+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13089427", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T11:58:59.718+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13153130", "_Jira_Issue_ChangeLog_History__created_time": "2011-06-02T22:04:53.371+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "sarowe", "_JiraUser__key": "steve_rowe", "_JiraUser__display_name": "Steven Rowe", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=sarowe"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "unspecified", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16379591", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:04:00.628+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16939001", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T20:00:12.824+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 0, "_JiraIssue__close_time": 67957578.0, "_JiraIssue__contributors_number": 6, "_JiraIssue__num_of_files_changed": 1, "_JiraIssue__num_of_lines_changed": 5}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314290", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314290", "_JiraIssueData__issue_key": "LUCENE-140", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gegez@wp.pl", "_JiraUser__key": "gegez@wp.pl", "_JiraUser__display_name": "legez", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gegez%40wp.pl"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gegez@wp.pl", "_JiraUser__key": "gegez@wp.pl", "_JiraUser__display_name": "legez", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gegez%40wp.pl"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2003-10-07T20:05:52.000+0000", "_JiraIssueData__issue_description": "Hello,\n  I can not find out, why (and what) it is happening all the time. I got an\nexception:\njava.lang.IllegalStateException: docs out of order\n        at\norg.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:219)\n        at\norg.apache.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java:191)\n        at\norg.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:172)\n        at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:135)\n        at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:88)\n        at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:341)\n        at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:250)\n        at Optimize.main(Optimize.java:29)\n\nIt happens either in 1.2 and 1.3rc1 (anyway what happened to it? I can not find\nit neither in download nor in version list in this form). Everything seems OK. I\ncan search through index, but I can not optimize it. Even worse after this\nexception every time I add new documents and close IndexWriter new segments is\ncreated! I think it has all documents added before, because of its size.\n\nMy index is quite big: 500.000 docs, about 5gb of index directory.\n\nIt is _repeatable_. I drop index, reindex everything. Afterwards I add a few\ndocs, try to optimize and receive above exception.\n\nMy documents' structure is:\n  static Document indexIt(String id_strony, Reader reader, String data_wydania,\nString id_wydania, String id_gazety, String data_wstawienia)\n{\n    Document doc = new Document();\n\n    doc.add(Field.Keyword(\"id\", id_strony ));\n    doc.add(Field.Keyword(\"data_wydania\", data_wydania));\n    doc.add(Field.Keyword(\"id_wydania\", id_wydania));\n    doc.add(Field.Text(\"id_gazety\", id_gazety));\n    doc.add(Field.Keyword(\"data_wstawienia\", data_wstawienia));\n    doc.add(Field.Text(\"tresc\", reader));\n\n    return doc;\n}\n\nSincerely,\nlegez", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "docs out of order", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2003-11-25T19:35:32.000+0000", "_JiraIssueComment__comment_body": "Since the bug submitter hasn't followed up to this 'repeatable' issue in almost\ntwo months, I shall assume that this was not a bug in Lucene, but a misuse of\nLucene.\n\nThere is also no self-contained code that demonstrates the bug.\n\nIf this is indeed a Lucene bug, please re-open this bug entry, and provise\nself-sufficient unit test that demonstrates this problem.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueComment__comment_id": "12321387", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12321387"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-06-14T23:42:25.000+0000", "_JiraIssueComment__comment_body": "More Data Integrity Issue: Docs out of Order\n\nHi,\nSeeing similar issue to the one reported in:\nhttp://nagoya.apache.org/bugzilla/show_bug.cgi?id=23650\nOn examining the segments, following inconsistencies were found\n(a) The merging segments had doc number that is greater than maxDoc.\nDon't know how it go in this state, but this occurs using standard lucene\ncode.\n(b) Strangely, some documents had terms with zero frequency.  And when it \noccurred,\nthe zero frequency term has several posting as (docid 0)\nExample.. (docid freq)  -- MaxDoc = 7749 - NO DELETION.\nMerging msgBody; text=it; sz=2  --- The field name is msgBody and term is \"it\"\n                                    and two segments have the term.\n(0 0)(0 0)(0 0)..........(0 0)(4 6)(5 3)(6 1)(9 1)(10 2)(12 1)......\n...(6791 2)(6794 3)(6796 2)(6798 16)(6801 1)(6805 1)(6806 5)\n(6808 1)(6810 1)(6815 2)(6816 3)(6817 1)(6818 1)(6821 4)(6822 1)\n(6824 3)(6826 4)(6828 1)(6829 3)(12549 2)doc exceeds count\n749(13570 1)doc exceeds count 7749(14896 1)doc exceeds count 7749\n(15028 1)doc exceeds count 7749(15357 1)doc exceeds count 7749\n(15427 1)doc exceeds count 7749(15534 1)doc exceeds count 7749\n(15535 1)doc exceeds count 7749(15653 1)doc exceeds count 7749\n(16530 1)doc exceeds count 7749(17108 1).......\n(c) Also the zero frequency was not limited to the 0 document, there was\nanother instance.\n\nOne work around that seemed to resolve the issue was to:\n(a) keep the maxDoc as a member variable in SegmentMergeInfo\nand ignore/throw exception if an inconsistent state is detected.\n\n****ADD To SegmentMerger just before \"docs out of order\" check.\n  if (postings.freq() == 0) {\n            continue;\n   }\n   if (doc >= smi.maxDoc) {\n      //sbLog.append(\"doc exceeds count \\r\\n \" + smi.maxDoc);\n      continue;\n   }\n****\n\nAtleast putting a check would not corrupt the segments and would\nget us closer to the real problem as to why freq=0 and doc number exceeds\nmaxDoc. Note, the code has had the fix to the other Segment corruption issue\nthat I previously reported (namely, Using a zero length file).\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "lucene@ziplip.com", "_JiraUser__key": "lucene@ziplip.com", "_JiraUser__display_name": "Arvind Srinivasan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=lucene%40ziplip.com"}, "_JiraIssueComment__comment_id": "12321388", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12321388"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-06-14T23:46:42.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=15405)\nAnalysis of corrupted segments and suggestions.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "lucene@ziplip.com", "_JiraUser__key": "lucene@ziplip.com", "_JiraUser__display_name": "Arvind Srinivasan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=lucene%40ziplip.com"}, "_JiraIssueComment__comment_id": "12321389", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12321389"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-06-22T12:04:49.000+0000", "_JiraIssueComment__comment_body": "Arvind, thanks for following up on this issue.  From your report I can see that\nthe index really ends up containing invalid data, but I've never even seen this\nhappen myself.  Could you please put together sample code that gets the index in\nthis state?", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueComment__comment_id": "12321390", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12321390"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-11-10T11:59:30.000+0000", "_JiraIssueComment__comment_body": "I've never seen this... can anyone reproduce with Lucene 1.9?\nCCing this to Arvind's email...", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "yseeley@gmail.com", "_JiraUser__key": "yseeley@gmail.com", "_JiraUser__display_name": "Yonik Seeley", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com"}, "_JiraIssueComment__comment_id": "12357178", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12357178"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-11-10T12:05:56.000+0000", "_JiraIssueComment__comment_body": "2 years later, I still haven't seen this error.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis", "_JiraUser__key": "otis", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis"}, "_JiraIssueComment__comment_id": "12357180", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12357180"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-01-10T16:30:44.000+0000", "_JiraIssueComment__comment_body": "First I think that Lucene is great and it manages to do an incredible job. However, this issue is also causing us significant problems. We originally had an AOP interceptor that would update documents in our HTTP threads however when we started to see this issue we were concerned that it was caused by multiple threads accessing the index at the same time. We put extra concurrency controls on the updates using the LuceneIndexAccess API that was posted into bugzilla by another user. This issue still remained after we added the extra concurrency control.\n\nSince then we have abandoned the AOP approach completely and moved the index rebuild to a scheduled thread which collects things that were modified from the database (using datestamp versioning) and then proceeds to update their lucene indexes. We hoped this would solve the problem because only 1 thread in 1 process would be modifying the index at any given time. Alas, we are still getting docs out of order exceptions. It is difficult for us to reproduce as it mainly happens in production and we cannot provide a testcase for it (I wish we could!). \n\nI know that this must be a difficult issue because it is difficult to reproduce. I can't think of anything strange that we are doing with the indexes (one process, one thread modifying). This probably isn't much help but I just wanted to let you know that we are also experiencing the problem. ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jcuzens", "_JiraUser__key": "jcuzens", "_JiraUser__display_name": "Jarrod Cuzens", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jcuzens"}, "_JiraIssueComment__comment_id": "12362310", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12362310"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-01-11T02:28:02.000+0000", "_JiraIssueComment__comment_body": "File corruption could cause this.  Please look in your system logs to see if there are any reports of problems accessing the drive that stores this index.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_JiraIssueComment__comment_id": "12362354", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12362354"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-01-17T02:45:00.000+0000", "_JiraIssueComment__comment_body": "Hi Doug,\n\nThanks for your suggestion (and great work on Lucene!). I looked in the logs and could not find any indication of corruption. In addition we actually have the system running in a cluster where each node in the cluster has its own lucene search index. We had the issue on a different machine before we moved to the cluster and we now see it on both machines in our cluster :(. Next time it occurs I will get the indexes and try to post them here if you think that would be helpful.\n\nJust some additional info: \n1)  We are running SUSE 10 Linux.\n2)  We run two quartz jobs: One job runs every 2 minutes and updates lucene with changes from the db if necessary. The other job runs at 3:30AM in the morning and does full index rebuilds. We use the LuceneIndexAccess api when working with the IndexReader/IndexWriter. Only one thread should modify the index at any time although it is possible that the full rebuild job and the update job execute concurrently they shouldn't both modify the index due to the LuceneIndexAccess API's synchronization.\n3) Currently when doing searches we create a new IndexSearcher everytime a search is to be performed; We do not use the LuceneIndexAccess API.\n\nWhen I refer to the LuceneIndexAccess API I am referring to the contribution by Mark Schreiber:\nhttp://www.blizzy.de/lucene/lucene-indexaccess-0.1.0.zip\n\nThanks for any help!\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jcuzens", "_JiraUser__key": "jcuzens", "_JiraUser__display_name": "Jarrod Cuzens", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jcuzens"}, "_JiraIssueComment__comment_id": "12362866", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12362866"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-01-19T05:57:46.000+0000", "_JiraIssueComment__comment_body": "Hi,\n\nI have recently experienced the same problem on relase 1.4.3. It happended in production(more than once). Filesystem index directory is used. One application is accountable for indexing, another for searching the index(it also uses IndexReader for query rewriting). Access to index directory(which is singleton) is synchronized within each application's scope. These two applications create separate directory instances and access it independently. Unfortunately,  the code doesn't lead to repeatable occurances of this exception. I assume that  these two applications having not synchronized access to the index might couse the problem, but I have received information that it had also occured with the searching application being down.\n\nThanks in advance for any help.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rmajewski", "_JiraUser__key": "rmajewski", "_JiraUser__display_name": "Rafal Majewski", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rmajewski"}, "_JiraIssueComment__comment_id": "12363156", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12363156"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-01-21T07:41:44.000+0000", "_JiraIssueComment__comment_body": "I am posting our corrupted index (I have to do it in two  parts because it is 14.5M). I looked at it in Luke but Luke doesn't really have any tools to help really diagnose corruption issues. At this point we are considering changing our system to do builds on one machine, test them, and then have them distributed to the other machines in our cluster.\n\nIf anybody could look at this it would be greatly appreciated!\nThanks!\nJarrod", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jcuzens", "_JiraUser__key": "jcuzens", "_JiraUser__display_name": "Jarrod Cuzens", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jcuzens"}, "_JiraIssueComment__comment_id": "12363471", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12363471"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-01-21T07:44:02.000+0000", "_JiraIssueComment__comment_body": "Second part. :)", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jcuzens", "_JiraUser__key": "jcuzens", "_JiraUser__display_name": "Jarrod Cuzens", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jcuzens"}, "_JiraIssueComment__comment_id": "12363473", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12363473"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-04-13T16:13:41.000+0000", "_JiraIssueComment__comment_body": "We used Lucene 1.4.3. for a half year now.\nBut just out of the sudden this issue appeared.\n\nWe have synchronized access to index - synchronized singleton handling all write / read operations.\n\nIs there any progress on finding the cause?\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "alesj", "_JiraUser__key": "alesj", "_JiraUser__display_name": "Ales Justin", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=alesj"}, "_JiraIssueComment__comment_id": "12374312", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12374312"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-04-28T01:49:21.000+0000", "_JiraIssueComment__comment_body": "I was having this problem intermittently while indexing over multiple threads and I have found that the following steps can cause this error (with Lucene 1.3 and 1.4.x):\n\n- Open an IndexReader (#1) over an existing index (this reader is used for searching while updating the index)\n- Using this reader (#1) do a search for the document(s) that you would like to update; obtain their document ID numbers\n- Create an IndexWriter and add several new documents to the index (for me, this writing is done in other threads) (*)\n- Close the IndexWriter (*)\n- Open another IndexReader (#2) over the index\n- Delete the previously found documents by their document ID numbers using reader #2\n- Close the #2 reader\n- Create another IndexWriter (#2) and re-add the updated documents\n- Close the IndexWriter #2\n- Close the original IndexReader (#1) and open a new reader for general searching\n \nIf I ensure that the steps marked with an asterisk (*) do not happen (i.e. using thread synchronization), I never get this error.  Otherwise, it will happen intermittently while closing the second IndexWriter (#2)  (sometimes I get an ArrayIndexOutOfBoundsException during the deletion).  These 'extra' writes cause the initial 'segments' file to be updated after which it is re-read while opening the second IndexReader (#2).\n\nThis can end up deleting documents using possibly non-existent IDs, most likely causing the index corruption that this error signals.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jlambert", "_JiraUser__key": "jlambert", "_JiraUser__display_name": "Jason Lambert", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jlambert"}, "_JiraIssueComment__comment_id": "12376780", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12376780"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-12-15T04:11:17.000+0000", "_JiraIssueComment__comment_body": "We have seen this one as well. We don't have the same usage as above, we only ever delete documents with IndexReader.deleteDocuments(Term)\n\nWe are using Lucene 1.9.1\n\nIt occurs in two places, inside IndexWriter.addDocument():\n\njava.lang.IllegalStateException: docs out of order\n\tat org.apache.lucene.index.SegmentMerger.appendPostings([Lorg/apache/lucene/index/SegmentMergeInfo;I)I(Optimized Method)\n\tat org.apache.lucene.index.SegmentMerger.mergeTermInfo([Lorg/apache/lucene/index/SegmentMergeInfo;I)V(Optimized Method)\n\tat org.apache.lucene.index.SegmentMerger.mergeTermInfos()V(Optimized Method)\n\tat org.apache.lucene.index.SegmentMerger.mergeTerms()V(Optimized Method)\n\tat org.apache.lucene.index.SegmentMerger.merge()I(Optimized Method)\n\tat org.apache.lucene.index.IndexWriter.mergeSegments(II)V(IndexWriter.java:681)\n\tat org.apache.lucene.index.IndexWriter.mergeSegments(I)V(IndexWriter.java:658)\n\tat org.apache.lucene.index.IndexWriter.maybeMergeSegments()V(IndexWriter.java:646)\n\tat org.apache.lucene.index.IndexWriter.addDocument(Lorg/apache/lucene/document/Document;Lorg/apache/lucene/analysis/Analyzer;)V(IndexWriter.java:453)\n\tat org.apache.lucene.index.IndexWriter.addDocument(Lorg/apache/lucene/document/Document;)V(IndexWriter.java:436)\n\nand inside IndexWriter.close():\n\njava.lang.IllegalStateException: docs out of order\n\tat org.apache.lucene.index.SegmentMerger.appendPostings([Lorg/apache/lucene/index/SegmentMergeInfo;I)I(Optimized Method)\n\tat org.apache.lucene.index.SegmentMerger.mergeTermInfo([Lorg/apache/lucene/index/SegmentMergeInfo;I)V(Optimized Method)\n\tat org.apache.lucene.index.SegmentMerger.mergeTermInfos()V(Optimized Method)\n\tat org.apache.lucene.index.SegmentMerger.mergeTerms()V(Optimized Method)\n\tat org.apache.lucene.index.SegmentMerger.merge()I(Optimized Method)\n\tat org.apache.lucene.index.IndexWriter.mergeSegments(II)V(IndexWriter.java:681)\n\tat org.apache.lucene.index.IndexWriter.mergeSegments(I)V(IndexWriter.java:658)\n\tat org.apache.lucene.index.IndexWriter.flushRamSegments()V(IndexWriter.java:628)\n\tat org.apache.lucene.index.IndexWriter.close()V(IndexWriter.java:375)\n\nThe second one exposes a problem in the close() method which is that the index write.lock is not released when exceptions are thrown in close() causing subsequent attempts to open an IndexWriter to fail.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jedws", "_JiraUser__key": "jedws", "_JiraUser__display_name": "Jed Wesley-Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jedws"}, "_JiraIssueComment__comment_id": "12458669", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12458669"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-12-18T20:57:43.000+0000", "_JiraIssueComment__comment_body": "I just resolved LUCENE-603 as a dup of this issue.\n\nIt would be awesome if we could get a test case that shows this happening.  Enough people seem to hit it that it seems likely something is lurking out there so I'd like to get it fixed!!", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12459457", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12459457"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-08T05:42:15.803+0000", "_JiraIssueComment__comment_body": "We have now seen this in a number of customer sites since upgrading JIRA to use Lucene 1.9.1. The JIRA report is here: http://jira.atlassian.com/browse/JRA-11861\n\nWe only seem to have seen it since the upgrade from 1.4.3 to 1.9.1, we hadn't seen it before then.\n\nThis is now a major issue for us, it is hitting a number of our customers. I am trying to generate a repeatable test for it as a matter of urgency.\n\nAs a follow-up we sometimes see the old ArrayIndexOutOfBoundsEx in BitVector.get() (BitVector.java:63)\n\nwill post more if I find something worth sharing.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jedws", "_JiraUser__key": "jedws", "_JiraUser__display_name": "Jed Wesley-Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jedws"}, "_JiraIssueComment__comment_id": "12462949", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12462949"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-08T05:44:17.130+0000", "_JiraIssueComment__comment_body": "and we also see ArrayIndexOutOfBoundsEx in the SegmentReader.isDeleted() method:\n\njava.lang.ArrayIndexOutOfBoundsException\n        at org.apache.lucene.index.SegmentReader.isDeleted(I)Z(Optimized Method)\n        at org.apache.lucene.index.SegmentMerger.mergeFields()I(Optimized Method)\n        at org.apache.lucene.index.SegmentMerger.merge()I(Optimized Method)\n        at org.apache.lucene.index.IndexWriter.mergeSegments(II)V(IndexWriter.java:681)", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jedws", "_JiraUser__key": "jedws", "_JiraUser__display_name": "Jed Wesley-Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jedws"}, "_JiraIssueComment__comment_id": "12462950", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12462950"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-08T13:09:05.453+0000", "_JiraIssueComment__comment_body": "OK: I finally found one way that this corruption can occur!  I will\ncreate a unit test & commit a fix.\n\nIf you delete by document number, and, that document number is larger\nthan maxDoc, but only by a little, then the call to\ndeletedDocs.set(num) may in fact succeed (ie, no exception), but will\nhave set bits that are \"out of bounds\" in the BitVector's bits array.\n\nThis is because the bits array is an array of bytes and so you can\nhave up to 7 of these unused bits at the end.  Once this has happened,\nany attempt to merge this segment will hit the \"docs out of order\"\nexception because the BitVector's count() method will count these\n\"illegally set\" bits and thus make the SegmentMerger think too many\ndocs are deleted. \n\nUnfortunately, this case only occurs if you use deleteDocument(int),\nso I can't yet explain how this happens when using only\ndeleteDocument(Term).\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12463029", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463029"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-08T18:34:10.671+0000", "_JiraIssueComment__comment_body": "\nI've committed a fix for this one case to the trunk.\n\nI'm leaving the issue open so folks above can try the fix and confirm\nwhether or not this fixes their cases.\n\nJed (or any other folks who have hit this above and are still\nlistening!), the fix is really trivial and would be easy to back\nport to prior releases: just run \"svn diff -r 494135:494136\" from\na Lucene checkout to see them.\n\nIf you are willing/able to try this in one of the environments where\nyou keep hitting this issue, that would be awesome: if this is in fact\nyour root cause, then you would see an ArrayIndexOutOfBoundsException\nat the point that the delete of a too-large docNum occurred (rather\nthan silent corruption and the above exception much later that you now\nsee); and if it's not your root cause after testing the fix, then we\nwould know for sure to look for another cause here.\n\nAre you sure that you only ever do IndexReader.deleteDocuments(Term)\nand not deleteDocuments(int docNum)?  I still can't explain how this\nerror could happen without using that second method.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12463093", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463093"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-09T01:27:24.171+0000", "_JiraIssueComment__comment_body": "Amazed by this long lasting bug report I was going similar routes to Mike, and I noticed 3 things - \n\n(1) the sequence of ops brought by Jason is wrong: \n -a- Open an IndexReader (#1) over an existing index (this reader is used for searching while updating the index)\n -b- Using this reader (#1) do a search for the document(s) that you would like to update; obtain their document ID numbers\n -c- Create an IndexWriter and add several new documents to the index (for me, this writing is done in other threads) (*)\n -d- Close the IndexWriter (*)\n -e- Open another IndexReader (#2) over the index\n -f- Delete the previously found documents by their document ID numbers using reader #2\n -g- Close the #2 reader\n -h- Create another IndexWriter (#2) and re-add the updated documents\n -i- Close the IndexWriter #2\n -j- Close the original IndexReader (#1) and open a new reader for general searching\n\nProblem here is that the docIDs found in (b) may be altered in step (d) and so step (f) would delete the wrong docs. In particular, it might attempt to delete ids that are out of the range. This might expose exactly the BitVector problem, and would explain the whole thing, but I too cannot see how it explains the delete-by-term case.\n\n(2) BitVectort silent ignoring of attempts to delete slightly-out-of-bound docs that fall in the higher byte - this the problem that Mike fixed. I think the fix is okay - though some applications might now get exceptions they did not get in the past - but I believe this is for their own good. \nHowever when I first ran into this I didn't notice that BitVector.size() would become wrong as result of this - nice catch Mike!\n\nI think however that the test Mike added does not expose the docs out of order bug - I tried this test without the fix and it only fail on the \"gotException assert\" - if you comment this assert the test pass. \n\nThe following test would expose the out-of-order bug - it would fail with out-of-order before the fix, and would succeed without it. \n\n  public void testOutOfOrder () throws IOException {\n    String tempDir = System.getProperty(\"java.io.tmpdir\");\n    if (tempDir == null) {\n      throw new IOException(\"java.io.tmpdir undefined, cannot run test: \"+getName());\n    }\n    \n    File indexDir = new File(tempDir, \"lucenetestindexTemp\");\n    Directory dir = FSDirectory.getDirectory(indexDir, true);\n\n    boolean create = true;\n    int numDocs = 0;\n    int maxDoc = 0;\n    while (numDocs < 100) {\n      IndexWriter iw = new IndexWriter(dir,anlzr,create);\n      create = false;\n      iw.setUseCompoundFile(false);\n      for (int i=0; i<2; i++) {\n        Document d = new Document();\n        d.add(new Field(\"body\",\"body\"+i,Store.NO,Index.UN_TOKENIZED));\n        iw.addDocument(d);\n      }\n      iw.optimize();\n      iw.close();\n      IndexReader ir = IndexReader.open(dir);\n      numDocs = ir.numDocs();\n      maxDoc = ir.maxDoc();\n      assertEquals(numDocs,maxDoc);\n      for (int i=7; i >=-1; i--) {\n        try {\n          ir.deleteDocument(maxDoc+i);\n        } catch (ArrayIndexOutOfBoundsException e) {  \n        }\n      }\n      ir.close();\n    }\n  }\n\nMike, do you agree?\n\n(3) maxDoc() computation in SegmentReader is based (on some paths) in RandomAccessFile.length(). IIRC I saw cases (in previous project) where File.length() or RAF.length() (not sure which of the two) did not always reflect real length, if the system was very busy IO wise, unless FD.sync() was called (with performance hit). \n\nThis post seems relevant - RAF.length over 2GB in NFS - http://forum.java.sun.com/thread.jspa?threadID=708670&messageID=4103657 \n\nNot sure if this can be the case here but at least we can discuss whether it is better to always store the length.\n\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "doronc", "_JiraUser__key": "doronc", "_JiraUser__display_name": "Doron Cohen", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=doronc"}, "_JiraIssueComment__comment_id": "12463176", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463176"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-09T06:38:56.802+0000", "_JiraIssueComment__comment_body": "Hi Michael,\n\nThis is awesome, I have prepared a patched 1.9.1: http://jira.atlassian.com/secure/attachment/19390/lucene-core-1.9.1-atlassian-patched-2007-01-09.jar\n\nUnfortunately we don't have a repeatable test for this so we will have to distribute to afflicted customers and - well, pray I guess. We have been seeing this sporadically in our main JIRA instance http://jira.atlassian.com so we will hopefully not observe it now.\n\nWe do only use the deleteDocuments(Term) method, so we are not sure whether this will truly fix our problem, but we note that that method calls deleteDocument(int) based on the TermDocs returned for the Term - and maybe they can be incorrect???\n\nOut of interest, apart from changing from 1.4.3 to 1.9.1, in the JIRA 3.7 release we changed our default merge factor to 4 from 10. We hadn't seen this problem before, and suddenly we have had a reasonable number of occurrences. ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jedws", "_JiraUser__key": "jedws", "_JiraUser__display_name": "Jed Wesley-Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jedws"}, "_JiraIssueComment__comment_id": "12463202", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463202"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-09T06:41:40.371+0000", "_JiraIssueComment__comment_body": "Alas, this doesn't appear to be the problem. We are still getting it, but we do at least have a little more info. We added the doc and lastDoc to the IllegalArgEx and we are getting very strange numbers:\n\njava.lang.IllegalStateException: docs out of order (-1764 < 0)\n        at org.apache.lucene.index.SegmentMerger.appendPostings([Lorg/apache/lucene/index/SegmentMergeInfo;I)I(SegmentMerger.java:335)\n        at org.apache.lucene.index.SegmentMerger.mergeTermInfo([Lorg/apache/lucene/index/SegmentMergeInfo;I)V(SegmentMerger.java:298)\n        at org.apache.lucene.index.SegmentMerger.mergeTermInfos()V(SegmentMerger.java:272) \n        at org.apache.lucene.index.SegmentMerger.mergeTerms()V(SegmentMerger.java:236)\n        at org.apache.lucene.index.SegmentMerger.merge()I(SegmentMerger.java:89)\n        at org.apache.lucene.index.IndexWriter.mergeSegments(II)V(IndexWriter.java:681)\n        at org.apache.lucene.index.IndexWriter.mergeSegments(I)V(IndexWriter.java:658)\n        at org.apache.lucene.index.IndexWriter.maybeMergeSegments()V(IndexWriter.java:646)\n        at org.apache.lucene.index.IndexWriter.addDocument(Lorg/apache/lucene/document/Document;Lorg/apache/lucene/analysis/Analyzer;)V(IndexWriter.java:453) \n        at org.apache.lucene.index.IndexWriter.addDocument(Lorg/apache/lucene/document/Document;)V(IndexWriter.java:436)\n\nwhere doc = -1764 and lastDoc is zero", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jedws", "_JiraUser__key": "jedws", "_JiraUser__display_name": "Jed Wesley-Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jedws"}, "_JiraIssueComment__comment_id": "12463203", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463203"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-09T11:18:16.051+0000", "_JiraIssueComment__comment_body": "Jed, thanks for testing the fix!\n\n> Alas, this doesn't appear to be the problem. We are still getting\n> it, but we do at least have a little more info. We added the doc and\n> lastDoc to the IllegalArgEx and we are getting very strange numbers:\n>\n> java.lang.IllegalStateException: docs out of order (-1764 < 0)\n> ...\n>\n> where doc = -1764 and lastDoc is zero\n\nOK, so we've definitely got something else at play here (bummer!). That\n(negative doc number) is very strange.  I will keep looking a this.  I\nwill prepare a patch on 1.9.1 that adds some more instrumentation so\nwe can get more details when you hit this ...\n\n> We do only use the deleteDocuments(Term) method, so we are not sure\n> whether this will truly fix our problem, but we note that that\n> method calls deleteDocument(int) based on the TermDocs returned for\n> the Term - and maybe they can be incorrect???\n\nRight, but I had thought the docNum's coming in from this path would\nbe correct.  It sounds like we have another issue at play here that\ncan somehow get even these doc numbers messed up.\n\n> Out of interest, apart from changing from 1.4.3 to 1.9.1, in the\n> JIRA 3.7 release we changed our default merge factor to 4 from\n> 10. We hadn't seen this problem before, and suddenly we have had a\n> reasonable number of occurrences.\n\nInteresting.  Maybe try changing back to 4 and see if it suppresses\nthe bug?  Might give us [desperately needed] more data to cling to\nhere!  On the 1.4.3 -> 1.9.1 change, some of the cases above were even\npre-1.4.x (though they could have been from yet another root cause or\nmaybe filesystem) so it's hard to draw hard conclusions on this\nfront.\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12463243", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463243"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-09T11:32:04.270+0000", "_JiraIssueComment__comment_body": "\nDoron,\n\n> (1) the sequence of ops brought by Jason is wrong:\n>   ...\n>\n> Problem here is that the docIDs found in (b) may be altered in step\n> (d) and so step (f) would delete the wrong docs. In particular, it\n> might attempt to delete ids that are out of the range. This might\n> expose exactly the BitVector problem, and would explain the whole\n> thing, but I too cannot see how it explains the delete-by-term case.\n\nRight, the case I fixed only happens when the Lucene\ndeleteDocument(int docNum) is [slightly] mis-used.  Ie if you are\n\"playing by the rules\" you would never have hit this bug.  And this\nparticular use case is indeed incorrect: doc numbers are only valid to\nthe one reader that you got them from.\n\n> I think however that the test Mike added does not expose the docs\n> out of order bug - I tried this test without the fix and it only\n> fail on the \"gotException assert\" - if you comment this assert the\n> test pass.\n\nHuh, I see my test case (in IndexReader) indeed hitting the original\n\"docs out of order\" exception.  If I take the current trunk and\ncomment out the (one line) bounds check in BitVector.set and run that\ntest, it hits the \"docs out of order\" exception.\n\nAre you sure you updated the change (to tighten the check to a <= from\na <) to index/SegmentMerger.java?  Because, I did indeed find that the\ntest failed to fail when I first wrote it (but should have).  So in\ndigging why it didn't fail as expected, I found that the check for\n\"docs out of order\" missed the boundary case of the same doc number\ntwice in a row.  Once I fixed that, the test failed as expected.\n\n> (3) maxDoc() computation in SegmentReader is based (on some paths)\n> in RandomAccessFile.length(). IIRC I saw cases (in previous project)\n> where File.length() or RAF.length() (not sure which of the two) did\n> not always reflect real length, if the system was very busy IO wise,\n> unless FD.sync() was called (with performance hit).\n\nYes I saw this too.  From the follow-on discussion it sounds like we\nhaven't found a specific known JVM bug here.  Still, it does make me\nnervous that we rely on file length to derive maxDoc.\n\nIn general I think we should rely on as little as possible from the\nfile system (there are so many cross platform issues/differences) and\ninstead explicitly store things like maxDoc into the index.  I will\nopen a separate Jira issue to track this.  Also I will record this\npath in the instrumentation patch for 1.9.1 just to see if we are\nactually hitting something here (I think unlikely but possible).\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12463247", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463247"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-09T11:40:58.334+0000", "_JiraIssueComment__comment_body": "OK, I created LUCENE-767 for the \"maxDoc should be explicitly stored in the index\" issue.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12463249", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463249"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-09T14:50:21.430+0000", "_JiraIssueComment__comment_body": "\nJed, one question: when you tested the fix, you fully rebuilt your\nindex from scratch, right?  Just want to verify that.  You have to\nre-index because once the index is corrupted it will eventually hit\nthe \"docs out of order\" exception even if you fix the original cause.\n\nOK I've prepared a patch off 1.9.1 (just attached it).  The patch\npasses all unit tests on 1.9.1.\n\nIt has the changes I committed to the trunk yesterday, plus\ninstrumentation (messages printed to a PrintStream) to catch places\nwhere doc numbers are not correct.\n\nAll messages I added print to a newly added infoStream static member\nof SegmentMerger.  You can do SegmentMerger.setInfoStream(...) to\nchange it (it defaults to System.err).\n\nJed if you could get the error to re-occur with this patch and then\npost the resulting messages, that would be great.  Hopefully it gives\nus enough information to find the source here or at least to have\nanother iteration with yet more instrumentation.  Thanks!\n\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12463294", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463294"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-10T00:57:48.451+0000", "_JiraIssueComment__comment_body": "Hi Michael,\n\nThanks for the patch, applied and recreated. Attached is the log.\n\nTo be explicit, we are recreating the index via the IndexWriter ctor with the create flag set and then completely rebuilding the index. We are not completely deleting the entire directory. There ARE old index files (_*.cfs & _*.del) in the directory with updated timestamps that are months old. If I completely recreate the directory the problem does go away. This is a fairly trivial \"fix\", but we are still investigating as we want to know if this is indeed the problem, how we have come to make it prevalent, and what the root cause is.\n\nThanks for all the help everyone.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jedws", "_JiraUser__key": "jedws", "_JiraUser__display_name": "Jed Wesley-Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jedws"}, "_JiraIssueComment__comment_id": "12463440", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463440"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-10T06:07:58.268+0000", "_JiraIssueComment__comment_body": "BTW. We have looked at all the open files referenced by the VM when the indexing errors occur, and there does not seem to be any reference to the old index segment files, so I am not sure how those files are influencing this problem.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jedws", "_JiraUser__key": "jedws", "_JiraUser__display_name": "Jed Wesley-Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jedws"}, "_JiraIssueComment__comment_id": "12463470", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463470"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-10T07:36:28.738+0000", "_JiraIssueComment__comment_body": "Jed, is it possible that when re-creating the index, while IndexWriter is constructed with create=true, FSDirectory is opened with create=false?\nI suspect so, because otherwise, old  .del files would have been deleted. \nIf indeed so, newly created segments, which have same names as segments in previous (bad) runs, when opened, would read the (bad) old .del file. \nThis would possibly expose the bug fixed by Michael. \nI may be over speculating here, but if this is the case, it can also explain why changing the merge factor from 4 to 10 exposed the problem. \n\nIn fact, let me speculate even further - if indeed when creating the index from scratch, the FSDirectory is (mistakenly) opened with create=false, as long as you always repeated the same sequencing of adding and deleting docs, you were likely to almost not suffer from this mistake, because segments created with same names as (old) .del files simply see docs as deleted before the docs are actually deleted by the program. The search behaves wrongly, not finding these docs before they are actually deleted, but no exception is thrown when adding docs. However once the merge factor was changed from 4 to 10, the matching between old .del files and new segments (with same names) was broken, and the out-of-order exception appeared. \n\n...and if this is not the case, we would need to look for something else...", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "doronc", "_JiraUser__key": "doronc", "_JiraUser__display_name": "Doron Cohen", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=doronc"}, "_JiraIssueComment__comment_id": "12463483", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463483"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-10T10:48:05.329+0000", "_JiraIssueComment__comment_body": "OK from that indexing-failure.log (thanks Jed!) I can see that indeed\nthere are segments whose maxDoc() is much smaller than\ndeleteDocs.count().  This then leads to negative doc numbers on\nmerging these segments.\n\nJed when you say \"there are old files (_*.cfs & _*.del) in this\ndirectory with updated timestamps that are months old\" what do you\nmean by \"with updated timestamps\"?  Which timestamp is months old and\nwhich one is updated?\n\nOK, assuming Jed you are indeed sending \"create=false\" when creating\nthe Directory and then passing that directory to IndexWriter with\ncreate=true, I think we now have this case fully explained (thanks\nDoron): your old _*.del files are being incorrectly opened & re-used\nby Lucene, when they should not be.\n\nLucene (all released versions but not the trunk version, see below)\ndoes a simple fileExists(\"_XXX.del\") call to determine if a segment\nXXX has deletes.\n\nBut when that _XXX.del is a leftover from a previous index, it very\nlikely doesn't \"match\" the newly created _XXX segment.  (Especially if\nmerge factor has changed but also if order of operations has changed,\nwhich I would expect in this use case).\n\nIf that file exists, Lucene assumes it's for this segment and so opens\nit and uses it.  If it happens that this _XXX.del file has more\ndocuments in it than the newly created _XXX.cfs segment, then negative\ndoc numbers will result (and then later cause the \"docs out of order\"\nexception).  If it happens that the _XXX.del file has fewer documents\nthan the newly created _XXX.cfs segment then you'll hit\nArrayIndexOutOfBounds exceptions in calls to isDeleted(...).  If they\nare exactly equal then you'd randomly see some of your docs got\ndeleted.\n\nNote that the trunk version of Lucene has already fixed this bug (as\npart of lockless commits):\n\n  * Whether a segment has deletions or not is now explictly stored in\n    the segments file rather than relying on a \"fileExists(...)\" call.\n    So, if an old _XXX.del existed in the filesystem, the newly\n    created _XXX segment would not open it.\n\n  * Furthermore, the trunk version of Lucene uses a new\n    IndexFileDelter class to remove any unreferenced index files.\n    This means it would have removed these old _*.cfs and _*.del files\n    even in the case where a directory was created with \"create=false\"\n    and the IndexWriter was created with \"create=true\".\n\nTo summarize:\n\n  * There was one case where if you gave slightly illegal doc numbers\n    (within 7 of the actual maxDoc) Lucene may silently accept the\n    call but would corrupt your index only to be seen later as an\n    \"docs out of order\" IllegalStateException when the segment is\n    merged.  This was just a missing boundary case check.  This case\n    is now fixed in the trunk (you get an\n    ArrayIndexOutOfBoundsException if doc number is too large).\n\n  * There is also another case, that only happens if you have old\n    _*.del files leftover from a previous index while re-creating a\n    new index.\n\n    The workaround is simple here: always open the Directory with\n    create=true (or, remove the directory contents yourself before\n    hand).  (IndexWriter does this if you give it a String or File\n    with create=true).\n\n    This is really a bug in Lucene, but given that it's already fixed\n    in the trunk, and the workaround is simple, I'm inclined to not\n    fix it in prior releases and instead publicize the issue (I will\n    do so on java-user).\n\n    But, I will commit two additional IllegalStateException checks to\n    the trunk when a segment is first initialized: 1) check that the\n    two different sources of \"maxDoc\" (fieldsReader.size() and\n    si.docCount) are the same, and 2) check that the number of pending\n    deletions does not exceed maxDoc().  When an index has\n    inconsistency I think the earlier it's detected the better.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12463524", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463524"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-10T19:18:57.631+0000", "_JiraIssueComment__comment_body": "> BTW. We have looked at all the open files referenced by the VM when\n> the indexing errors occur, and there does not seem to be any reference\n> to the old index segment files, so I am not sure how those files are\n> influencing this problem.\n\nJed just to answer this question: the _XXX.del files are opened very\nbriefly because the contents of this file are loaded / cached in\nmemory, and the the file handle is closed.  I don't think the _XXX.cfs\nfiles are affecting this issue (are not opened).\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12463674", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463674"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-11T01:18:32.607+0000", "_JiraIssueComment__comment_body": "Michael, Doron, you guys are legends!\n\nIndeed the problem is using only the IndexWriter with create true to recreate the directory. Creating a new Directory with create true does fix the problem. The javadoc for this constructor is fairly explicit that it should recreate the index for you (no caveat), so I would consider that a bug, but - given that head fixes it - not one that requires any action.\n\nThanks guys for the prompt attention, excellent and thorough analysis.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jedws", "_JiraUser__key": "jedws", "_JiraUser__display_name": "Jed Wesley-Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jedws"}, "_JiraIssueComment__comment_id": "12463781", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463781"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-11T11:46:20.202+0000", "_JiraIssueComment__comment_body": "Phew!  I'm glad we finally got to the bottom of this one.\n\nThank you for your persistent and fast testing iterations, Jed; this\nissue has been open for far too long!\n\nI will send a summary email to java-user and resolve this issue,\nfinally.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12463872", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463872"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-11T12:09:01.221+0000", "_JiraIssueComment__comment_body": "\nActually, this reminds me that, as of lockless commits, there is one\nimportant tradeoff on which \"create=true\" to use (the case on windows\nwhere you want to re-create the index but readers are currently using\nit).  I will call out this difference in the javadocs.\n\nAlthough, why do we even have a \"create\" parameter in the directory?\nI think it's confusing (and dangerous, pre-trunk, due to this issue)\nto have two ways of doing the same thing?\n\nLogically, I don't think a Directory should take the responsibility of\ndeleting old files (including old lock files).  It should be a clean\ninterface for doing so, but I think the IndexWriter alone should be\nthe class that deletes files from the directory.\n\nWith lockless commits this has become an important difference, ie, the\nnew IndexFileDeleter class (used by IndexWriter) handles re-trying\nfiles that are in-use (on Windows) whereas FSDirectory will throw an\nexception if create=true and there are index files are in use.\n\nI think we should deprecate the \"create\" argument to\nFSDirectory.getDirectory(*) and leave only the create argument in\nIndexWriter's constructors.  Am I missing something?  Is there are a\nreason not to do this?\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12463875", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463875"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-01-11T12:14:18.277+0000", "_JiraIssueComment__comment_body": "Resolving this now, finally (I'll move the two \"create\" arguments\ndiscussion to a separate issue if we decide to go forward with that):\n\n  * Fixed (in the trunk) to catch boundary cases of incorrect docNum's\n    to deleteDocuments.\n\n  * Fixed (in the trunk) to do earlier \"IllegalState\" checks to catch\n    index corruption sooner.  Also fixed the existing IllegalState\n    check to catch missing boundary cases.\n\n  * The re-using of old _XXX.del files is already fixed with lockless\n    commits (in trunk).  This remains open for past releases, but the\n    workaround is simple and I've now publicized this on java-user.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12463877", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12463877"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2007-02-27T18:10:32.036+0000", "_JiraIssueComment__comment_body": "Closing all issues that were resolved for 2.1.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12476252", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314290/comment/12476252"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312257", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--bug23650.txt", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "lucene@ziplip.com", "_JiraUser__key": "lucene@ziplip.com", "_JiraUser__display_name": "Arvind Srinivasan", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=lucene%40ziplip.com"}, "_JiraAttachment__attachment_size": 2143, "_JiraAttachment__attachment_created": "2005-06-14T23:46:42.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312257/ASF.LICENSE.NOT.GRANTED--bug23650.txt", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12322202", "_JiraAttachment__attachment_filename": "corrupted.part1.rar", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jcuzens", "_JiraUser__key": "jcuzens", "_JiraUser__display_name": "Jarrod Cuzens", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jcuzens"}, "_JiraAttachment__attachment_size": 9437184, "_JiraAttachment__attachment_created": "2006-01-21T07:41:44.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12322202/corrupted.part1.rar", "_JiraAttachment__attachment_mime_type": "application/x-rar-compressed"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12322203", "_JiraAttachment__attachment_filename": "corrupted.part2.rar", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jcuzens", "_JiraUser__key": "jcuzens", "_JiraUser__display_name": "Jarrod Cuzens", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jcuzens"}, "_JiraAttachment__attachment_size": 3509898, "_JiraAttachment__attachment_created": "2006-01-21T07:44:02.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12322203/corrupted.part2.rar", "_JiraAttachment__attachment_mime_type": "application/x-rar-compressed"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12348606", "_JiraAttachment__attachment_filename": "indexing-failure.log", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jedws", "_JiraUser__key": "jedws", "_JiraUser__display_name": "Jed Wesley-Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jedws"}, "_JiraAttachment__attachment_size": 2878708, "_JiraAttachment__attachment_created": "2007-01-10T00:50:50.178+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12348606/indexing-failure.log", "_JiraAttachment__attachment_mime_type": "text/x-log"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12348553", "_JiraAttachment__attachment_filename": "LUCENE-140-2007-01-09-instrumentation.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraAttachment__attachment_size": 6143, "_JiraAttachment__attachment_created": "2007-01-09T14:49:26.107+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12348553/LUCENE-140-2007-01-09-instrumentation.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12320898", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:24:57.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "23650", "_JiraIssueChangeLogItem__to_str": "12314290"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12351550", "_Jira_Issue_ChangeLog_History__created_time": "2006-01-21T07:41:44.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jcuzens", "_JiraUser__key": "jcuzens", "_JiraUser__display_name": "Jarrod Cuzens", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jcuzens"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "corrupted.part1.rar"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12351551", "_Jira_Issue_ChangeLog_History__created_time": "2006-01-21T07:44:02.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jcuzens", "_JiraUser__key": "jcuzens", "_JiraUser__display_name": "Jarrod Cuzens", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jcuzens"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "corrupted.part2.rar"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12456607", "_Jira_Issue_ChangeLog_History__created_time": "2007-01-08T18:34:21.961+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Lucene Developers", "_JiraIssueChangeLogItem__to_str": "Michael McCandless"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12456840", "_Jira_Issue_ChangeLog_History__created_time": "2007-01-09T14:49:26.251+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "LUCENE-140-2007-01-09-instrumentation.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12456995", "_Jira_Issue_ChangeLog_History__created_time": "2007-01-10T00:50:50.297+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jedws", "_JiraUser__key": "jedws", "_JiraUser__display_name": "Jed Wesley-Smith", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jedws"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "indexing-failure.log"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12457445", "_Jira_Issue_ChangeLog_History__created_time": "2007-01-11T12:14:18.300+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "2.1"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Fixed"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Open", "_JiraIssueChangeLogItem__to_str": "Resolved"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12471285", "_Jira_Issue_ChangeLog_History__created_time": "2007-02-27T18:10:32.039+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13066585", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:24:51.626+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13092049", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T12:08:54.418+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13153063", "_Jira_Issue_ChangeLog_History__created_time": "2011-06-02T22:04:35.968+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "sarowe", "_JiraUser__key": "steve_rowe", "_JiraUser__display_name": "Steven Rowe", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=sarowe"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "unspecified", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16381422", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:04:52.362+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16940049", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T20:00:28.870+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 102960506.3, "_JiraIssue__close_time": 4082173.739, "_JiraIssue__contributors_number": 13, "_JiraIssue__num_of_files_changed": 5, "_JiraIssue__num_of_lines_changed": 67}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314287", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314287", "_JiraIssueData__issue_key": "LUCENE-137", "_JiraIssueData__priority": "Major", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "java-dev@lucene.apache.org", "_JiraUser__key": "java-dev@lucene.apache.org", "_JiraUser__display_name": "Lucene Developers", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=java-dev%40lucene.apache.org"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hani", "_JiraUser__key": "hani", "_JiraUser__display_name": "Hani Suleiman", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hani"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hani", "_JiraUser__key": "hani", "_JiraUser__display_name": "Hani Suleiman", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hani"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2003-09-30T08:08:11.000+0000", "_JiraIssueData__issue_description": "On OSX, the default encoding is MacRoman, so this causes TestRussianAnalyzer to fail, since the \nfile is not read in correctly.\n\nThe correct solution is to explicitly specify that the test file should be read using iso-8859-1 \nencoding. I've attached a patch.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "Russian Analyzer assumes default encoding is iso-8859-1", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2003-09-30T08:09:23.000+0000", "_JiraIssueComment__comment_body": "Created an attachment (id=8390)\nPatch to have fields be of type Reader, and to explicitly specify file encoding\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hani", "_JiraUser__key": "hani", "_JiraUser__display_name": "Hani Suleiman", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hani"}, "_JiraIssueComment__comment_id": "12321380", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314287/comment/12321380"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2003-09-30T10:12:35.000+0000", "_JiraIssueComment__comment_body": "Thank you, thank you!  This failure was really bugging me.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jakarta@ehatchersolutions.com", "_JiraUser__key": "jakarta@ehatchersolutions.com", "_JiraUser__display_name": "Erik Hatcher", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jakarta%40ehatchersolutions.com"}, "_JiraIssueComment__comment_id": "12321381", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314287/comment/12321381"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12312253", "_JiraAttachment__attachment_filename": "ASF.LICENSE.NOT.GRANTED--russianTest.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "hani", "_JiraUser__key": "hani", "_JiraUser__display_name": "Hani Suleiman", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=hani"}, "_JiraAttachment__attachment_size": 2774, "_JiraAttachment__attachment_created": "2003-09-30T08:09:23.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12312253/ASF.LICENSE.NOT.GRANTED--russianTest.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12320895", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:24:55.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "23505", "_JiraIssueChangeLogItem__to_str": "12314287"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12402254", "_Jira_Issue_ChangeLog_History__created_time": "2006-05-27T01:36:54.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cutting", "_JiraUser__key": "cutting", "_JiraUser__display_name": "Doug Cutting", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cutting"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13064122", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:14:06.362+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13089342", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T11:58:43.990+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13153003", "_Jira_Issue_ChangeLog_History__created_time": "2011-06-02T22:03:45.028+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "sarowe", "_JiraUser__key": "steve_rowe", "_JiraUser__display_name": "Steven Rowe", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=sarowe"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "CVS Nightly - Specify date in submission", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16379970", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:04:10.616+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16939211", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T20:00:16.142+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 0, "_JiraIssue__close_time": 83784523.0, "_JiraIssue__contributors_number": 3, "_JiraIssue__num_of_files_changed": 1, "_JiraIssue__num_of_lines_changed": 22}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314274", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314274", "_JiraIssueData__issue_key": "LUCENE-124", "_JiraIssueData__priority": "Minor", "_JiraIssueData__assignee": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cormac@siderean.com", "_JiraUser__key": "cormac@siderean.com", "_JiraUser__display_name": "Cormac Twomey", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cormac%40siderean.com"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cormac@siderean.com", "_JiraUser__key": "cormac@siderean.com", "_JiraUser__display_name": "Cormac Twomey", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cormac%40siderean.com"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2003-07-10T03:46:44.000+0000", "_JiraIssueData__issue_description": "According to the website's \"Query Syntax\" page, fuzzy searches are given a\nboost of 0.2. I've found this not to be the case, and have seen situations where\nexact matches have lower relevance scores than fuzzy matches.\n\nRather than getting a boost of 0.2, it appears that all variations on the term\nare first found in the model, where dist* > 0.5.\n\n* dist = levenshteinDistance / length of min(termlength, variantlength)\n\nThis then leads to a boolean OR search of all the variant terms, each of whose\nboost is set to (dist - 0.5)*2 for that variant.\n\nThe upshot of all of this is that there are many cases where a fuzzy match will\nget a higher relevance score than an exact match.\n\nSee this email for a test case to reproduce this anomalous behaviour.\nhttp://www.mail-archive.com/lucene-dev@jakarta.apache.org/msg02819.html\n\nHere is a candidate patch to address the issue -\n\n*** lucene-1.2\\src\\java\\org\\apache\\lucene\\search\\FuzzyTermEnum.java\tSun Jun 09\n13:47:54 2002\n--- lucene-1.2-modified\\src\\java\\org\\apache\\lucene\\search\\FuzzyTermEnum.java\tFri\nMar 14 11:37:20 2003\n***************\n*** 99,105 ****\n      }\n      \n      final protected float difference() {\n!         return (float)((distance - FUZZY_THRESHOLD) * SCALE_FACTOR);\n      }\n      \n      final public boolean endEnum() {\n--- 99,109 ----\n      }\n      \n      final protected float difference() {\n! \t\tif (distance == 1.0) {\n! \t\t\treturn 1.0f;\n! \t\t}\n! \t\telse\n! \t\t\treturn (float)((distance - FUZZY_THRESHOLD) * SCALE_FACTOR);\n      }\n      \n      final public boolean endEnum() {\n***************\n*** 111,117 ****\n       ******************************/\n      \n      public static final double FUZZY_THRESHOLD = 0.5;\n!     public static final double SCALE_FACTOR = 1.0f / (1.0f - FUZZY_THRESHOLD);\n      \n      /**\n       Finds and returns the smallest of three integers \n--- 115,121 ----\n       ******************************/\n      \n      public static final double FUZZY_THRESHOLD = 0.5;\n!     public static final double SCALE_FACTOR = 0.2f * (1.0f / (1.0f -\nFUZZY_THRESHOLD));\n      \n      /**\n       Finds and returns the smallest of three integers", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "Fuzzy Searches do not get a boost of 0.2 as stated in \"Query Syntax\" doc", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2003-09-10T22:56:36.000+0000", "_JiraIssueComment__comment_body": "Cormac, the problem you described at\nhttp://www.mail-archive.com/lucene-dev@jakarta.apache.org/msg02819.html seems clear.\n\nI do not see any mention of 0.2f boost in any of the *Fuzzy* classes.  This is a\ndocumentation bug, which I will fix soon.\n\nHowever, your fix may still be valid, as exact matches should never have lower\nscore than fuzzy ones.  I would be very greatful if you could submit that\nlevtest class as a JUnit test, so we can see the bug clearly before applying\nyour patch.\n\nFinally, why did you choose the boost of 0.2?  Why not 0.1 or 0.3 for example? \nAnd is it possible that choosing a random(?) number such as 0.2, will work for\nyour test document set, but may not work for some other cases?\n\nThank you.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueComment__comment_id": "12321341", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314274/comment/12321341"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2003-09-11T01:01:49.000+0000", "_JiraIssueComment__comment_body": "I will work on massaging my test case into a JUnit test.\n\nMeanwhile, I chose the value of 0.2 simply because it is the documented\nbehavior, and therefore I considered that to be the expected, even desired,\nbehavior. That said, it does appear to be a randomly chosen value, although not\nchosen by me :-)\n\nFollowing the logic of how the scoring mechanism works (or at least my\nunderstanding of it), this is not a universal fix, but rather as I state in my\noriginal email on lucene-dev, it mitigates the problem. I chose the fix simply\nas it brought the functionality in line with documented behavior.\n\nThe essence of the problem is the battle in scoring between levenshtein distance\n and term frequency - high frequency terms are scored lower than low frequency\nterms. A good example of a low frequency term is a typo in a document. If the\noriginal correctly spelled word has a very high frequency, the misspelled word\nwill come out on top, due to its significantly lower frequency.\n\nBy setting the boost to 0.2, We at least make it 5 times harder (in terms of\nfrequency) for the misspelled item to appear ahead of the correctly spelled\nitem. But this clearly means that it will still happen.\n\n--Cormac", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "cormac@siderean.com", "_JiraUser__key": "cormac@siderean.com", "_JiraUser__display_name": "Cormac Twomey", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=cormac%40siderean.com"}, "_JiraIssueComment__comment_id": "12321342", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314274/comment/12321342"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2005-09-23T04:49:15.000+0000", "_JiraIssueComment__comment_body": "I would suggest this is a duplicate of http://issues.apache.org/jira/browse/LUCENE-329\n\nThe idf rating of expanded terms should be the same and not favour rarer terms. I suggest that this applies to all auto-expanding searches eg range queries.\n\nShould we drop this bug as a duplicate?", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mharwood", "_JiraUser__key": "markh", "_JiraUser__display_name": "Mark Harwood", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mharwood"}, "_JiraIssueComment__comment_id": "12330223", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314274/comment/12330223"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-02-15T15:46:33.163+0000", "_JiraIssueComment__comment_body": "Here is a patch, with a test for the issue.\n\nThis patch adds TOP_TERMS_CONSTANT_BOOLEAN_REWRITE to complement TOP_TERMS_SCORING_BOOLEAN_REWRITE.\n\nNote: this solution is different than LUCENE-329, but I think this rewrite method could be useful for other queries as well.\n\nexample usage:\n{code}\nFuzzyQuery query = new FuzzyQuery(new Term(\"field\", \"Lucene\"));\nquery.setRewriteMethod(MultiTermQuery.TOP_TERMS_CONSTANT_BOOLEAN_REWRITE);\nScoreDoc[] hits = searcher.search(query, ...)\n ...\n{code}", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraIssueComment__comment_id": "12833856", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314274/comment/12833856"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-02-15T16:02:41.915+0000", "_JiraIssueComment__comment_body": "I will wait till after the code freeze and commit this in a few days if no one objects.\n\nI don't claim its a 'best-practice' fix for fuzzy (see LUCENE-329 for ideas on that), I just think TOP_TERMS_CONSTANT_BOOLEAN_REWRITE is a useful complement to TOP_TERMS_SCORING_BOOLEAN_REWRITE, for MultiTermQueries that want the Top-N terms expansion, but the constant score behavior of CONSTANT_BOOLEAN_REWRITE.\n\nthis patch doesnt change any defaults for fuzzy either. in fact its not specific to fuzzy at all.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraIssueComment__comment_id": "12833865", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314274/comment/12833865"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-02-15T16:51:15.367+0000", "_JiraIssueComment__comment_body": "uwe pointed out to me, i think there is a naming problem with TOP_TERMS_CONSTANT_BOOLEAN_REWRITE, as the entire booleanquery will not produce the same score like CONSTANT_SCORE_BOOLEAN_QUERY_REWRITE. \n\nI think the behavior makes sense though, as it wouldnt make sense to use TOP_TERMS without per-term boosting, but we need to fix the naming... and TOP_TERMS_BOOST_BOOLEAN_REWRITE sounds confusing.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraIssueComment__comment_id": "12833885", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314274/comment/12833885"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-02-16T11:17:58.624+0000", "_JiraIssueComment__comment_body": "bq. I will wait till after the code freeze and commit this in a few days if no one objects. \n\nThe code freeze only affects branches. Trunk is only frozen for fixes that should also go into branches.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "uschindler", "_JiraUser__key": "thetaphi", "_JiraUser__display_name": "Uwe Schindler", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=uschindler"}, "_JiraIssueComment__comment_id": "12834163", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314274/comment/12834163"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-02-16T18:49:54.409+0000", "_JiraIssueComment__comment_body": "bq. The code freeze only affects branches. Trunk is only frozen for fixes that should also go into branches.\n\nok, well I will wait on this one anyway especially as there is a concern about naming... no rush, looks like its been open for a long time.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraIssueComment__comment_id": "12834376", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314274/comment/12834376"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-03-08T18:54:32.906+0000", "_JiraIssueComment__comment_body": "Attached is an updated patch:\n* Synced to trunk as these PQ rewrite methods allow setting of the size\n* Renamed to TopTermsBoostOnlyBooleanQueryRewrite\n\nPlease review, I think this rewrite method would also be helpful for\nimproving Fuzzy's junit tests: Testing that scores are correct, etc.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraIssueComment__comment_id": "12842768", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314274/comment/12842768"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-03-08T19:07:43.364+0000", "_JiraIssueComment__comment_body": "Patch looks good Robert!", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12842772", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314274/comment/12842772"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-03-08T19:17:51.748+0000", "_JiraIssueComment__comment_body": "Thanks Mike. I will commit later today if no one objects.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraIssueComment__comment_id": "12842776", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314274/comment/12842776"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2010-03-08T20:39:30.819+0000", "_JiraIssueComment__comment_body": "Committed revision 920499.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraIssueComment__comment_id": "12842810", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314274/comment/12842810"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12438212", "_JiraAttachment__attachment_filename": "LUCENE-124.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraAttachment__attachment_size": 7460, "_JiraAttachment__attachment_created": "2010-03-08T18:54:32.893+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12438212/LUCENE-124.patch", "_JiraAttachment__attachment_mime_type": "text/x-patch"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12435881", "_JiraAttachment__attachment_filename": "LUCENE-124.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_JiraAttachment__attachment_size": 5066, "_JiraAttachment__attachment_created": "2010-02-15T15:46:33.099+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12435881/LUCENE-124.patch", "_JiraAttachment__attachment_mime_type": "text/x-patch"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12320882", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:24:41.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "21446", "_JiraIssueChangeLogItem__to_str": "12314274"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12557652", "_Jira_Issue_ChangeLog_History__created_time": "2007-12-31T13:53:01.882+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "michaelbusch", "_JiraUser__key": "michaelbusch", "_JiraUser__display_name": "Michael Busch", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "priority", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Major", "_JiraIssueChangeLogItem__to_str": "Minor"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12650780", "_Jira_Issue_ChangeLog_History__created_time": "2008-11-10T22:42:49.430+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markrmiller@gmail.com", "_JiraUser__key": "markrmiller@gmail.com", "_JiraUser__display_name": "Mark Miller", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Link", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "This issue duplicates LUCENE-329"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12862377", "_Jira_Issue_ChangeLog_History__created_time": "2010-02-15T15:22:46.466+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "uschindler", "_JiraUser__key": "thetaphi", "_JiraUser__display_name": "Uwe Schindler", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=uschindler"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Lucene Developers", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12862396", "_Jira_Issue_ChangeLog_History__created_time": "2010-02-15T15:46:33.167+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "LUCENE-124.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12862397", "_Jira_Issue_ChangeLog_History__created_time": "2010-02-15T15:58:56.374+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Robert Muir"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12870572", "_Jira_Issue_ChangeLog_History__created_time": "2010-03-08T18:54:32.943+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "LUCENE-124.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12870613", "_Jira_Issue_ChangeLog_History__created_time": "2010-03-08T20:36:00.549+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "3.1"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Lucene Fields", "_JiraIssueChangeLogItem__field_type": "custom", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "[Patch Available]"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12870614", "_Jira_Issue_ChangeLog_History__created_time": "2010-03-08T20:39:30.845+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "rcmuir", "_JiraUser__key": "rcmuir", "_JiraUser__display_name": "Robert Muir", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=rcmuir"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Fixed"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Open", "_JiraIssueChangeLogItem__to_str": "Resolved"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13065766", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:20:01.633+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13090676", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T12:04:13.632+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13736476", "_Jira_Issue_ChangeLog_History__created_time": "2013-05-10T10:44:25.373+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "uschindler", "_JiraUser__key": "thetaphi", "_JiraUser__display_name": "Uwe Schindler", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=uschindler"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16374063", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:01:15.627+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16934829", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T19:59:11.895+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 210271966.845, "_JiraIssue__close_time": 100101894.528, "_JiraIssue__contributors_number": 6, "_JiraIssue__num_of_files_changed": 2, "_JiraIssue__num_of_lines_changed": 134}, {"py/object": "src.jira.jira_issue.JiraIssue", "_JiraIssue__data": {"py/object": "src.jira.jira_issue_data.JiraIssueData", "_JiraIssueData__id": "12314188", "_JiraIssueData__issue_rest_api_link": "https://issues.apache.org/jira/rest/api/2/issue/12314188", "_JiraIssueData__issue_key": "LUCENE-38", "_JiraIssueData__priority": "Minor", "_JiraIssueData__assignee": null, "_JiraIssueData__issue_status": "Closed", "_JiraIssueData__issue_creator": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueData__issue_reporter": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis@apache.org", "_JiraUser__key": "otis@apache.org", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org"}, "_JiraIssueData__issue_type": "Bug", "_JiraIssueData__project_name": "Lucene - Core", "_JiraIssueData__project_id": "12310110", "_JiraIssueData__issue_creation_time": "2002-06-11T22:02:41.000+0000", "_JiraIssueData__issue_description": "This was reported by \"James Ricci\" <james@riccinursery.com> at:\nhttp://nagoya.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgNo=1835\n\n\nWhen you create a ranged query and omit the lower term, my expectation \nwould be that I would find everything less than the upper term. Now if I pass\nfalse for the inclusive term, then I would expect that I would find all\nterms less than the upper term excluding the upper term itself.\n\nWhat is happening in the case of lower_term=null, upper_term=x,\ninclusive=false is that empty strings are being excluded because \ninclusive is set false, and the implementation of RangedQuery creates a default \nlower term of Term(fieldName, \"\"). Since it's not inclusive, it excludes \"\". \nThis isn't what I intended, and I don't think it's what most people would \nimagine RangedQuery would do in the case I've mentioned.\n\nI equate lower=null, upper=x, inclusive=false to Field < x. lower=null,\nupper=x, inclusive=true would be Field <= x. In both cases, the only\ndifference should be whether or not Field = x is true for the query.", "_JiraIssueData__time_spent": "", "_JiraIssueData__issue_summary": "RangeQuery without lower term and inclusive=false skips blank fields", "_JiraIssueData__comments": [{"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2006-08-28T07:11:42.000+0000", "_JiraIssueComment__comment_body": "Added additional tests, using \"null\" as the lower term in the range query. The tests are commented to indicate how they should be modified to behave once this LUCENE-38 is fixed. ", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "dejannenov", "_JiraUser__key": "dejannenov", "_JiraUser__display_name": "Dejan Nenov", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=dejannenov"}, "_JiraIssueComment__comment_id": "12430939", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314188/comment/12430939"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2008-11-12T23:45:58.226+0000", "_JiraIssueComment__comment_body": "Does this need to be 'fixed' ? RangeQuery now uses the semantics from ConstantScoreRangeQuery, which decided that open ended sides of a range must be inclusive (and are converted as such if not). Is that acceptable and we close this bug? Or jump a hoop or two for this rather niche case?", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markrmiller@gmail.com", "_JiraUser__key": "markrmiller@gmail.com", "_JiraUser__display_name": "Mark Miller", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com"}, "_JiraIssueComment__comment_id": "12647123", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314188/comment/12647123"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2008-11-13T04:32:19.122+0000", "_JiraIssueComment__comment_body": "This thing is 6+ years old and I don't recall this being mentioned on the list in the last half a decade.  I'll leave you the Won't Fix pleasure, Mark.\n", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "otis", "_JiraUser__key": "otis", "_JiraUser__display_name": "Otis Gospodnetic", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=otis"}, "_JiraIssueComment__comment_id": "12647185", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314188/comment/12647185"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2008-11-13T10:06:30.794+0000", "_JiraIssueComment__comment_body": "Actually, this should have already worked, because RangeTermEnum forces includeLower to be true when lowerTermText is null.\n\nBut indeed the test still fails, so I dug into a bit and I think the test is faulty.  The test expects the empty string doc (\"\") to be returned as a result, but the problem is the empty string doc when analyzed does not produce an empty string Token.  So I modified the test (attached) to use an analyzer that emits empty string token, and then the test passes as expected.\n\nI'll commit shortly.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12647245", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314188/comment/12647245"}, {"py/object": "src.jira.jira_issue_comment.JiraIssueComment", "_JiraIssueComment__comment_creation_time": "2008-11-13T10:08:21.793+0000", "_JiraIssueComment__comment_body": "Committed revision 713696.", "_JiraIssueComment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraIssueComment__comment_id": "12647247", "_JiraIssueComment__comment_rest_url": "https://issues.apache.org/jira/rest/api/2/issue/12314188/comment/12647247"}], "_JiraIssueData__attachments": [{"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12393860", "_JiraAttachment__attachment_filename": "LUCENE-38.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_JiraAttachment__attachment_size": 6219, "_JiraAttachment__attachment_created": "2008-11-13T10:06:30.745+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12393860/LUCENE-38.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}, {"py/object": "src.jira.jira_attachment.JiraAttachment", "_JiraAttachment__attachment_id": "12339682", "_JiraAttachment__attachment_filename": "TestRangeQuery.patch", "_JiraAttachment__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "dejannenov", "_JiraUser__key": "dejannenov", "_JiraUser__display_name": "Dejan Nenov", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=dejannenov"}, "_JiraAttachment__attachment_size": 4939, "_JiraAttachment__attachment_created": "2006-08-28T07:11:42.000+0000", "_JiraAttachment__attachment_content_url": "https://issues.apache.org/jira/secure/attachment/12339682/TestRangeQuery.patch", "_JiraAttachment__attachment_mime_type": "text/plain"}], "_JiraIssueData__changelog": [{"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12320796", "_Jira_Issue_ChangeLog_History__created_time": "2005-09-03T15:23:04.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "jefft", "_JiraUser__key": "jefft", "_JiraUser__display_name": "Jeff Turner", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=jefft"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Bugzilla Import Key", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "9782", "_JiraIssueChangeLogItem__to_str": "12314188"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12424640", "_Jira_Issue_ChangeLog_History__created_time": "2006-08-28T07:11:42.000+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "dejannenov", "_JiraUser__key": "dejannenov", "_JiraUser__display_name": "Dejan Nenov", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=dejannenov"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "TestRangeQuery.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12557623", "_Jira_Issue_ChangeLog_History__created_time": "2007-12-31T13:52:52.828+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "michaelbusch", "_JiraUser__key": "michaelbusch", "_JiraUser__display_name": "Michael Busch", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "priority", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Major", "_JiraIssueChangeLogItem__to_str": "Minor"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12651626", "_Jira_Issue_ChangeLog_History__created_time": "2008-11-13T10:06:30.864+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Attachment", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "LUCENE-38.patch"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12651628", "_Jira_Issue_ChangeLog_History__created_time": "2008-11-13T10:08:21.819+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "mikemccand", "_JiraUser__key": "mikemccand", "_JiraUser__display_name": "Michael McCandless", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=mikemccand"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Fix Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "2.9"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "assignee", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Lucene Developers", "_JiraIssueChangeLogItem__to_str": null}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "resolution", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": null, "_JiraIssueChangeLogItem__to_str": "Fixed"}, {"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Open", "_JiraIssueChangeLogItem__to_str": "Resolved"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "12770835", "_Jira_Issue_ChangeLog_History__created_time": "2009-09-25T16:23:04.645+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markrmiller@gmail.com", "_JiraUser__key": "markrmiller@gmail.com", "_JiraUser__display_name": "Mark Miller", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "status", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Resolved", "_JiraIssueChangeLogItem__to_str": "Closed"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13066656", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-16T21:25:04.290+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "jira", "_JiraIssueChangeLogItem__to_str": "Default workflow, editable Closed status"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13092096", "_Jira_Issue_ChangeLog_History__created_time": "2011-02-17T12:09:02.386+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "markt", "_JiraUser__key": "markt", "_JiraUser__display_name": "Mark Thomas", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=markt"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "Default workflow, editable Closed status", "_JiraIssueChangeLogItem__to_str": "jira"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "13153133", "_Jira_Issue_ChangeLog_History__created_time": "2011-06-02T22:04:54.078+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "sarowe", "_JiraUser__key": "steve_rowe", "_JiraUser__display_name": "Steven Rowe", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=sarowe"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Version", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "unspecified", "_JiraIssueChangeLogItem__to_str": null}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16380257", "_Jira_Issue_ChangeLog_History__created_time": "2017-10-11T11:04:17.622+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "classic default workflow", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible"}]}, {"py/object": "src.jira.jira_issue_changelog.Jira_Issue_ChangeLog_History", "_Jira_Issue_ChangeLog_History__id": "16934267", "_Jira_Issue_ChangeLog_History__created_time": "2018-06-28T19:59:03.433+0000", "_Jira_Issue_ChangeLog_History__author": {"py/object": "src.jira.jira_user.JiraUser", "_JiraUser__name": "gmcdonald", "_JiraUser__key": "ipv6guru", "_JiraUser__display_name": "Gavin McDonald", "_JiraUser__user_url": "https://issues.apache.org/jira/rest/api/2/user?username=gmcdonald"}, "_Jira_Issue_ChangeLog_History__items": [{"py/object": "src.jira.jira_issue_changelog.JiraIssueChangeLogItem", "_JiraIssueChangeLogItem__field": "Workflow", "_JiraIssueChangeLogItem__field_type": "jira", "_JiraIssueChangeLogItem__from_str": "patch-available, re-open possible", "_JiraIssueChangeLogItem__to_str": "patch-available, re-open possible, new labels"}]}], "_JiraIssueData__remotelinks": []}, "_JiraIssue__resolve_time": 202737940.819, "_JiraIssue__close_time": 27324882.826, "_JiraIssue__contributors_number": 5, "_JiraIssue__num_of_files_changed": 1, "_JiraIssue__num_of_lines_changed": 124}]